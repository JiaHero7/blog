<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width">
<meta name="theme-color" content="#222" media="(prefers-color-scheme: light)">
<meta name="theme-color" content="#222" media="(prefers-color-scheme: dark)"><meta name="generator" content="Hexo 6.2.0">


  <link rel="apple-touch-icon" sizes="180x180" href="/blog/images/apple-touch-icon-next.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/blog/uploads/favicon.ico">
  <link rel="icon" type="image/png" sizes="16x16" href="/blog/uploads/favicon.ico">
  <link rel="mask-icon" href="/blog/images/logo.svg" color="#222">

<link rel="stylesheet" href="/blog/css/main.css">



<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@6.1.1/css/all.min.css" integrity="sha256-DfWjNxDkM94fVBWx1H5BMMp0Zq7luBlV8QRcSES7s+0=" crossorigin="anonymous">
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/animate.css@3.1.1/animate.min.css" integrity="sha256-PR7ttpcvz8qrF57fur/yAx1qXMFJeJFiA6pSzWi0OIE=" crossorigin="anonymous">
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/pace-js@1.2.4/themes/blue/pace-theme-minimal.css">
  <script src="https://cdn.jsdelivr.net/npm/pace-js@1.2.4/pace.min.js" integrity="sha256-gqd7YTjg/BtfqWSwsJOvndl0Bxc8gFImLEkXQT8+qj0=" crossorigin="anonymous"></script>

<script class="next-config" data-name="main" type="application/json">{"hostname":"dunwu.github.io","root":"/blog/","images":"/blog/images","scheme":"Pisces","darkmode":true,"version":"8.12.1","exturl":false,"sidebar":{"position":"left","display":"post","padding":18,"offset":12},"copycode":{"enable":false,"style":null},"bookmark":{"enable":false,"color":"#222","save":"auto"},"mediumzoom":false,"lazyload":false,"pangu":false,"comments":{"style":"tabs","active":"gitalk","storage":true,"lazyload":true,"nav":null,"activeClass":"gitalk"},"stickytabs":false,"motion":{"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"fadeInDown","post_body":"fadeInDown","coll_header":"fadeInLeft","sidebar":"fadeInUp"}},"prism":false,"i18n":{"placeholder":"æœç´¢...","empty":"æ²¡æœ‰æ‰¾åˆ°ä»»ä½•æœç´¢ç»“æœï¼š${query}","hits_time":"æ‰¾åˆ° ${hits} ä¸ªæœç´¢ç»“æœï¼ˆç”¨æ—¶ ${time} æ¯«ç§’ï¼‰","hits":"æ‰¾åˆ° ${hits} ä¸ªæœç´¢ç»“æœ"},"path":"/blog/search.xml","localsearch":{"enable":true,"trigger":"auto","top_n_per_article":1,"unescape":false,"preload":false}}</script><script src="/blog/js/config.js"></script>

    <meta name="description" content="é’æ‚Ÿçš„ä¸ªäººåšå®¢">
<meta property="og:type" content="website">
<meta property="og:title" content="Dunwu Blog">
<meta property="og:url" content="https://dunwu.github.io/blog/page/5/index.html">
<meta property="og:site_name" content="Dunwu Blog">
<meta property="og:description" content="é’æ‚Ÿçš„ä¸ªäººåšå®¢">
<meta property="og:locale" content="zh_CN">
<meta property="article:author" content="é’æ‚Ÿ â—¾ Dunwu">
<meta name="twitter:card" content="summary">


<link rel="canonical" href="https://dunwu.github.io/blog/page/5/">



<script class="next-config" data-name="page" type="application/json">{"sidebar":"","isHome":true,"isPost":false,"lang":"zh-CN","comments":"","permalink":"","path":"page/5/index.html","title":""}</script>

<script class="next-config" data-name="calendar" type="application/json">""</script>
<title>Dunwu Blog</title>
  





  <noscript>
    <link rel="stylesheet" href="/blog/css/noscript.css">
  </noscript>
<style>.darkmode--activated{--body-bg-color:#282828;--content-bg-color:#333;--card-bg-color:#555;--text-color:#ccc;--blockquote-color:#bbb;--link-color:#ccc;--link-hover-color:#eee;--brand-color:#ddd;--brand-hover-color:#ddd;--table-row-odd-bg-color:#282828;--table-row-hover-bg-color:#363636;--menu-item-bg-color:#555;--btn-default-bg:#222;--btn-default-color:#ccc;--btn-default-border-color:#555;--btn-default-hover-bg:#666;--btn-default-hover-color:#ccc;--btn-default-hover-border-color:#666;--highlight-background:#282b2e;--highlight-foreground:#a9b7c6;--highlight-gutter-background:#34393d;--highlight-gutter-foreground:#9ca9b6}.darkmode--activated img{opacity:.75}.darkmode--activated img:hover{opacity:.9}.darkmode--activated code{color:#69dbdc;background:0 0}button.darkmode-toggle{z-index:9999}.darkmode-ignore,img{display:flex!important}.beian img{display:inline-block!important}</style></head>

<body itemscope itemtype="http://schema.org/WebPage" class="use-motion">
  <div class="headband"></div>

  <main class="main">
    <header class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-container">
  <div class="site-nav-toggle">
    <div class="toggle" aria-label="åˆ‡æ¢å¯¼èˆªæ " role="button">
        <span class="toggle-line"></span>
        <span class="toggle-line"></span>
        <span class="toggle-line"></span>
    </div>
  </div>

  <div class="site-meta">

    <a href="/blog/" class="brand" rel="start">
      <i class="logo-line"></i>
      <h1 class="site-title">Dunwu Blog</h1>
      <i class="logo-line"></i>
    </a>
      <p class="site-subtitle" itemprop="description">å¤§é“è‡³ç®€ï¼ŒçŸ¥æ˜“è¡Œéš¾</p>
  </div>

  <div class="site-nav-right">
    <div class="toggle popup-trigger">
        <i class="fa fa-search fa-fw fa-lg"></i>
    </div>
  </div>
</div>



<nav class="site-nav">
  <ul class="main-menu menu"><li class="menu-item menu-item-home"><a href="/blog/" rel="section"><i class="fa fa-home fa-fw"></i>é¦–é¡µ</a></li><li class="menu-item menu-item-about"><a href="/blog/about/" rel="section"><i class="fa fa-user fa-fw"></i>å…³äº</a></li><li class="menu-item menu-item-tags"><a href="/blog/tags/" rel="section"><i class="fa fa-tags fa-fw"></i>æ ‡ç­¾<span class="badge">122</span></a></li><li class="menu-item menu-item-categories"><a href="/blog/categories/" rel="section"><i class="fa fa-th fa-fw"></i>åˆ†ç±»<span class="badge">40</span></a></li><li class="menu-item menu-item-archives"><a href="/blog/archives/" rel="section"><i class="fa fa-archive fa-fw"></i>å½’æ¡£<span class="badge">144</span></a></li>
      <li class="menu-item menu-item-search">
        <a role="button" class="popup-trigger"><i class="fa fa-search fa-fw"></i>æœç´¢
        </a>
      </li>
  </ul>
</nav>



  <div class="search-pop-overlay">
    <div class="popup search-popup"><div class="search-header">
  <span class="search-icon">
    <i class="fa fa-search"></i>
  </span>
  <div class="search-input-container">
    <input autocomplete="off" autocapitalize="off" maxlength="80"
           placeholder="æœç´¢..." spellcheck="false"
           type="search" class="search-input">
  </div>
  <span class="popup-btn-close" role="button">
    <i class="fa fa-times-circle"></i>
  </span>
</div>
<div class="search-result-container no-result">
  <div class="search-result-icon">
    <i class="fa fa-spinner fa-pulse fa-5x"></i>
  </div>
</div>

    </div>
  </div>

</div>
        
  
  <div class="toggle sidebar-toggle" role="button">
    <span class="toggle-line"></span>
    <span class="toggle-line"></span>
    <span class="toggle-line"></span>
  </div>

  <aside class="sidebar">

    <div class="sidebar-inner sidebar-overview-active">
      <ul class="sidebar-nav">
        <li class="sidebar-nav-toc">
          æ–‡ç« ç›®å½•
        </li>
        <li class="sidebar-nav-overview">
          ç«™ç‚¹æ¦‚è§ˆ
        </li>
      </ul>

      <div class="sidebar-panel-container">
        <!--noindex-->
        <div class="post-toc-wrap sidebar-panel">
        </div>
        <!--/noindex-->

        <div class="site-overview-wrap sidebar-panel">
          <div class="site-author site-overview-item animated" itemprop="author" itemscope itemtype="http://schema.org/Person">
    <img class="site-author-image" itemprop="image" alt="é’æ‚Ÿ â—¾ Dunwu"
      src="/blog/uploads/avatar.gif">
  <p class="site-author-name" itemprop="name">é’æ‚Ÿ â—¾ Dunwu</p>
  <div class="site-description" itemprop="description">é’æ‚Ÿçš„ä¸ªäººåšå®¢</div>
</div>
<div class="site-state-wrap site-overview-item animated">
  <nav class="site-state">
      <div class="site-state-item site-state-posts">
        <a href="/blog/archives/">
          <span class="site-state-item-count">144</span>
          <span class="site-state-item-name">æ—¥å¿—</span>
        </a>
      </div>
      <div class="site-state-item site-state-categories">
          <a href="/blog/categories/">
        <span class="site-state-item-count">40</span>
        <span class="site-state-item-name">åˆ†ç±»</span></a>
      </div>
      <div class="site-state-item site-state-tags">
          <a href="/blog/tags/">
        <span class="site-state-item-count">122</span>
        <span class="site-state-item-name">æ ‡ç­¾</span></a>
      </div>
  </nav>
</div>
  <div class="links-of-author site-overview-item animated">
      <span class="links-of-author-item">
        <a href="https://github.com/dunwu" title="GitHub â†’ https:&#x2F;&#x2F;github.com&#x2F;dunwu" rel="noopener" target="_blank"><i class="fab fa-github fa-fw"></i>GitHub</a>
      </span>
      <span class="links-of-author-item">
        <a href="mailto:forbreak@163.com" title="E-Mail â†’ mailto:forbreak@163.com" rel="noopener" target="_blank"><i class="fa fa-envelope fa-fw"></i>E-Mail</a>
      </span>
  </div>
  <div class="cc-license site-overview-item animated" itemprop="license">
    <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/deed.zh" class="cc-opacity" rel="noopener" target="_blank"><img src="https://cdn.jsdelivr.net/npm/@creativecommons/vocabulary@2020.11.3/assets/license_badges/small/by_nc_sa.svg" alt="Creative Commons"></a>
  </div>



        </div>
      </div>
        <div class="back-to-top animated" role="button" aria-label="è¿”å›é¡¶éƒ¨">
          <i class="fa fa-arrow-up"></i>
          <span>0%</span>
        </div>
    </div>
  </aside>
  <div class="sidebar-dimmer"></div>


    </header>

    
  <div class="reading-progress-bar"></div>

  <a href="https://github.com/dunwu/blog" class="github-corner" title="Follow me on GitHub" aria-label="Follow me on GitHub" rel="noopener" target="_blank"><svg width="80" height="80" viewBox="0 0 250 250" aria-hidden="true"><path d="M0,0 L115,115 L130,115 L142,142 L250,250 L250,0 Z"></path><path d="M128.3,109.0 C113.8,99.7 119.0,89.6 119.0,89.6 C122.0,82.7 120.5,78.6 120.5,78.6 C119.2,72.0 123.4,76.3 123.4,76.3 C127.3,80.9 125.5,87.3 125.5,87.3 C122.9,97.6 130.6,101.9 134.4,103.2" fill="currentColor" style="transform-origin: 130px 106px;" class="octo-arm"></path><path d="M115.0,115.0 C114.9,115.1 118.7,116.5 119.8,115.4 L133.7,101.6 C136.9,99.2 139.9,98.4 142.2,98.6 C133.8,88.0 127.5,74.4 143.8,58.0 C148.5,53.4 154.0,51.2 159.7,51.0 C160.3,49.4 163.2,43.6 171.4,40.1 C171.4,40.1 176.1,42.5 178.8,56.2 C183.1,58.6 187.2,61.8 190.9,65.4 C194.5,69.0 197.7,73.2 200.1,77.6 C213.8,80.2 216.3,84.9 216.3,84.9 C212.7,93.1 206.9,96.0 205.4,96.6 C205.1,102.4 203.0,107.8 198.3,112.5 C181.9,128.9 168.3,122.5 157.7,114.1 C157.9,116.9 156.7,120.9 152.7,124.9 L141.0,136.5 C139.8,137.7 141.6,141.9 141.8,141.8 Z" fill="currentColor" class="octo-body"></path></svg></a>

<noscript>
  <div class="noscript-warning">Theme NexT works best with JavaScript enabled</div>
</noscript>


    <div class="main-inner index posts-expand">

    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="https://dunwu.github.io/blog/pages/f37326/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/blog/uploads/avatar.gif">
      <meta itemprop="name" content="é’æ‚Ÿ â—¾ Dunwu">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Dunwu Blog">
      <meta itemprop="description" content="é’æ‚Ÿçš„ä¸ªäººåšå®¢">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="undefined | Dunwu Blog">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/blog/pages/f37326/" class="post-title-link" itemprop="url">Tomcat å’Œ Jetty</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">å‘è¡¨äº</span>

      <time title="åˆ›å»ºæ—¶é—´ï¼š2022-02-17 22:34:30" itemprop="dateCreated datePublished" datetime="2022-02-17T22:34:30+08:00">2022-02-17</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar-check"></i>
      </span>
      <span class="post-meta-item-text">æ›´æ–°äº</span>
      <time title="ä¿®æ”¹æ—¶é—´ï¼š2022-12-23 12:01:44" itemprop="dateModified" datetime="2022-12-23T12:01:44+08:00">2022-12-23</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">åˆ†ç±»äº</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/blog/categories/Java/" itemprop="url" rel="index"><span itemprop="name">Java</span></a>
        </span>
          ï¼Œ
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/blog/categories/Java/JavaEE/" itemprop="url" rel="index"><span itemprop="name">JavaEE</span></a>
        </span>
          ï¼Œ
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/blog/categories/Java/JavaEE/%E6%9C%8D%E5%8A%A1%E5%99%A8/" itemprop="url" rel="index"><span itemprop="name">æœåŠ¡å™¨</span></a>
        </span>
          ï¼Œ
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/blog/categories/Java/JavaEE/%E6%9C%8D%E5%8A%A1%E5%99%A8/Tomcat/" itemprop="url" rel="index"><span itemprop="name">Tomcat</span></a>
        </span>
    </span>

  
    <span class="post-meta-break"></span>
    <span class="post-meta-item" title="æœ¬æ–‡å­—æ•°">
      <span class="post-meta-item-icon">
        <i class="far fa-file-word"></i>
      </span>
      <span class="post-meta-item-text">æœ¬æ–‡å­—æ•°ï¼š</span>
      <span>845</span>
    </span>
    <span class="post-meta-item" title="é˜…è¯»æ—¶é•¿">
      <span class="post-meta-item-icon">
        <i class="far fa-clock"></i>
      </span>
      <span class="post-meta-item-text">é˜…è¯»æ—¶é•¿ &asymp;</span>
      <span>1 åˆ†é’Ÿ</span>
    </span>
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <h2 id="Tomcat-å’Œ-Jetty"><a href="#Tomcat-å’Œ-Jetty" class="headerlink" title="Tomcat å’Œ Jetty"></a>Tomcat å’Œ Jetty</h2><p>Web å®¹å™¨ Tomcat æˆ– Jettyï¼Œä½œä¸ºé‡è¦çš„ç³»ç»Ÿä¸­é—´ä»¶ï¼Œè¿æ¥ç€æµè§ˆå™¨å’Œä½ çš„ Web åº”ç”¨ï¼Œå¹¶ä¸”æ”¯æ’‘ç€ Web ç¨‹åºçš„è¿è¡Œï¼Œå¯ä»¥è¯´ï¼Œ<strong>å¼„æ‡‚äº† Tomcat å’Œ Jetty çš„åŸç†ï¼ŒJava Web å¼€å‘å¯¹ä½ æ¥è¯´å°±æ¯«æ— ç§˜å¯†å¯è¨€</strong>ã€‚</p>
<h2 id="Web-å®¹å™¨"><a href="#Web-å®¹å™¨" class="headerlink" title="Web å®¹å™¨"></a>Web å®¹å™¨</h2><p>æ—©æœŸçš„ Web åº”ç”¨ä¸»è¦ç”¨äºæµè§ˆæ–°é—»ç­‰é™æ€é¡µé¢ï¼ŒHTTP æœåŠ¡å™¨ï¼ˆæ¯”å¦‚ Apacheã€Nginxï¼‰å‘æµè§ˆå™¨è¿”å›é™æ€ HTMLï¼Œæµè§ˆå™¨è´Ÿè´£è§£æ HTMLï¼Œå°†ç»“æœå‘ˆç°ç»™ç”¨æˆ·ã€‚</p>
<p>éšç€äº’è”ç½‘çš„å‘å±•ï¼Œæˆ‘ä»¬å·²ç»ä¸æ»¡è¶³äºä»…ä»…æµè§ˆé™æ€é¡µé¢ï¼Œè¿˜å¸Œæœ›é€šè¿‡ä¸€äº›äº¤äº’æ“ä½œï¼Œæ¥è·å–åŠ¨æ€ç»“æœï¼Œå› æ­¤ä¹Ÿå°±éœ€è¦ä¸€äº›æ‰©å±•æœºåˆ¶èƒ½å¤Ÿè®© HTTP æœåŠ¡å™¨è°ƒç”¨æœåŠ¡ç«¯ç¨‹åºã€‚</p>
<p>äºæ˜¯ Sun å…¬å¸æ¨å‡ºäº† Servlet æŠ€æœ¯ã€‚ä½ å¯ä»¥æŠŠ Servlet ç®€å•ç†è§£ä¸ºè¿è¡Œåœ¨æœåŠ¡ç«¯çš„ Java å°ç¨‹åºï¼Œä½†æ˜¯ Servlet æ²¡æœ‰ main æ–¹æ³•ï¼Œä¸èƒ½ç‹¬ç«‹è¿è¡Œï¼Œå› æ­¤å¿…é¡»æŠŠå®ƒéƒ¨ç½²åˆ° Servlet å®¹å™¨ä¸­ï¼Œç”±å®¹å™¨æ¥å®ä¾‹åŒ–å¹¶è°ƒç”¨ Servletã€‚</p>
<p>è€Œ Tomcat å’Œ Jetty å°±æ˜¯ä¸€ä¸ª Servlet å®¹å™¨ã€‚ä¸ºäº†æ–¹ä¾¿ä½¿ç”¨ï¼Œå®ƒä»¬ä¹Ÿå…·æœ‰ HTTP æœåŠ¡å™¨çš„åŠŸèƒ½ï¼Œå› æ­¤<strong>Tomcat æˆ–è€… Jetty å°±æ˜¯ä¸€ä¸ªâ€œHTTP æœåŠ¡å™¨ + Servlet å®¹å™¨â€ï¼Œæˆ‘ä»¬ä¹Ÿå«å®ƒä»¬ Web å®¹å™¨ã€‚</strong></p>
<p>å…¶ä»–åº”ç”¨æœåŠ¡å™¨æ¯”å¦‚ JBoss å’Œ WebLogicï¼Œå®ƒä»¬ä¸ä»…ä»…æœ‰ Servlet å®¹å™¨çš„åŠŸèƒ½ï¼Œä¹ŸåŒ…å« EJB å®¹å™¨ï¼Œæ˜¯å®Œæ•´çš„ Java EE åº”ç”¨æœåŠ¡å™¨ã€‚ä»è¿™ä¸ªè§’åº¦çœ‹ï¼ŒTomcat å’Œ Jetty ç®—æ˜¯ä¸€ä¸ªè½»é‡çº§çš„åº”ç”¨æœåŠ¡å™¨ã€‚</p>
<p>åœ¨å¾®æœåŠ¡æ¶æ„æ—¥æ¸æµè¡Œçš„ä»Šå¤©ï¼Œå¼€å‘äººå‘˜æ›´å–œæ¬¢ç¨³å®šçš„ã€è½»é‡çº§çš„åº”ç”¨æœåŠ¡å™¨ï¼Œå¹¶ä¸”åº”ç”¨ç¨‹åºç”¨å†…åµŒçš„æ–¹å¼æ¥è¿è¡Œ Servlet å®¹å™¨ä¹Ÿé€æ¸æµè¡Œèµ·æ¥ã€‚ä¹‹æ‰€ä»¥é€‰æ‹©è½»é‡çº§ï¼Œæ˜¯å› ä¸ºåœ¨å¾®æœåŠ¡æ¶æ„ä¸‹ï¼Œæˆ‘ä»¬æŠŠä¸€ä¸ªå¤§è€Œå…¨çš„å•ä½“åº”ç”¨ï¼Œæ‹†åˆ†æˆä¸€ä¸ªä¸ªåŠŸèƒ½å•ä¸€çš„å¾®æœåŠ¡ï¼Œåœ¨è¿™ä¸ªè¿‡ç¨‹ä¸­ï¼ŒæœåŠ¡çš„æ•°é‡å¿…ç„¶è¦å¢åŠ ï¼Œä½†ä¸ºäº†å‡å°‘èµ„æºçš„æ¶ˆè€—ï¼Œå¹¶ä¸”é™ä½éƒ¨ç½²çš„æˆæœ¬ï¼Œæˆ‘ä»¬å¸Œæœ›è¿è¡ŒæœåŠ¡çš„ Web å®¹å™¨ä¹Ÿæ˜¯è½»é‡çº§çš„ï¼ŒWeb å®¹å™¨æœ¬èº«åº”è¯¥æ¶ˆè€—è¾ƒå°‘çš„å†…å­˜å’Œ CPU èµ„æºï¼Œå¹¶ä¸”ç”±åº”ç”¨æœ¬èº«æ¥å¯åŠ¨ä¸€ä¸ªåµŒå…¥å¼çš„ Web å®¹å™¨ï¼Œè€Œä¸æ˜¯é€šè¿‡ Web å®¹å™¨æ¥éƒ¨ç½²å’Œå¯åŠ¨åº”ç”¨ï¼Œè¿™æ ·å¯ä»¥é™ä½åº”ç”¨éƒ¨ç½²çš„å¤æ‚åº¦ã€‚</p>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="https://dunwu.github.io/blog/pages/2950ba/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/blog/uploads/avatar.gif">
      <meta itemprop="name" content="é’æ‚Ÿ â—¾ Dunwu">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Dunwu Blog">
      <meta itemprop="description" content="é’æ‚Ÿçš„ä¸ªäººåšå®¢">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="undefined | Dunwu Blog">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/blog/pages/2950ba/" class="post-title-link" itemprop="url">Java åŸºç¡€è¯­æ³•ç‰¹æ€§</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">å‘è¡¨äº</span>

      <time title="åˆ›å»ºæ—¶é—´ï¼š2022-01-25 07:31:16" itemprop="dateCreated datePublished" datetime="2022-01-25T07:31:16+08:00">2022-01-25</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar-check"></i>
      </span>
      <span class="post-meta-item-text">æ›´æ–°äº</span>
      <time title="ä¿®æ”¹æ—¶é—´ï¼š2022-12-23 12:01:44" itemprop="dateModified" datetime="2022-12-23T12:01:44+08:00">2022-12-23</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">åˆ†ç±»äº</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/blog/categories/Java/" itemprop="url" rel="index"><span itemprop="name">Java</span></a>
        </span>
          ï¼Œ
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/blog/categories/Java/JavaSE/" itemprop="url" rel="index"><span itemprop="name">JavaSE</span></a>
        </span>
          ï¼Œ
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/blog/categories/Java/JavaSE/%E5%9F%BA%E7%A1%80%E7%89%B9%E6%80%A7/" itemprop="url" rel="index"><span itemprop="name">åŸºç¡€ç‰¹æ€§</span></a>
        </span>
    </span>

  
    <span class="post-meta-break"></span>
    <span class="post-meta-item" title="æœ¬æ–‡å­—æ•°">
      <span class="post-meta-item-icon">
        <i class="far fa-file-word"></i>
      </span>
      <span class="post-meta-item-text">æœ¬æ–‡å­—æ•°ï¼š</span>
      <span>1.5k</span>
    </span>
    <span class="post-meta-item" title="é˜…è¯»æ—¶é•¿">
      <span class="post-meta-item-icon">
        <i class="far fa-clock"></i>
      </span>
      <span class="post-meta-item-text">é˜…è¯»æ—¶é•¿ &asymp;</span>
      <span>1 åˆ†é’Ÿ</span>
    </span>
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <h1 id="Java-åŸºç¡€è¯­æ³•ç‰¹æ€§"><a href="#Java-åŸºç¡€è¯­æ³•ç‰¹æ€§" class="headerlink" title="Java åŸºç¡€è¯­æ³•ç‰¹æ€§"></a>Java åŸºç¡€è¯­æ³•ç‰¹æ€§</h1><h2 id="æ³¨é‡Š"><a href="#æ³¨é‡Š" class="headerlink" title="æ³¨é‡Š"></a>æ³¨é‡Š</h2><p>ç©ºç™½è¡Œï¼Œæˆ–è€…æ³¨é‡Šçš„å†…å®¹ï¼Œéƒ½ä¼šè¢« Java ç¼–è¯‘å™¨å¿½ç•¥æ‰ã€‚</p>
<p>Java æ”¯æŒå¤šç§æ³¨é‡Šæ–¹å¼ï¼Œä¸‹é¢çš„ç¤ºä¾‹å±•ç¤ºäº†å„ç§æ³¨é‡Šçš„ä½¿ç”¨æ–¹å¼ï¼š</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">HelloWorld</span> &#123;</span><br><span class="line">    <span class="comment">/*</span></span><br><span class="line"><span class="comment">     * JavaDoc æ³¨é‡Š</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="comment">// å•è¡Œæ³¨é‡Š</span></span><br><span class="line">        <span class="comment">/* å¤šè¡Œæ³¨é‡Šï¼š</span></span><br><span class="line"><span class="comment">           1. æ³¨æ„ç‚¹a</span></span><br><span class="line"><span class="comment">           2. æ³¨æ„ç‚¹b</span></span><br><span class="line"><span class="comment">         */</span></span><br><span class="line">        System.out.println(<span class="string">&quot;Hello World&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="åŸºæœ¬æ•°æ®ç±»å‹"><a href="#åŸºæœ¬æ•°æ®ç±»å‹" class="headerlink" title="åŸºæœ¬æ•°æ®ç±»å‹"></a>åŸºæœ¬æ•°æ®ç±»å‹</h2><p><img src="https://raw.githubusercontent.com/dunwu/images/dev/cs/java/javacore/xmind/Java%E5%9F%BA%E6%9C%AC%E6%95%B0%E6%8D%AE%E7%B1%BB%E5%9E%8B.svg" alt="img"></p>
<blockquote>
<p>ğŸ‘‰ æ‰©å±•é˜…è¯»ï¼š<a target="_blank" rel="noopener" href="https://github.com/dunwu/javacore/blob/master/docs/basics/java-data-type.md">æ·±å…¥ç†è§£ Java åŸºæœ¬æ•°æ®ç±»å‹</a></p>
</blockquote>
<h2 id="å˜é‡"><a href="#å˜é‡" class="headerlink" title="å˜é‡"></a>å˜é‡</h2><p>Java æ”¯æŒçš„å˜é‡ç±»å‹æœ‰ï¼š</p>
<ul>
<li><code>å±€éƒ¨å˜é‡</code> - ç±»æ–¹æ³•ä¸­çš„å˜é‡ã€‚</li>
<li><code>å®ä¾‹å˜é‡ï¼ˆä¹Ÿå«æˆå‘˜å˜é‡ï¼‰</code> - ç±»æ–¹æ³•å¤–çš„å˜é‡ï¼Œä¸è¿‡æ²¡æœ‰ <code>static</code> ä¿®é¥°ã€‚</li>
<li><code>ç±»å˜é‡ï¼ˆä¹Ÿå«é™æ€å˜é‡ï¼‰</code> - ç±»æ–¹æ³•å¤–çš„å˜é‡ï¼Œç”¨ <code>static</code> ä¿®é¥°ã€‚</li>
</ul>
<p>ç‰¹æ€§å¯¹æ¯”ï¼š</p>
<table>
<thead>
<tr>
<th>å±€éƒ¨å˜é‡</th>
<th>å®ä¾‹å˜é‡ï¼ˆä¹Ÿå«æˆå‘˜å˜é‡ï¼‰</th>
<th>ç±»å˜é‡ï¼ˆä¹Ÿå«é™æ€å˜é‡ï¼‰</th>
</tr>
</thead>
<tbody><tr>
<td>å±€éƒ¨å˜é‡å£°æ˜åœ¨æ–¹æ³•ã€æ„é€ æ–¹æ³•æˆ–è€…è¯­å¥å—ä¸­ã€‚</td>
<td>å®ä¾‹å˜é‡å£°æ˜åœ¨æ–¹æ³•ã€æ„é€ æ–¹æ³•å’Œè¯­å¥å—ä¹‹å¤–ã€‚</td>
<td>ç±»å˜é‡å£°æ˜åœ¨æ–¹æ³•ã€æ„é€ æ–¹æ³•å’Œè¯­å¥å—ä¹‹å¤–ã€‚å¹¶ä¸”ä»¥ static ä¿®é¥°ã€‚</td>
</tr>
<tr>
<td>å±€éƒ¨å˜é‡åœ¨æ–¹æ³•ã€æ„é€ æ–¹æ³•ã€æˆ–è€…è¯­å¥å—è¢«æ‰§è¡Œçš„æ—¶å€™åˆ›å»ºï¼Œå½“å®ƒä»¬æ‰§è¡Œå®Œæˆåï¼Œå˜é‡å°†ä¼šè¢«é”€æ¯ã€‚</td>
<td>å®ä¾‹å˜é‡åœ¨å¯¹è±¡åˆ›å»ºçš„æ—¶å€™åˆ›å»ºï¼Œåœ¨å¯¹è±¡è¢«é”€æ¯çš„æ—¶å€™é”€æ¯ã€‚</td>
<td>ç±»å˜é‡åœ¨ç¬¬ä¸€æ¬¡è¢«è®¿é—®æ—¶åˆ›å»ºï¼Œåœ¨ç¨‹åºç»“æŸæ—¶é”€æ¯ã€‚</td>
</tr>
<tr>
<td>å±€éƒ¨å˜é‡æ²¡æœ‰é»˜è®¤å€¼ï¼Œæ‰€ä»¥å¿…é¡»ç»è¿‡åˆå§‹åŒ–ï¼Œæ‰å¯ä»¥ä½¿ç”¨ã€‚</td>
<td>å®ä¾‹å˜é‡å…·æœ‰é»˜è®¤å€¼ã€‚æ•°å€¼å‹å˜é‡çš„é»˜è®¤å€¼æ˜¯ 0ï¼Œå¸ƒå°”å‹å˜é‡çš„é»˜è®¤å€¼æ˜¯ falseï¼Œå¼•ç”¨ç±»å‹å˜é‡çš„é»˜è®¤å€¼æ˜¯ nullã€‚å˜é‡çš„å€¼å¯ä»¥åœ¨å£°æ˜æ—¶æŒ‡å®šï¼Œä¹Ÿå¯ä»¥åœ¨æ„é€ æ–¹æ³•ä¸­æŒ‡å®šã€‚</td>
<td>ç±»å˜é‡å…·æœ‰é»˜è®¤å€¼ã€‚æ•°å€¼å‹å˜é‡çš„é»˜è®¤å€¼æ˜¯ 0ï¼Œå¸ƒå°”å‹å˜é‡çš„é»˜è®¤å€¼æ˜¯ falseï¼Œå¼•ç”¨ç±»å‹å˜é‡çš„é»˜è®¤å€¼æ˜¯ nullã€‚å˜é‡çš„å€¼å¯ä»¥åœ¨å£°æ˜æ—¶æŒ‡å®šï¼Œä¹Ÿå¯ä»¥åœ¨æ„é€ æ–¹æ³•ä¸­æŒ‡å®šã€‚æ­¤å¤–ï¼Œé™æ€å˜é‡è¿˜å¯ä»¥åœ¨é™æ€è¯­å¥å—ä¸­åˆå§‹åŒ–ã€‚</td>
</tr>
<tr>
<td>å¯¹äºå±€éƒ¨å˜é‡ï¼Œå¦‚æœæ˜¯åŸºæœ¬ç±»å‹ï¼Œä¼šæŠŠå€¼ç›´æ¥å­˜å‚¨åœ¨æ ˆï¼›å¦‚æœæ˜¯å¼•ç”¨ç±»å‹ï¼Œä¼šæŠŠå…¶å¯¹è±¡å­˜å‚¨åœ¨å †ï¼Œè€ŒæŠŠè¿™ä¸ªå¯¹è±¡çš„å¼•ç”¨ï¼ˆæŒ‡é’ˆï¼‰å­˜å‚¨åœ¨æ ˆã€‚</td>
<td>å®ä¾‹å˜é‡å­˜å‚¨åœ¨å †ã€‚</td>
<td>ç±»å˜é‡å­˜å‚¨åœ¨é™æ€å­˜å‚¨åŒºã€‚</td>
</tr>
<tr>
<td>è®¿é—®ä¿®é¥°ç¬¦ä¸èƒ½ç”¨äºå±€éƒ¨å˜é‡ã€‚</td>
<td>è®¿é—®ä¿®é¥°ç¬¦å¯ä»¥ç”¨äºå®ä¾‹å˜é‡ã€‚</td>
<td>è®¿é—®ä¿®é¥°ç¬¦å¯ä»¥ç”¨äºç±»å˜é‡ã€‚</td>
</tr>
<tr>
<td>å±€éƒ¨å˜é‡åªåœ¨å£°æ˜å®ƒçš„æ–¹æ³•ã€æ„é€ æ–¹æ³•æˆ–è€…è¯­å¥å—ä¸­å¯è§ã€‚</td>
<td>å®ä¾‹å˜é‡å¯¹äºç±»ä¸­çš„æ–¹æ³•ã€æ„é€ æ–¹æ³•æˆ–è€…è¯­å¥å—æ˜¯å¯è§çš„ã€‚ä¸€èˆ¬æƒ…å†µä¸‹åº”è¯¥æŠŠå®ä¾‹å˜é‡è®¾ä¸ºç§æœ‰ã€‚é€šè¿‡ä½¿ç”¨è®¿é—®ä¿®é¥°ç¬¦å¯ä»¥ä½¿å®ä¾‹å˜é‡å¯¹å­ç±»å¯è§ã€‚</td>
<td>ä¸å®ä¾‹å˜é‡å…·æœ‰ç›¸ä¼¼çš„å¯è§æ€§ã€‚ä½†ä¸ºäº†å¯¹ç±»çš„ä½¿ç”¨è€…å¯è§ï¼Œå¤§å¤šæ•°é™æ€å˜é‡å£°æ˜ä¸º public ç±»å‹ã€‚</td>
</tr>
<tr>
<td></td>
<td>å®ä¾‹å˜é‡å¯ä»¥ç›´æ¥é€šè¿‡å˜é‡åè®¿é—®ã€‚ä½†åœ¨é™æ€æ–¹æ³•ä»¥åŠå…¶ä»–ç±»ä¸­ï¼Œå°±åº”è¯¥ä½¿ç”¨å®Œå…¨é™å®šåï¼šObejectReference.VariableNameã€‚</td>
<td>é™æ€å˜é‡å¯ä»¥é€šè¿‡ï¼šClassName.VariableName çš„æ–¹å¼è®¿é—®ã€‚</td>
</tr>
<tr>
<td></td>
<td></td>
<td>æ— è®ºä¸€ä¸ªç±»åˆ›å»ºäº†å¤šå°‘ä¸ªå¯¹è±¡ï¼Œç±»åªæ‹¥æœ‰ç±»å˜é‡çš„ä¸€ä»½æ‹·è´ã€‚</td>
</tr>
<tr>
<td></td>
<td></td>
<td>ç±»å˜é‡é™¤äº†è¢«å£°æ˜ä¸ºå¸¸é‡å¤–å¾ˆå°‘ä½¿ç”¨ã€‚</td>
</tr>
</tbody></table>
<p><strong>å˜é‡ä¿®é¥°ç¬¦</strong></p>
<ul>
<li><strong>è®¿é—®çº§åˆ«ä¿®é¥°ç¬¦</strong><ul>
<li>å¦‚æœå˜é‡æ˜¯å®ä¾‹å˜é‡æˆ–ç±»å˜é‡ï¼Œå¯ä»¥æ·»åŠ è®¿é—®çº§åˆ«ä¿®é¥°ç¬¦ï¼ˆpublic&#x2F;protected&#x2F;privateï¼‰</li>
</ul>
</li>
<li><strong>é™æ€ä¿®é¥°ç¬¦</strong><ul>
<li>å¦‚æœå˜é‡æ˜¯ç±»å˜é‡ï¼Œéœ€è¦æ·»åŠ  static ä¿®é¥°</li>
</ul>
</li>
<li><strong>final</strong><ul>
<li>å¦‚æœå˜é‡ä½¿ç”¨ <code>final</code> ä¿®é¥°ç¬¦ï¼Œå°±è¡¨ç¤ºè¿™æ˜¯ä¸€ä¸ªå¸¸é‡ï¼Œä¸èƒ½è¢«ä¿®æ”¹ã€‚</li>
</ul>
</li>
</ul>
<h2 id="æ•°ç»„"><a href="#æ•°ç»„" class="headerlink" title="æ•°ç»„"></a>æ•°ç»„</h2><p><img src="https://raw.githubusercontent.com/dunwu/images/dev/cs/java/javacore/xmind/Java%E6%95%B0%E7%BB%84.svg" alt="img"></p>
<blockquote>
<p>ğŸ‘‰ æ‰©å±•é˜…è¯»ï¼š<a target="_blank" rel="noopener" href="https://github.com/dunwu/javacore/blob/master/docs/basics/java-array.md">æ·±å…¥ç†è§£ Java æ•°ç»„</a></p>
</blockquote>
<h2 id="æšä¸¾"><a href="#æšä¸¾" class="headerlink" title="æšä¸¾"></a>æšä¸¾</h2><p><img src="https://raw.githubusercontent.com/dunwu/images/dev/cs/java/javacore/xmind/Java%E6%9E%9A%E4%B8%BE.svg" alt="img"></p>
<blockquote>
<p>ğŸ‘‰ æ‰©å±•é˜…è¯»ï¼š<a target="_blank" rel="noopener" href="https://github.com/dunwu/javacore/blob/master/docs/basics/java-enum.md">æ·±å…¥ç†è§£ Java æ•°ç»„</a></p>
</blockquote>
<h2 id="æ“ä½œç¬¦"><a href="#æ“ä½œç¬¦" class="headerlink" title="æ“ä½œç¬¦"></a>æ“ä½œç¬¦</h2><p>Java ä¸­æ”¯æŒçš„æ“ä½œç¬¦ç±»å‹å¦‚ä¸‹ï¼š</p>
<p><img src="https://raw.githubusercontent.com/dunwu/images/dev/cs/java/javacore/xmind/Java%E6%93%8D%E4%BD%9C%E7%AC%A6.svg" alt="img"></p>
<blockquote>
<p>ğŸ‘‰ æ‰©å±•é˜…è¯»ï¼š<a target="_blank" rel="noopener" href="http://www.runoob.com/java/java-operators.html">Java æ“ä½œç¬¦</a></p>
</blockquote>
<h2 id="æ–¹æ³•"><a href="#æ–¹æ³•" class="headerlink" title="æ–¹æ³•"></a>æ–¹æ³•</h2><p><img src="https://raw.githubusercontent.com/dunwu/images/dev/snap/20220125072221.png" alt="img"></p>
<blockquote>
<p>ğŸ‘‰ æ‰©å±•é˜…è¯»ï¼š<a target="_blank" rel="noopener" href="https://github.com/dunwu/javacore/blob/master/docs/basics/java-method.md">æ·±å…¥ç†è§£ Java æ–¹æ³•</a></p>
</blockquote>
<h2 id="æ§åˆ¶è¯­å¥"><a href="#æ§åˆ¶è¯­å¥" class="headerlink" title="æ§åˆ¶è¯­å¥"></a>æ§åˆ¶è¯­å¥</h2><p><img src="https://raw.githubusercontent.com/dunwu/images/dev/cs/java/javacore/xmind/Java%E6%8E%A7%E5%88%B6%E8%AF%AD%E5%8F%A5.svg" alt="img"></p>
<blockquote>
<p>ğŸ‘‰ æ‰©å±•é˜…è¯»ï¼š<a target="_blank" rel="noopener" href="https://github.com/dunwu/javacore/blob/master/docs/basics/java-control-statement.md">Java æ§åˆ¶è¯­å¥</a></p>
</blockquote>
<h2 id="å¼‚å¸¸"><a href="#å¼‚å¸¸" class="headerlink" title="å¼‚å¸¸"></a>å¼‚å¸¸</h2><p><img src="https://raw.githubusercontent.com/dunwu/images/dev/cs/java/javacore/xmind/Java%E5%BC%82%E5%B8%B8%E6%A1%86%E6%9E%B6.svg" alt="img"></p>
<p><img src="https://raw.githubusercontent.com/dunwu/images/dev/cs/java/javacore/xmind/Java%E5%BC%82%E5%B8%B8.svg" alt="img"></p>
<blockquote>
<p>ğŸ‘‰ æ‰©å±•é˜…è¯»ï¼š<a target="_blank" rel="noopener" href="https://github.com/dunwu/javacore/blob/master/docs/basics/java-exception.md">æ·±å…¥ç†è§£ Java å¼‚å¸¸</a></p>
</blockquote>
<h2 id="æ³›å‹"><a href="#æ³›å‹" class="headerlink" title="æ³›å‹"></a>æ³›å‹</h2><p><img src="https://raw.githubusercontent.com/dunwu/images/dev/cs/java/javacore/xmind/Java%E6%B3%9B%E5%9E%8B.svg" alt="img"></p>
<blockquote>
<p>ğŸ‘‰ æ‰©å±•é˜…è¯»ï¼š<a target="_blank" rel="noopener" href="https://github.com/dunwu/javacore/blob/master/docs/basics/java-generic.md">æ·±å…¥ç†è§£ Java æ³›å‹</a></p>
</blockquote>
<h2 id="åå°„"><a href="#åå°„" class="headerlink" title="åå°„"></a>åå°„</h2><p><img src="https://raw.githubusercontent.com/dunwu/images/dev/cs/java/javacore/xmind/Java%E5%8F%8D%E5%B0%84.svg" alt="img"></p>
<p><img src="https://raw.githubusercontent.com/dunwu/images/dev/cs/java/javacore/xmind/Java%E4%BB%A3%E7%90%86.svg" alt="img"></p>
<blockquote>
<p>ğŸ‘‰ æ‰©å±•é˜…è¯»ï¼š<a target="_blank" rel="noopener" href="https://github.com/dunwu/javacore/blob/master/docs/basics/java-reflection.md">æ·±å…¥ç†è§£ Java åå°„å’ŒåŠ¨æ€ä»£ç†</a></p>
</blockquote>
<h2 id="æ³¨è§£"><a href="#æ³¨è§£" class="headerlink" title="æ³¨è§£"></a>æ³¨è§£</h2><p><img src="https://raw.githubusercontent.com/dunwu/images/dev/cs/java/javacore/xmind/%E6%B3%A8%E8%A7%A3%E7%AE%80%E4%BB%8B.svg" alt="img"></p>
<p><img src="https://raw.githubusercontent.com/dunwu/images/dev/cs/java/javacore/xmind/%E5%85%83%E6%B3%A8%E8%A7%A3.svg" alt="img"></p>
<p><img src="https://raw.githubusercontent.com/dunwu/images/dev/cs/java/javacore/xmind/%E5%86%85%E7%BD%AE%E6%B3%A8%E8%A7%A3.svg" alt="img"></p>
<p><img src="https://raw.githubusercontent.com/dunwu/images/dev/cs/java/javacore/xmind/%E8%87%AA%E5%AE%9A%E4%B9%89%E6%B3%A8%E8%A7%A3.svg" alt="img"></p>
<blockquote>
<p>ğŸ‘‰ æ‰©å±•é˜…è¯»ï¼š<a target="_blank" rel="noopener" href="https://github.com/dunwu/javacore/blob/master/docs/basics/java-annotation.md">æ·±å…¥ç†è§£ Java æ³¨è§£</a></p>
</blockquote>
<h2 id="åºåˆ—åŒ–"><a href="#åºåˆ—åŒ–" class="headerlink" title="åºåˆ—åŒ–"></a>åºåˆ—åŒ–</h2><p><img src="https://raw.githubusercontent.com/dunwu/images/dev/cs/java/javacore/xmind/Java%E5%BA%8F%E5%88%97%E5%8C%96.svg" alt="img"></p>
<blockquote>
<p>ğŸ‘‰ æ‰©å±•é˜…è¯»ï¼š<a target="_blank" rel="noopener" href="https://github.com/dunwu/javacore/blob/master/docs/io/java-serialization.md">æ·±å…¥ç†è§£ Java åºåˆ—åŒ–</a></p>
</blockquote>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="https://dunwu.github.io/blog/pages/68097d/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/blog/uploads/avatar.gif">
      <meta itemprop="name" content="é’æ‚Ÿ â—¾ Dunwu">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Dunwu Blog">
      <meta itemprop="description" content="é’æ‚Ÿçš„ä¸ªäººåšå®¢">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="undefined | Dunwu Blog">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/blog/pages/68097d/" class="post-title-link" itemprop="url">Spring Bean</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">å‘è¡¨äº</span>

      <time title="åˆ›å»ºæ—¶é—´ï¼š2021-12-10 19:15:42" itemprop="dateCreated datePublished" datetime="2021-12-10T19:15:42+08:00">2021-12-10</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar-check"></i>
      </span>
      <span class="post-meta-item-text">æ›´æ–°äº</span>
      <time title="ä¿®æ”¹æ—¶é—´ï¼š2022-12-23 12:01:44" itemprop="dateModified" datetime="2022-12-23T12:01:44+08:00">2022-12-23</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">åˆ†ç±»äº</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/blog/categories/Java/" itemprop="url" rel="index"><span itemprop="name">Java</span></a>
        </span>
          ï¼Œ
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/blog/categories/Java/%E6%A1%86%E6%9E%B6/" itemprop="url" rel="index"><span itemprop="name">æ¡†æ¶</span></a>
        </span>
          ï¼Œ
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/blog/categories/Java/%E6%A1%86%E6%9E%B6/Spring/" itemprop="url" rel="index"><span itemprop="name">Spring</span></a>
        </span>
          ï¼Œ
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/blog/categories/Java/%E6%A1%86%E6%9E%B6/Spring/Spring%E6%A0%B8%E5%BF%83/" itemprop="url" rel="index"><span itemprop="name">Springæ ¸å¿ƒ</span></a>
        </span>
    </span>

  
    <span class="post-meta-break"></span>
    <span class="post-meta-item" title="æœ¬æ–‡å­—æ•°">
      <span class="post-meta-item-icon">
        <i class="far fa-file-word"></i>
      </span>
      <span class="post-meta-item-text">æœ¬æ–‡å­—æ•°ï¼š</span>
      <span>5.7k</span>
    </span>
    <span class="post-meta-item" title="é˜…è¯»æ—¶é•¿">
      <span class="post-meta-item-icon">
        <i class="far fa-clock"></i>
      </span>
      <span class="post-meta-item-text">é˜…è¯»æ—¶é•¿ &asymp;</span>
      <span>5 åˆ†é’Ÿ</span>
    </span>
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <h1 id="Spring-Bean"><a href="#Spring-Bean" class="headerlink" title="Spring Bean"></a>Spring Bean</h1><p>åœ¨ Spring ä¸­ï¼Œæ„æˆåº”ç”¨ç¨‹åºä¸»ä½“ç”± Spring IoC å®¹å™¨ç®¡ç†çš„å¯¹è±¡ç§°ä¸º Beanã€‚<strong>Bean æ˜¯ç”± Spring IoC å®¹å™¨å®ä¾‹åŒ–ã€è£…é…å’Œç®¡ç†çš„å¯¹è±¡</strong>ã€‚ Bean ä»¥åŠå®ƒä»¬ä¹‹é—´çš„ä¾èµ–å…³ç³»åæ˜ åœ¨å®¹å™¨ä½¿ç”¨çš„é…ç½®å…ƒæ•°æ®ä¸­ã€‚</p>
<h2 id="Spring-Bean-å®šä¹‰"><a href="#Spring-Bean-å®šä¹‰" class="headerlink" title="Spring Bean å®šä¹‰"></a>Spring Bean å®šä¹‰</h2><h3 id="BeanDefinition"><a href="#BeanDefinition" class="headerlink" title="BeanDefinition"></a>BeanDefinition</h3><p>Spring IoC å®¹å™¨æœ¬èº«ï¼Œå¹¶ä¸èƒ½è¯†åˆ«é…ç½®çš„å…ƒæ•°æ®ã€‚ä¸ºæ­¤ï¼Œè¦å°†è¿™äº›é…ç½®ä¿¡æ¯è½¬ä¸º Spring èƒ½è¯†åˆ«çš„æ ¼å¼â€”â€”<code>BeanDefinition</code> å¯¹è±¡ã€‚</p>
<p><strong><code>BeanDefinition</code> æ˜¯ Spring ä¸­å®šä¹‰ Bean çš„é…ç½®å…ƒä¿¡æ¯æ¥å£</strong>ï¼Œå®ƒåŒ…å«ï¼š</p>
<ul>
<li>Bean ç±»å</li>
<li>Bean è¡Œä¸ºé…ç½®å…ƒç´ ï¼Œå¦‚ï¼šä½œç”¨åŸŸã€è‡ªåŠ¨ç»‘å®šçš„æ¨¡å¼ã€ç”Ÿå‘½å‘¨æœŸå›è°ƒç­‰</li>
<li>å…¶ä»– Bean å¼•ç”¨ï¼Œä¹Ÿå¯ç§°ä¸ºåˆä½œè€…ï¼ˆCollaboratorsï¼‰æˆ–ä¾èµ–ï¼ˆDependenciesï¼‰</li>
<li>é…ç½®è®¾ç½®ï¼Œå¦‚ Bean å±æ€§ï¼ˆPropertiesï¼‰</li>
</ul>
<h4 id="BeanDefinition-å…ƒä¿¡æ¯"><a href="#BeanDefinition-å…ƒä¿¡æ¯" class="headerlink" title="BeanDefinition å…ƒä¿¡æ¯"></a>BeanDefinition å…ƒä¿¡æ¯</h4><p><code>BeanDefinition</code> å…ƒä¿¡æ¯å¦‚ä¸‹ï¼š</p>
<table>
<thead>
<tr>
<th>å±æ€§ï¼ˆPropertyï¼‰</th>
<th>è¯´æ˜</th>
</tr>
</thead>
<tbody><tr>
<td><a target="_blank" rel="noopener" href="https://docs.spring.io/spring-framework/docs/current/reference/html/core.html#beans-factory-class">Class</a></td>
<td>å…¨ç±»åï¼Œå¿…é¡»æ˜¯å…·ä½“ç±»ï¼Œä¸èƒ½ç”¨æŠ½è±¡ç±»æˆ–æ¥å£</td>
</tr>
<tr>
<td><a target="_blank" rel="noopener" href="https://docs.spring.io/spring-framework/docs/current/reference/html/core.html#beans-beanname">Name</a></td>
<td>Bean çš„åç§°æˆ–è€… ID</td>
</tr>
<tr>
<td><a target="_blank" rel="noopener" href="https://docs.spring.io/spring-framework/docs/current/reference/html/core.html#beans-factory-scopes">Scope</a></td>
<td>Bean çš„ä½œç”¨åŸŸï¼ˆå¦‚ï¼š<code>singleton</code>ã€<code>prototype</code> ç­‰ï¼‰</td>
</tr>
<tr>
<td><a target="_blank" rel="noopener" href="https://docs.spring.io/spring-framework/docs/current/reference/html/core.html#beans-factory-collaborators">Constructor arguments</a></td>
<td>Bean æ„é€ å™¨å‚æ•°ï¼ˆç”¨äºä¾èµ–æ³¨å…¥ï¼‰</td>
</tr>
<tr>
<td><a target="_blank" rel="noopener" href="https://docs.spring.io/spring-framework/docs/current/reference/html/core.html#beans-factory-collaborators">Properties</a></td>
<td>Bean å±æ€§è®¾ç½®ï¼ˆç”¨äºä¾èµ–æ³¨å…¥ï¼‰</td>
</tr>
<tr>
<td><a target="_blank" rel="noopener" href="https://docs.spring.io/spring-framework/docs/current/reference/html/core.html#beans-factory-autowire">Autowiring mode</a></td>
<td>Bean è‡ªåŠ¨ç»‘å®šæ¨¡å¼ï¼ˆå¦‚ï¼šé€šè¿‡åç§° byNameï¼‰</td>
</tr>
<tr>
<td><a target="_blank" rel="noopener" href="https://docs.spring.io/spring-framework/docs/current/reference/html/core.html#beans-factory-lazy-init">Lazy initialization mode</a></td>
<td>Bean å»¶è¿Ÿåˆå§‹åŒ–æ¨¡å¼ï¼ˆå»¶è¿Ÿå’Œéå»¶è¿Ÿï¼‰</td>
</tr>
<tr>
<td><a target="_blank" rel="noopener" href="https://docs.spring.io/spring-framework/docs/current/reference/html/core.html#beans-factory-lifecycle-initializingbean">Initialization method</a></td>
<td>Bean åˆå§‹åŒ–å›è°ƒæ–¹æ³•åç§°</td>
</tr>
<tr>
<td><a target="_blank" rel="noopener" href="https://docs.spring.io/spring-framework/docs/current/reference/html/core.html#beans-factory-lifecycle-disposablebean">Destruction method</a></td>
<td>Bean é”€æ¯å›è°ƒæ–¹æ³•åç§°</td>
</tr>
</tbody></table>
<h4 id="BeanDefinition-æ„å»º"><a href="#BeanDefinition-æ„å»º" class="headerlink" title="BeanDefinition æ„å»º"></a>BeanDefinition æ„å»º</h4><p>BeanDefinition æ„å»ºæ–¹å¼ï¼š</p>
<ul>
<li><p>é€šè¿‡ <code>BeanDefinitionBuilder</code></p>
</li>
<li><p>é€šè¿‡ <code>AbstractBeanDefinition</code> ä»¥åŠæ´¾ç”Ÿç±»</p>
</li>
</ul>
<blockquote>
<p>ğŸ’» Spring Bean å®šä¹‰ç¤ºä¾‹æºç ï¼š<a target="_blank" rel="noopener" href="https://github.com/dunwu/spring-tutorial/blob/master/codes/core/spring-core-ioc/src/test/java/io/github/dunwu/spring/core/bean/BeanDefinitionTests.java">BeanDefinitionTests</a></p>
</blockquote>
<h3 id="Spring-Bean-å‘½å"><a href="#Spring-Bean-å‘½å" class="headerlink" title="Spring Bean å‘½å"></a>Spring Bean å‘½å</h3><h4 id="Spring-Bean-å‘½åè§„åˆ™"><a href="#Spring-Bean-å‘½åè§„åˆ™" class="headerlink" title="Spring Bean å‘½åè§„åˆ™"></a>Spring Bean å‘½åè§„åˆ™</h4><p>æ¯ä¸ª Bean æ‹¥æœ‰ä¸€ä¸ªæˆ–å¤šä¸ªæ ‡è¯†ç¬¦ï¼ˆidentifiersï¼‰ï¼Œè¿™äº›æ ‡è¯†ç¬¦åœ¨ Bean æ‰€åœ¨çš„å®¹å™¨å¿…é¡»æ˜¯å”¯ä¸€çš„ã€‚é€šå¸¸ï¼Œä¸€ä¸ª Bean ä»…æœ‰ä¸€ä¸ªæ ‡è¯†ç¬¦ï¼Œå¦‚æœéœ€è¦é¢å¤–çš„ï¼Œå¯è€ƒè™‘ä½¿ç”¨åˆ«åï¼ˆAliasï¼‰æ¥æ‰©å……ã€‚</p>
<p>åœ¨åŸºäº XML çš„é…ç½®å…ƒä¿¡æ¯ä¸­ï¼Œå¼€å‘äººå‘˜<strong>å¯ä»¥ä½¿ç”¨ <code>id</code> å±æ€§ã€<code>name</code> å±æ€§æˆ–æ¥æŒ‡å®š Bean æ ‡è¯†ç¬¦</strong>ã€‚é€šå¸¸ï¼ŒBean çš„æ ‡è¯†ç¬¦ç”±å­—æ¯ç»„æˆï¼Œå…è®¸å‡ºç°ç‰¹æ®Šå­—ç¬¦ã€‚å¦‚æœè¦æƒ³å¼•å…¥ Bean çš„åˆ«åçš„è¯ï¼Œå¯åœ¨ <code>name</code> å±æ€§ä½¿ç”¨åŠè§’é€—å·ï¼ˆâ€œ,â€ï¼‰æˆ–åˆ†å·ï¼ˆâ€œ;â€) æ¥é—´éš”ã€‚</p>
<p>Spring ä¸­ï¼Œ<strong>ä¸º Bean æŒ‡å®š <code>id</code> å’Œ <code>name</code> å±æ€§ä¸æ˜¯å¿…é¡»çš„</strong>ã€‚å¦‚æœä¸æŒ‡å®šï¼ŒSpring ä¼šè‡ªåŠ¨ä¸º Bean åˆ†é…ä¸€ä¸ªå”¯ä¸€çš„åç§°ã€‚å°½ç®¡ Bean çš„å‘½åæ²¡æœ‰é™åˆ¶ï¼Œä¸è¿‡<strong>å®˜æ–¹å»ºè®®é‡‡ç”¨é©¼å³°å‘½åæ³•æ¥å‘½å Bean</strong>ã€‚</p>
<h4 id="Spring-Bean-å‘½åç”Ÿæˆå™¨"><a href="#Spring-Bean-å‘½åç”Ÿæˆå™¨" class="headerlink" title="Spring Bean å‘½åç”Ÿæˆå™¨"></a>Spring Bean å‘½åç”Ÿæˆå™¨</h4><p>Spring æä¾›äº†ä¸¤ç§ Spring Bean å‘½åç”Ÿæˆå™¨ï¼š</p>
<ul>
<li><code>DefaultBeanNameGenerator</code>ï¼šé»˜è®¤é€šç”¨ <code>BeanNameGenerator</code> å®ç°ã€‚</li>
<li><code>AnnotationBeanNameGenerator</code>ï¼šåŸºäºæ³¨è§£æ‰«æçš„ <code>BeanNameGenerator</code> å®ç°ã€‚</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">interface</span> <span class="title class_">BeanNameGenerator</span> &#123;</span><br><span class="line">   String <span class="title function_">generateBeanName</span><span class="params">(BeanDefinition definition, BeanDefinitionRegistry registry)</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="Spring-Bean-åˆ«å"><a href="#Spring-Bean-åˆ«å" class="headerlink" title="Spring Bean åˆ«å"></a>Spring Bean åˆ«å</h4><p>Spring æ”¯æŒé€šè¿‡ <code>&lt;alias&gt;</code> å±æ€§ä¸º Bean è®¾ç½®åˆ«åã€‚</p>
<p>Bean åˆ«åï¼ˆAliasï¼‰çš„ä½œç”¨ï¼š</p>
<ul>
<li>å¤ç”¨ç°æœ‰çš„ <code>BeanDefinition</code></li>
<li>æ›´å…·æœ‰åœºæ™¯åŒ–çš„å‘½åæ–¹æ³•ï¼Œæ¯”å¦‚ï¼š<ul>
<li><code>&lt;alias name=&quot;myApp-dataSource&quot; alias=&quot;subsystemA-dataSource&quot;/&gt;</code></li>
<li><code>&lt;alias name=&quot;myApp-dataSource&quot; alias=&quot;subsystemB-dataSource&quot;/&gt;</code></li>
</ul>
</li>
</ul>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;user&quot;</span> <span class="attr">class</span>=<span class="string">&quot;io.github.dunwu.spring.core.bean.entity.person.User&quot;</span>&gt;</span></span><br><span class="line">  <span class="comment">&lt;!-- å±æ€§ç•¥ --&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">alias</span> <span class="attr">name</span>=<span class="string">&quot;user&quot;</span> <span class="attr">alias</span>=<span class="string">&quot;aliasUser&quot;</span> /&gt;</span></span><br></pre></td></tr></table></figure>

<h2 id="Spring-Bean-ç”Ÿå‘½å‘¨æœŸ"><a href="#Spring-Bean-ç”Ÿå‘½å‘¨æœŸ" class="headerlink" title="Spring Bean ç”Ÿå‘½å‘¨æœŸ"></a>Spring Bean ç”Ÿå‘½å‘¨æœŸ</h2><p><img src="https://raw.githubusercontent.com/dunwu/images/dev/snap/20211201102734.png"></p>
<ol>
<li><p>Spring å¯¹ Bean è¿›è¡Œå®ä¾‹åŒ–ï¼ˆç›¸å½“äº new XXX()ï¼‰</p>
</li>
<li><p>Spring å°†å€¼å’Œå¼•ç”¨æ³¨å…¥åˆ° Bean å¯¹åº”çš„å±æ€§ä¸­</p>
</li>
<li><p>å¦‚æœ Bean å®ç°äº† <code>BeanNameAware</code> æ¥å£ï¼ŒSpring å°† Bean çš„ ID ä¼ é€’ç»™ <code>setBeanName</code> æ–¹æ³•</p>
<ul>
<li>ä½œç”¨æ˜¯é€šè¿‡ Bean çš„å¼•ç”¨æ¥è·å¾— Bean IDï¼Œä¸€èˆ¬ä¸šåŠ¡ä¸­æ˜¯å¾ˆå°‘æœ‰ç”¨åˆ° Bean çš„ ID çš„</li>
</ul>
</li>
<li><p>å¦‚æœ Bean å®ç°äº† <code>BeanFactoryAware</code> æ¥å£ï¼ŒSpring å°†è°ƒç”¨ <code>setBeanDactory</code> æ–¹æ³•ï¼Œå¹¶æŠŠ <code>BeanFactory</code> å®¹å™¨å®ä¾‹ä½œä¸ºå‚æ•°ä¼ å…¥ã€‚</p>
<ul>
<li>ä½œç”¨æ˜¯è·å– Spring å®¹å™¨ï¼Œå¦‚ Bean é€šè¿‡ Spring å®¹å™¨å‘å¸ƒäº‹ä»¶ç­‰</li>
</ul>
</li>
<li><p>å¦‚æœ Bean å®ç°äº† <code>ApplicationContextAware</code> æ¥å£ï¼ŒSpring å®¹å™¨å°†è°ƒç”¨ <code>setApplicationContext</code> æ–¹æ³•ï¼ŒæŠŠåº”ç”¨ä¸Šä¸‹æ–‡ä½œä¸ºå‚æ•°ä¼ å…¥</p>
<ul>
<li>ä½œç”¨ä¸ <code>BeanFactory</code> ç±»ä¼¼éƒ½æ˜¯ä¸ºäº†è·å– Spring å®¹å™¨ï¼Œä¸åŒçš„æ˜¯ Spring å®¹å™¨åœ¨è°ƒç”¨ <code>setApplicationContext</code> æ–¹æ³•æ—¶ä¼šæŠŠå®ƒè‡ªå·±ä½œä¸º <code>setApplicationContext</code> çš„å‚æ•°ä¼ å…¥ï¼Œè€Œ Spring å®¹å™¨åœ¨è°ƒç”¨ <code>setBeanFactory</code> å‰éœ€è¦ä½¿ç”¨è€…è‡ªå·±æŒ‡å®šï¼ˆæ³¨å…¥ï¼‰<code>setBeanFactory</code> é‡Œçš„å‚æ•° <code>BeanFactory</code></li>
</ul>
</li>
<li><p>å¦‚æœ Bean å®ç°äº† <code>BeanPostProcess</code> æ¥å£ï¼ŒSpring å°†è°ƒç”¨ <code>postProcessBeforeInitialization</code> æ–¹æ³•</p>
<ul>
<li>ä½œç”¨æ˜¯åœ¨ Bean å®ä¾‹åˆ›å»ºæˆåŠŸåå¯¹å…¶è¿›è¡Œå¢å¼ºå¤„ç†ï¼Œå¦‚å¯¹ Bean è¿›è¡Œä¿®æ”¹ï¼Œå¢åŠ æŸä¸ªåŠŸèƒ½</li>
</ul>
</li>
<li><p>å¦‚æœ Bean å®ç°äº† <code>InitializingBean</code> æ¥å£ï¼ŒSpring å°†è°ƒç”¨ <code>afterPropertiesSet</code> æ–¹æ³•ï¼Œä½œç”¨ä¸åœ¨é…ç½®æ–‡ä»¶ä¸­å¯¹ Bean ä½¿ç”¨ <code>init-method</code> å£°æ˜åˆå§‹åŒ–çš„ä½œç”¨ä¸€æ ·ï¼Œéƒ½æ˜¯åœ¨ Bean çš„å…¨éƒ¨å±æ€§è®¾ç½®æˆåŠŸåæ‰§è¡Œçš„åˆå§‹åŒ–æ–¹æ³•ã€‚</p>
</li>
<li><p>å¦‚æœ Bean å®ç°äº† <code>BeanPostProcess</code> æ¥å£ï¼ŒSpring å°†è°ƒç”¨ <code>postProcessAfterInitialization</code> æ–¹æ³•</p>
<ul>
<li><code>postProcessBeforeInitialization</code> æ˜¯åœ¨ Bean åˆå§‹åŒ–å‰æ‰§è¡Œçš„ï¼Œè€Œ <code>postProcessAfterInitialization</code> æ˜¯åœ¨ Bean åˆå§‹åŒ–åæ‰§è¡Œçš„</li>
</ul>
</li>
<li><p>ç»è¿‡ä»¥ä¸Šçš„å·¥ä½œåï¼ŒBean å°†ä¸€ç›´é©»ç•™åœ¨åº”ç”¨ä¸Šä¸‹æ–‡ä¸­ç»™åº”ç”¨ä½¿ç”¨ï¼Œç›´åˆ°åº”ç”¨ä¸Šä¸‹æ–‡è¢«é”€æ¯</p>
</li>
<li><p>å¦‚æœ Bean å®ç°äº† <code>DispostbleBean</code> æ¥å£ï¼ŒSpring å°†è°ƒç”¨å®ƒçš„ <code>destory</code> æ–¹æ³•ï¼Œä½œç”¨ä¸åœ¨é…ç½®æ–‡ä»¶ä¸­å¯¹ Bean ä½¿ç”¨ <code>destory-method</code> å±æ€§çš„ä½œç”¨ä¸€æ ·ï¼Œéƒ½æ˜¯åœ¨ Bean å®ä¾‹é”€æ¯å‰æ‰§è¡Œçš„æ–¹æ³•ã€‚</p>
</li>
</ol>
<h2 id="Spring-Bean-æ³¨å†Œ"><a href="#Spring-Bean-æ³¨å†Œ" class="headerlink" title="Spring Bean æ³¨å†Œ"></a>Spring Bean æ³¨å†Œ</h2><p>æ³¨å†Œ Spring Bean å®é™…ä¸Šæ˜¯å°† <code>BeanDefinition</code> æ³¨å†Œåˆ° IoC å®¹å™¨ä¸­ã€‚</p>
<h3 id="XML-é…ç½®å…ƒä¿¡æ¯"><a href="#XML-é…ç½®å…ƒä¿¡æ¯" class="headerlink" title="XML é…ç½®å…ƒä¿¡æ¯"></a>XML é…ç½®å…ƒä¿¡æ¯</h3><p>Spring çš„ä¼ ç»Ÿé…ç½®æ–¹å¼ã€‚åœ¨ <code>&lt;bean&gt;</code> æ ‡ç­¾ä¸­é…ç½®å…ƒæ•°æ®å†…å®¹ã€‚</p>
<p>ç¼ºç‚¹æ˜¯å½“ JavaBean è¿‡å¤šæ—¶ï¼Œäº§ç”Ÿçš„é…ç½®æ–‡ä»¶è¶³ä»¥è®©ä½ çœ¼èŠ±ç¼­ä¹±ã€‚</p>
<h3 id="æ³¨è§£é…ç½®å…ƒä¿¡æ¯"><a href="#æ³¨è§£é…ç½®å…ƒä¿¡æ¯" class="headerlink" title="æ³¨è§£é…ç½®å…ƒä¿¡æ¯"></a>æ³¨è§£é…ç½®å…ƒä¿¡æ¯</h3><p>ä½¿ç”¨ <code>@Bean</code>ã€<code>@Component</code>ã€<code>@Import</code> æ³¨è§£æ³¨å†Œ Spring Beanã€‚</p>
<h3 id="Java-API-é…ç½®å…ƒä¿¡æ¯"><a href="#Java-API-é…ç½®å…ƒä¿¡æ¯" class="headerlink" title="Java API é…ç½®å…ƒä¿¡æ¯"></a>Java API é…ç½®å…ƒä¿¡æ¯</h3><ul>
<li>å‘½åæ–¹å¼ï¼š<code>BeanDefinitionRegistry#registerBeanDefinition(String,BeanDefinition)</code></li>
<li>éå‘½åæ–¹å¼ï¼š<code>BeanDefinitionReaderUtils#registerWithGeneratedName(AbstractBeanDefinition,BeanDefinitionRegistry)</code></li>
<li>é…ç½®ç±»æ–¹å¼ï¼š<code>AnnotatedBeanDefinitionReader#register(Class...)</code></li>
</ul>
<blockquote>
<p>ğŸ’» Spring Bean æ³¨å†Œç¤ºä¾‹æºç ï¼š<a target="_blank" rel="noopener" href="https://github.com/dunwu/spring-tutorial/blob/master/codes/core/spring-core-ioc/src/test/java/io/github/dunwu/spring/core/bean/BeanRegistryTests.java">BeanRegistryTests</a></p>
</blockquote>
<h2 id="Spring-Bean-å®ä¾‹åŒ–"><a href="#Spring-Bean-å®ä¾‹åŒ–" class="headerlink" title="Spring Bean å®ä¾‹åŒ–"></a>Spring Bean å®ä¾‹åŒ–</h2><p>Spring Bean å®ä¾‹åŒ–æ–¹å¼ï¼š</p>
<ul>
<li>å¸¸è§„æ–¹å¼<ul>
<li>é€šè¿‡æ„é€ å™¨ï¼ˆé…ç½®å…ƒä¿¡æ¯ï¼šXMLã€Java æ³¨è§£å’Œ Java APIï¼‰</li>
<li>é€šè¿‡é™æ€æ–¹æ³•ï¼ˆé…ç½®å…ƒä¿¡æ¯ï¼šXMLã€Java æ³¨è§£å’Œ Java APIï¼‰</li>
<li>é€šè¿‡ Bean å·¥å‚æ–¹æ³•ï¼ˆé…ç½®å…ƒä¿¡æ¯ï¼šXMLã€Java æ³¨è§£å’Œ Java APIï¼‰</li>
<li>é€šè¿‡ <code>FactoryBean</code>ï¼ˆé…ç½®å…ƒä¿¡æ¯ï¼šXMLã€Java æ³¨è§£å’Œ Java APIï¼‰</li>
</ul>
</li>
<li>ç‰¹æ®Šæ–¹å¼<ul>
<li>é€šè¿‡ <code>ServiceLoaderFactoryBean</code>ï¼ˆé…ç½®å…ƒä¿¡æ¯ï¼šXMLã€Java æ³¨è§£å’Œ Java API ï¼‰</li>
<li>é€šè¿‡ <code>AutowireCapableBeanFactory#createBean(java.lang.Class, int, boolean)</code></li>
<li>é€šè¿‡ <code>BeanDefinitionRegistry#registerBeanDefinition(String,BeanDefinition)</code></li>
</ul>
</li>
</ul>
<blockquote>
<p>ğŸ’» Spring Bean å®ä¾‹åŒ–ç¤ºä¾‹æºç ï¼š<a target="_blank" rel="noopener" href="https://github.com/dunwu/spring-tutorial/blob/master/codes/core/spring-core-ioc/src/test/java/io/github/dunwu/spring/core/bean/BeanInstantiationTests.java">BeanInstantiationTests</a>ã€<a target="_blank" rel="noopener" href="https://github.com/dunwu/spring-tutorial/blob/master/codes/core/spring-core-ioc/src/test/java/io/github/dunwu/spring/core/bean/BeanInstantiationSpecialTests.java">BeanInstantiationSpecialTests</a></p>
</blockquote>
<h2 id="Spring-Bean-åˆå§‹åŒ–å’Œé”€æ¯"><a href="#Spring-Bean-åˆå§‹åŒ–å’Œé”€æ¯" class="headerlink" title="Spring Bean åˆå§‹åŒ–å’Œé”€æ¯"></a>Spring Bean åˆå§‹åŒ–å’Œé”€æ¯</h2><p>Spring Bean åˆå§‹åŒ–å’Œé”€æ¯çš„æ–¹å¼æœ‰ä»¥ä¸‹å‡ ç§ï¼š</p>
<ol>
<li><p>ä½¿ç”¨ <code>@PostConstruct</code> å’Œ <code>@PreDestroy</code> æ³¨è§£åˆ†åˆ«æŒ‡å®šç›¸åº”çš„åˆå§‹åŒ–æ–¹æ³•å’Œé”€æ¯æ–¹æ³•ã€‚</p>
</li>
<li><p>å®ç° <code>InitializingBean</code> æ¥å£çš„ <code>afterPropertiesSet()</code> æ–¹æ³•æ¥ç¼–å†™åˆå§‹åŒ–æ–¹æ³•ï¼›å®ç° <code>DisposableBean</code> æ¥å£çš„ <code>destroy()</code> æ–¹æ³•æ¥ç¼–å†™é”€æ¯æ–¹æ³•ã€‚</p>
<ul>
<li><code>InitializingBean</code> æ¥å£åŒ…å«ä¸€ä¸ª <code>afterPropertiesSet</code> æ–¹æ³•ï¼Œå¯ä»¥é€šè¿‡å®ç°è¯¥æ¥å£ï¼Œç„¶ååœ¨è¿™ä¸ªæ–¹æ³•ä¸­ç¼–å†™åˆå§‹åŒ–é€»è¾‘ã€‚</li>
<li><code>DisposableBean</code>æ¥å£åŒ…å«ä¸€ä¸ª <code>destory</code> æ–¹æ³•ï¼Œå¯ä»¥é€šè¿‡å®ç°è¯¥æ¥å£ï¼Œç„¶ååœ¨è¿™ä¸ªæ–¹æ³•ä¸­ç¼–å†™é”€æ¯é€»è¾‘ã€‚</li>
</ul>
</li>
<li><p>è‡ªå®šä¹‰åˆå§‹åŒ–æ–¹æ³•</p>
<ul>
<li>XML é…ç½®ï¼š<code>&lt;bean init-method=&quot;init&quot; destroy=&quot;destroy&quot; ... /&gt;</code></li>
<li>Java æ³¨è§£ï¼š<code>@Bean(initMethod = &quot;init&quot;, destroyMethod = &quot;destroy&quot;)</code></li>
<li>Java APIï¼š<code>AbstractBeanDefinition#setInitMethodName(String)</code> å’Œ <code>AbstractBeanDefinition#setDestroyMethodName(String)</code> åˆ†åˆ«å®šä¹‰åˆå§‹åŒ–å’Œé”€æ¯æ–¹æ³•</li>
</ul>
</li>
</ol>
<p>æ³¨æ„ï¼šå¦‚æœåŒæ—¶å­˜åœ¨ï¼Œæ‰§è¡Œé¡ºåºä¼šæŒ‰ç…§åºåˆ—æ‰§è¡Œã€‚</p>
<p>Bean çš„å»¶è¿Ÿåˆå§‹åŒ–</p>
<ul>
<li>xml æ–¹å¼ï¼š<code>&lt;bean lazy-init=&quot;true&quot; ... /&gt;</code></li>
<li>æ³¨è§£æ–¹å¼ï¼š<code>@Lazy</code></li>
</ul>
<p>Spring æä¾›äº†ä¸€ä¸ª <code>BeanPostProcessor</code> æ¥å£ï¼Œæä¾›äº†ä¸¤ä¸ªæ–¹æ³• <code>postProcessBeforeInitialization</code> å’Œ <code>postProcessAfterInitialization</code>ã€‚å…¶ä¸­<code>postProcessBeforeInitialization</code> åœ¨ç»„ä»¶çš„åˆå§‹åŒ–æ–¹æ³•è°ƒç”¨ä¹‹å‰æ‰§è¡Œï¼Œ<code>postProcessAfterInitialization</code> åœ¨ç»„ä»¶çš„åˆå§‹åŒ–æ–¹æ³•è°ƒç”¨ä¹‹åæ‰§è¡Œã€‚å®ƒä»¬éƒ½åŒ…å«ä¸¤ä¸ªå…¥å‚ï¼š</p>
<ul>
<li><code>bean</code>ï¼šå½“å‰ç»„ä»¶å¯¹è±¡ï¼›</li>
<li><code>beanName</code>ï¼šå½“å‰ç»„ä»¶åœ¨å®¹å™¨ä¸­çš„åç§°ã€‚</li>
</ul>
<blockquote>
<p>ğŸ’» Spring Bean åˆå§‹åŒ–å’Œé”€æ¯ç¤ºä¾‹æºç ï¼š<a target="_blank" rel="noopener" href="https://github.com/dunwu/spring-tutorial/blob/master/codes/core/spring-core-ioc/src/test/java/io/github/dunwu/spring/core/bean/BeanInitDestroyTests.java">BeanInitDestroyTests</a></p>
</blockquote>
<h2 id="Spring-Bean-åƒåœ¾å›æ”¶"><a href="#Spring-Bean-åƒåœ¾å›æ”¶" class="headerlink" title="Spring Bean åƒåœ¾å›æ”¶"></a>Spring Bean åƒåœ¾å›æ”¶</h2><p>Spring Bean åƒåœ¾å›æ”¶æ­¥éª¤ï¼š</p>
<ol>
<li>å…³é—­ Spring å®¹å™¨ï¼ˆåº”ç”¨ä¸Šä¸‹æ–‡ï¼‰</li>
<li>æ‰§è¡Œ GC</li>
<li>Spring Bean è¦†ç›–çš„ <code>finalize()</code> æ–¹æ³•è¢«å›è°ƒ</li>
</ol>
<h2 id="Spring-Bean-ä½œç”¨èŒƒå›´"><a href="#Spring-Bean-ä½œç”¨èŒƒå›´" class="headerlink" title="Spring Bean ä½œç”¨èŒƒå›´"></a>Spring Bean ä½œç”¨èŒƒå›´</h2><table>
<thead>
<tr>
<th align="left">Scope</th>
<th align="left">Description</th>
</tr>
</thead>
<tbody><tr>
<td align="left"><a target="_blank" rel="noopener" href="https://docs.spring.io/spring-framework/docs/current/reference/html/core.html#beans-factory-scopes-singleton">singleton</a></td>
<td align="left">(Default) Scopes a single bean definition to a single object instance for each Spring IoC container.</td>
</tr>
<tr>
<td align="left"><a target="_blank" rel="noopener" href="https://docs.spring.io/spring-framework/docs/current/reference/html/core.html#beans-factory-scopes-prototype">prototype</a></td>
<td align="left">Scopes a single bean definition to any number of object instances.</td>
</tr>
<tr>
<td align="left"><a target="_blank" rel="noopener" href="https://docs.spring.io/spring-framework/docs/current/reference/html/core.html#beans-factory-scopes-request">request</a></td>
<td align="left">Scopes a single bean definition to the lifecycle of a single HTTP request. That is, each HTTP request has its own instance of a bean created off the back of a single bean definition. Only valid in the context of a web-aware Spring <code>ApplicationContext</code>.</td>
</tr>
<tr>
<td align="left"><a target="_blank" rel="noopener" href="https://docs.spring.io/spring-framework/docs/current/reference/html/core.html#beans-factory-scopes-session">session</a></td>
<td align="left">Scopes a single bean definition to the lifecycle of an HTTP <code>Session</code>. Only valid in the context of a web-aware Spring <code>ApplicationContext</code>.</td>
</tr>
<tr>
<td align="left"><a target="_blank" rel="noopener" href="https://docs.spring.io/spring-framework/docs/current/reference/html/core.html#beans-factory-scopes-application">application</a></td>
<td align="left">Scopes a single bean definition to the lifecycle of a <code>ServletContext</code>. Only valid in the context of a web-aware Spring <code>ApplicationContext</code>.</td>
</tr>
<tr>
<td align="left"><a target="_blank" rel="noopener" href="https://docs.spring.io/spring-framework/docs/current/reference/html/web.html#websocket-stomp-websocket-scope">websocket</a></td>
<td align="left">Scopes a single bean definition to the lifecycle of a <code>WebSocket</code>. Only valid in the context of a web-aware Spring <code>ApplicationContext</code>.</td>
</tr>
</tbody></table>
<h2 id="å‚è€ƒèµ„æ–™"><a href="#å‚è€ƒèµ„æ–™" class="headerlink" title="å‚è€ƒèµ„æ–™"></a>å‚è€ƒèµ„æ–™</h2><ul>
<li><a target="_blank" rel="noopener" href="https://docs.spring.io/spring-framework/docs/current/spring-framework-reference/core.html#beans">Spring å®˜æ–¹æ–‡æ¡£ä¹‹ Core Technologies</a></li>
<li><a target="_blank" rel="noopener" href="https://time.geekbang.org/course/intro/265">ã€Šå°é©¬å“¥è®² Spring æ ¸å¿ƒç¼–ç¨‹æ€æƒ³ã€‹</a></li>
</ul>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="https://dunwu.github.io/blog/pages/950e4d/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/blog/uploads/avatar.gif">
      <meta itemprop="name" content="é’æ‚Ÿ â—¾ Dunwu">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Dunwu Blog">
      <meta itemprop="description" content="é’æ‚Ÿçš„ä¸ªäººåšå®¢">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="undefined | Dunwu Blog">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/blog/pages/950e4d/" class="post-title-link" itemprop="url">SpringBoot ä¹‹å¿«é€Ÿå…¥é—¨</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">å‘è¡¨äº</span>

      <time title="åˆ›å»ºæ—¶é—´ï¼š2021-12-10 18:22:26" itemprop="dateCreated datePublished" datetime="2021-12-10T18:22:26+08:00">2021-12-10</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar-check"></i>
      </span>
      <span class="post-meta-item-text">æ›´æ–°äº</span>
      <time title="ä¿®æ”¹æ—¶é—´ï¼š2022-12-23 12:01:44" itemprop="dateModified" datetime="2022-12-23T12:01:44+08:00">2022-12-23</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">åˆ†ç±»äº</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/blog/categories/Java/" itemprop="url" rel="index"><span itemprop="name">Java</span></a>
        </span>
          ï¼Œ
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/blog/categories/Java/%E6%A1%86%E6%9E%B6/" itemprop="url" rel="index"><span itemprop="name">æ¡†æ¶</span></a>
        </span>
          ï¼Œ
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/blog/categories/Java/%E6%A1%86%E6%9E%B6/Spring/" itemprop="url" rel="index"><span itemprop="name">Spring</span></a>
        </span>
          ï¼Œ
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/blog/categories/Java/%E6%A1%86%E6%9E%B6/Spring/Spring%E6%A0%B8%E5%BF%83/" itemprop="url" rel="index"><span itemprop="name">Springæ ¸å¿ƒ</span></a>
        </span>
    </span>

  
    <span class="post-meta-break"></span>
    <span class="post-meta-item" title="æœ¬æ–‡å­—æ•°">
      <span class="post-meta-item-icon">
        <i class="far fa-file-word"></i>
      </span>
      <span class="post-meta-item-text">æœ¬æ–‡å­—æ•°ï¼š</span>
      <span>8.8k</span>
    </span>
    <span class="post-meta-item" title="é˜…è¯»æ—¶é•¿">
      <span class="post-meta-item-icon">
        <i class="far fa-clock"></i>
      </span>
      <span class="post-meta-item-text">é˜…è¯»æ—¶é•¿ &asymp;</span>
      <span>8 åˆ†é’Ÿ</span>
    </span>
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <h1 id="SpringBoot-ä¹‹å¿«é€Ÿå…¥é—¨"><a href="#SpringBoot-ä¹‹å¿«é€Ÿå…¥é—¨" class="headerlink" title="SpringBoot ä¹‹å¿«é€Ÿå…¥é—¨"></a>SpringBoot ä¹‹å¿«é€Ÿå…¥é—¨</h1><h2 id="Spring-Boot-ç®€ä»‹"><a href="#Spring-Boot-ç®€ä»‹" class="headerlink" title="Spring Boot ç®€ä»‹"></a>Spring Boot ç®€ä»‹</h2><p>Spring Boot å¯ä»¥è®©ä½¿ç”¨è€…éå¸¸æ–¹ä¾¿çš„åˆ›å»º Spring åº”ç”¨ã€‚</p>
<p>Spring Boot çš„ç›®æ ‡æ˜¯ï¼š</p>
<ul>
<li>ä¸ºæ‰€æœ‰ Spring å¼€å‘è€…æä¾›æ›´å¿«ä¸”å¯å¹¿æ³›è®¿é—®çš„å…¥é—¨ä½“éªŒã€‚</li>
<li>å¼€ç®±å³ç”¨</li>
<li>æä¾›ä¸€ç³»åˆ—é€šç”¨çš„éåŠŸèƒ½ç‰¹æ€§ï¼ˆä¾‹å¦‚åµŒå…¥å¼æœåŠ¡ã€å®‰å…¨ã€æŒ‡æ ‡ã€å¥åº·æ£€æŸ¥å’Œå¤–éƒ¨åŒ–é…ç½®ï¼‰</li>
<li>å®Œå…¨ä¸éœ€è¦ä»£ç ç”Ÿæˆï¼Œä¹Ÿä¸éœ€è¦ XML é…ç½®ã€‚</li>
</ul>
<h2 id="Spring-Boot-ç³»ç»Ÿè¦æ±‚"><a href="#Spring-Boot-ç³»ç»Ÿè¦æ±‚" class="headerlink" title="Spring Boot ç³»ç»Ÿè¦æ±‚"></a>Spring Boot ç³»ç»Ÿè¦æ±‚</h2><p>Spring Boot çš„æ„å»ºå·¥å…·è¦æ±‚ï¼š</p>
<table>
<thead>
<tr>
<th align="left">Build Tool</th>
<th align="left">Version</th>
</tr>
</thead>
<tbody><tr>
<td align="left">Maven</td>
<td align="left">3.5+</td>
</tr>
<tr>
<td align="left">Gradle</td>
<td align="left">6.8.x, 6.9.x, and 7.x</td>
</tr>
</tbody></table>
<p>Spring Boot æ”¯æŒçš„ Servlet å®¹å™¨ï¼š</p>
<table>
<thead>
<tr>
<th align="left">Name</th>
<th align="left">Servlet Version</th>
</tr>
</thead>
<tbody><tr>
<td align="left">Tomcat 9.0</td>
<td align="left">4.0</td>
</tr>
<tr>
<td align="left">Jetty 9.4</td>
<td align="left">3.1</td>
</tr>
<tr>
<td align="left">Jetty 10.0</td>
<td align="left">4.0</td>
</tr>
<tr>
<td align="left">Undertow 2.0</td>
<td align="left">4.0</td>
</tr>
</tbody></table>
<h2 id="éƒ¨ç½²ç¬¬ä¸€ä¸ª-Spring-Boot-é¡¹ç›®"><a href="#éƒ¨ç½²ç¬¬ä¸€ä¸ª-Spring-Boot-é¡¹ç›®" class="headerlink" title="éƒ¨ç½²ç¬¬ä¸€ä¸ª Spring Boot é¡¹ç›®"></a>éƒ¨ç½²ç¬¬ä¸€ä¸ª Spring Boot é¡¹ç›®</h2><blockquote>
<p>æœ¬èŠ‚ä»‹ç»å¦‚ä½•å¼€å‘ä¸€ä¸ªå°çš„â€œHello World!â€ web åº”ç”¨ç¤ºä¾‹ï¼Œæ¥å±•ç¤º Spring Boot çš„ä¸€äº›å…³é”®åŠŸèƒ½ã€‚æˆ‘ä»¬ä½¿ç”¨ Maven æ¥æ„å»ºè¿™ä¸ªé¡¹ç›®ï¼Œå› ä¸ºå¤§å¤šæ•° IDE éƒ½æ”¯æŒå®ƒã€‚</p>
</blockquote>
<h3 id="ç¯å¢ƒæ£€æŸ¥"><a href="#ç¯å¢ƒæ£€æŸ¥" class="headerlink" title="ç¯å¢ƒæ£€æŸ¥"></a>ç¯å¢ƒæ£€æŸ¥</h3><p>Spring Boot é¡¹ç›®ä¾èµ–äº Java ç¯å¢ƒå’Œ Maveï¼Œå¼€å§‹é¡¹ç›®ä¹‹å‰éœ€è¦å…ˆæ£€æŸ¥ä¸€ä¸‹ç¯å¢ƒã€‚</p>
<p>æœ¬åœ°æ˜¯å¦å·²å®‰è£… Javaï¼š</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">java -version</span></span><br><span class="line">java version &quot;1.8.0_102&quot;</span><br><span class="line">Java(TM) SE Runtime Environment (build 1.8.0_102-b14)</span><br><span class="line">Java HotSpot(TM) 64-Bit Server VM (build 25.102-b14, mixed mode)</span><br></pre></td></tr></table></figure>

<p>æœ¬åœ°æ˜¯å¦å·²å®‰è£… Mavenï¼š</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">$ mvn -v</span><br><span class="line">Apache Maven <span class="number">3.5</span><span class="number">.4</span> (1edded0938998edf8bf061f1ceb3cfdeccf443fe; <span class="number">2018</span>-<span class="number">06</span>-17T14:<span class="number">33</span>:<span class="number">14</span>-<span class="number">04</span>:<span class="number">00</span>)</span><br><span class="line">Maven home: /usr/local/Cellar/maven/<span class="number">3.3</span><span class="number">.9</span>/libexec</span><br><span class="line">Java version: <span class="number">1.8</span><span class="number">.0_102</span>, vendor: Oracle Corporation</span><br></pre></td></tr></table></figure>

<h3 id="åˆ›å»º-pom"><a href="#åˆ›å»º-pom" class="headerlink" title="åˆ›å»º pom"></a>åˆ›å»º pom</h3><p>æˆ‘ä»¬éœ€è¦ä»åˆ›å»º Maven pom.xml æ–‡ä»¶å¼€å§‹ã€‚ pom.xml æ˜¯ Maven ç”¨äºæ„å»ºé¡¹ç›®çš„é…ç½®æ–‡ä»¶ã€‚</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=<span class="string">&quot;1.0&quot;</span> encoding=<span class="string">&quot;UTF-8&quot;</span>?&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">project</span> <span class="attr">xmlns</span>=<span class="string">&quot;http://maven.apache.org/POM/4.0.0&quot;</span> <span class="attr">xmlns:xsi</span>=<span class="string">&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">xsi:schemaLocation</span>=<span class="string">&quot;http://maven.apache.org/POM/4.0.0 https://maven.apache.org/xsd/maven-4.0.0.xsd&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">modelVersion</span>&gt;</span>4.0.0<span class="tag">&lt;/<span class="name">modelVersion</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.example<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>myproject<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>0.0.1-SNAPSHOT<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">parent</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-starter-parent<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">version</span>&gt;</span>2.6.1<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">parent</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">&lt;!-- Additional lines to be added here... --&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">project</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>ä½¿ç”¨è€…å¯ä»¥é€šè¿‡è¿è¡Œ mvn package æ¥æµ‹è¯•å®ƒ</p>
<h3 id="æ·»åŠ ä¾èµ–"><a href="#æ·»åŠ ä¾èµ–" class="headerlink" title="æ·»åŠ ä¾èµ–"></a>æ·»åŠ ä¾èµ–</h3><p>Spring Boot æä¾›äº†è®¸å¤šå¯åŠ¨å™¨ï¼ˆStartersï¼‰ä»¥åº”å¯¹ä¸åŒçš„ä½¿ç”¨åœºæ™¯ã€‚ä½¿ç”¨è€…å¯å°† jars æ·»åŠ åˆ°ç±»è·¯å¾„ä¸­ã€‚æˆ‘ä»¬çš„ç¤ºä¾‹ç¨‹åºåœ¨ POM çš„ parent ä½¿ç”¨ spring-boot-starter-parentã€‚ spring-boot-starter-parent æ˜¯ä¸€ä¸ªç‰¹æ®Šçš„å¯åŠ¨å™¨ï¼Œæä¾›æœ‰ç”¨çš„ Maven é»˜è®¤å€¼ã€‚å®ƒè¿˜æä¾›äº†ä¸€ä¸ªä¾èµ–é¡¹çš„ç‰ˆæœ¬ç®¡ç†ï¼Œå¯ä»¥è®©ä½¿ç”¨è€…ä½¿ç”¨æ—¶ä¸å¿…æ˜¾ç¤ºæŒ‡å®šç‰ˆæœ¬ã€‚</p>
<p>å…¶ä»–å¯åŠ¨å™¨ï¼ˆStartersï¼‰æä¾›äº†å„ç§é’ˆå¯¹ä¸åŒä½¿ç”¨åœºæ™¯çš„åŠŸèƒ½ã€‚æ¯”å¦‚ï¼Œæˆ‘ä»¬éœ€è¦å¼€å‘ä¸€ä¸ª Web åº”ç”¨ç¨‹åºï¼Œå°±å¯ä»¥æ·»åŠ äº†ä¸€ä¸ª spring-boot-starter-web ä¾èµ–é¡¹ã€‚åœ¨æ­¤ä¹‹å‰ï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡è¿è¡Œä»¥ä¸‹å‘½ä»¤æ¥æŸ¥çœ‹æˆ‘ä»¬å½“å‰æ‹¥æœ‰çš„ maven ä¾èµ–ï¼š</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">mvn dependency:tree</span></span><br><span class="line"></span><br><span class="line">[INFO] com.example:myproject:jar:0.0.1-SNAPSHOT</span><br></pre></td></tr></table></figure>

<p>mvn dependency:tree å‘½ä»¤æ‰“å°é¡¹ç›®ä¾èµ–é¡¹çš„å±‚çº§ç»“æ„ã€‚å¯ä»¥çœ‹åˆ° spring-boot-starter-parent æœ¬èº«æ²¡æœ‰æä¾›ä»»ä½•ä¾èµ–ã€‚è¦æ·»åŠ å¿…è¦çš„ä¾èµ–ï¼Œéœ€è¦ç¼–è¾‘ pom.xml å¹¶åœ¨ <code>&lt;dependencies&gt;</code> éƒ¨åˆ†æ·»åŠ  spring-boot-starter-web ä¾èµ–é¡¹ï¼š</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependencies</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-starter-web<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependencies</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h3 id="ç¼–å†™ä»£ç "><a href="#ç¼–å†™ä»£ç " class="headerlink" title="ç¼–å†™ä»£ç "></a>ç¼–å†™ä»£ç </h3><p>è¦è¿è¡Œåº”ç”¨ç¨‹åºï¼Œæˆ‘ä»¬éœ€è¦åˆ›å»ºä¸€ä¸ªå¯åŠ¨ç±»ã€‚é»˜è®¤æƒ…å†µä¸‹ï¼ŒMaven ä» <code>src/main/java</code> ç¼–è¯‘æºä»£ç ï¼Œå› æ­¤æ‚¨éœ€è¦åˆ›å»ºè¯¥ç›®å½•ç»“æ„ï¼Œç„¶åæ·»åŠ ä¸€ä¸ªåä¸º <code>src/main/java/MyApplication.java</code> çš„æ–‡ä»¶ä»¥åŒ…å«ä»¥ä¸‹ä»£ç ï¼š</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@RestController</span></span><br><span class="line"><span class="meta">@EnableAutoConfiguration</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">MyApplication</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@RequestMapping(&quot;/&quot;)</span></span><br><span class="line">    String <span class="title function_">home</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;Hello World!&quot;</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        SpringApplication.run(MyApplication.class, args);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>è¯´æ˜ï¼š</p>
<p>@RestController æ³¨è§£å‘Šè¯‰ Springï¼Œè¿™ä¸ªç±»æ˜¯ç”¨æ¥å¤„ç† Rest è¯·æ±‚çš„ã€‚</p>
<p><code>@RequestMapping</code> æ³¨è§£æä¾›äº†â€œè·¯ç”±â€ä¿¡æ¯ã€‚å®ƒå‘Šè¯‰ Spring ä»»ä½•å¸¦æœ‰ <code>/</code> è·¯å¾„çš„ HTTP è¯·æ±‚éƒ½åº”è¯¥æ˜ å°„åˆ° <code>home</code> æ–¹æ³•ã€‚ <code>@RestController</code> æ³¨è§£å‘Šè¯‰ Spring å°†ç»“æœå­—ç¬¦ä¸²ç›´æ¥å‘ˆç°ç»™è°ƒç”¨è€…ã€‚</p>
<p><code>@EnableAutoConfiguration</code> æ³¨è§£å‘Šè¯‰ Spring Boot æ ¹æ®ä½ æ·»åŠ çš„ jar ä¾èµ–å»è‡ªåŠ¨è£…é… Springã€‚</p>
<blockquote>
<p>è‡ªåŠ¨é…ç½®æ—¨åœ¨ä¸â€œStartersâ€é…åˆä½¿ç”¨ï¼Œä½†è¿™ä¸¤ä¸ªæ¦‚å¿µå¹¶æ²¡æœ‰ç›´æ¥è”ç³»ã€‚æ‚¨å¯ä»¥è‡ªç”±é€‰æ‹© starters ä¹‹å¤–çš„ jar ä¾èµ–é¡¹ã€‚ Spring Boot ä»ç„¶å°½åŠ›è‡ªåŠ¨é…ç½®æ‚¨çš„åº”ç”¨ç¨‹åºã€‚</p>
</blockquote>
<p>Spring Boot çš„ main æ–¹æ³•é€šè¿‡è°ƒç”¨ run å§”æ‰˜ç»™ Spring Boot çš„ <code>SpringApplication</code> ç±»ã€‚ <code>SpringApplication</code> å¼•å¯¼æˆ‘ä»¬çš„åº”ç”¨ç¨‹åºï¼Œå¯åŠ¨ Springï¼Œè¿›è€Œå¯åŠ¨è‡ªåŠ¨é…ç½®çš„ Tomcat Web æœåŠ¡å™¨ã€‚æˆ‘ä»¬éœ€è¦å°† <code>MyApplication.class</code> ä½œä¸ºå‚æ•°ä¼ é€’ç»™ run æ–¹æ³•ï¼Œä»¥å‘Šè¯‰ <code>SpringApplication</code> å“ªä¸ªæ˜¯å…¥å£ç±»ã€‚è¿˜ä¼ é€’ args æ•°ç»„ä»¥å…¬å¼€ä»»ä½•å‘½ä»¤è¡Œå‚æ•°ã€‚</p>
<h3 id="è¿è¡Œç¤ºä¾‹"><a href="#è¿è¡Œç¤ºä¾‹" class="headerlink" title="è¿è¡Œç¤ºä¾‹"></a>è¿è¡Œç¤ºä¾‹</h3><p>æ­¤æ—¶ï¼Œæ‚¨çš„åº”ç”¨ç¨‹åºåº”è¯¥å¯ä»¥å·¥ä½œäº†ã€‚ç”±äºæ‚¨ä½¿ç”¨äº† spring-boot-starter-parent POMï¼Œå› æ­¤æ‚¨æœ‰ä¸€ä¸ªæœ‰ç”¨çš„è¿è¡Œç›®æ ‡ï¼Œå¯ç”¨äºå¯åŠ¨åº”ç”¨ç¨‹åºã€‚ä»é¡¹ç›®æ ¹ç›®å½•é”®å…¥ mvn spring-boot:run ä»¥å¯åŠ¨åº”ç”¨ç¨‹åºã€‚æ‚¨åº”è¯¥ä¼šçœ‹åˆ°ç±»ä¼¼äºä»¥ä¸‹å†…å®¹çš„è¾“å‡ºï¼š</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">mvn spring-boot:run</span></span><br><span class="line"></span><br><span class="line">  .   ____          _            __ _ _</span><br><span class="line"> /\\ / ___&#x27;_ __ _ _(_)_ __  __ _ \ \ \ \</span><br><span class="line">( ( )\___ | &#x27;_ | &#x27;_| | &#x27;_ \/ _` | \ \ \ \</span><br><span class="line"> \\/  ___)| |_)| | | | | || (_| |  ) ) ) )</span><br><span class="line">  &#x27;  |____| .__|_| |_|_| |_\__, | / / / /</span><br><span class="line"> =========|_|==============|___/=/_/_/_/</span><br><span class="line"> :: Spring Boot ::  (v2.6.1)</span><br><span class="line">....... . . .</span><br><span class="line">....... . . . (log output here)</span><br><span class="line">....... . . .</span><br><span class="line">........ Started MyApplication in 2.222 seconds (JVM running for 6.514)</span><br></pre></td></tr></table></figure>

<p>å¦‚æœæ‚¨æ‰“å¼€ Web æµè§ˆå™¨è®¿é—® localhost:8080ï¼Œæ‚¨åº”è¯¥ä¼šçœ‹åˆ°ä»¥ä¸‹è¾“å‡ºï¼š</p>
<figure class="highlight erlang-repl"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Hello World!</span><br></pre></td></tr></table></figure>

<p>è¦æ­£å¸¸é€€å‡ºåº”ç”¨ç¨‹åºï¼Œè¯·æŒ‰ <code>ctrl-c</code>ã€‚</p>
<h3 id="åˆ›å»ºå¯æ‰§è¡Œ-jar"><a href="#åˆ›å»ºå¯æ‰§è¡Œ-jar" class="headerlink" title="åˆ›å»ºå¯æ‰§è¡Œ jar"></a>åˆ›å»ºå¯æ‰§è¡Œ jar</h3><p>è¦åˆ›å»ºä¸€ä¸ªå¯æ‰§è¡Œçš„ jarï¼Œæˆ‘ä»¬éœ€è¦å°† spring-boot-maven-plugin æ·»åŠ åˆ°æˆ‘ä»¬çš„ pom.xml ä¸­ã€‚ä¸ºæ­¤ï¼Œè¯·åœ¨ä¾èµ–é¡¹éƒ¨åˆ†ä¸‹æ–¹æ’å…¥ä»¥ä¸‹è¡Œï¼š</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">build</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">plugins</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">plugin</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-maven-plugin<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">plugin</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">plugins</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">build</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>ä¿å­˜ pom.xml å¹¶ä»å‘½ä»¤è¡Œè¿è¡Œ mvn packageï¼Œå¦‚ä¸‹æ‰€ç¤ºï¼š</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">mvn package</span></span><br><span class="line"></span><br><span class="line">[INFO] Scanning for projects...</span><br><span class="line">[INFO]</span><br><span class="line">[INFO] ------------------------------------------------------------------------</span><br><span class="line">[INFO] Building myproject 0.0.1-SNAPSHOT</span><br><span class="line">[INFO] ------------------------------------------------------------------------</span><br><span class="line">[INFO] .... ..</span><br><span class="line">[INFO] --- maven-jar-plugin:2.4:jar (default-jar) @ myproject ---</span><br><span class="line">[INFO] Building jar: /Users/developer/example/spring-boot-example/target/myproject-0.0.1-SNAPSHOT.jar</span><br><span class="line">[INFO]</span><br><span class="line">[INFO] --- spring-boot-maven-plugin:2.6.1:repackage (default) @ myproject ---</span><br><span class="line">[INFO] ------------------------------------------------------------------------</span><br><span class="line">[INFO] BUILD SUCCESS</span><br><span class="line">[INFO] ------------------------------------------------------------------------</span><br></pre></td></tr></table></figure>

<p>å¦‚æœæ‚¨æŸ¥çœ‹ target ç›®å½•ï¼Œåº”è¯¥ä¼šçœ‹åˆ° <code>myproject-0.0.1-SNAPSHOT.jar</code>ã€‚è¯¥æ–‡ä»¶çš„å¤§å°åº”çº¦ä¸º 10 MBã€‚å¦‚æœæƒ³çœ‹é‡Œé¢ï¼Œå¯ä»¥ä½¿ç”¨ jar tvfï¼Œå¦‚ä¸‹ï¼š</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">jar tvf target/myproject-0.0.1-SNAPSHOT.jar</span></span><br></pre></td></tr></table></figure>

<p>æ‚¨è¿˜åº”è¯¥åœ¨ç›®æ ‡ç›®å½•ä¸­çœ‹åˆ°ä¸€ä¸ªæ›´å°çš„åä¸º <code>myproject-0.0.1-SNAPSHOT.jar.original</code> çš„æ–‡ä»¶ã€‚è¿™æ˜¯ Maven åœ¨ Spring Boot é‡æ–°æ‰“åŒ…ä¹‹å‰åˆ›å»ºçš„åŸå§‹ jar æ–‡ä»¶ã€‚</p>
<p>è¦è¿è¡Œè¯¥åº”ç”¨ç¨‹åºï¼Œè¯·ä½¿ç”¨ java -jar å‘½ä»¤ï¼Œå¦‚ä¸‹æ‰€ç¤ºï¼š</p>
<figure class="highlight gherkin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">$ java -jar target/myproject-0.0.1-SNAPSHOT.jar</span><br><span class="line"></span><br><span class="line">  .   ____          _            __ _ _</span><br><span class="line"> /\\ / ___&#x27;_ __ _ _(_)_ __  __ _ \ \ \ \</span><br><span class="line">( ( )\___ |<span class="string"> &#x27;_ </span>|<span class="string"> &#x27;_</span>|<span class="string"> </span>|<span class="string"> &#x27;_ \/ _` </span>|<span class="string"> \ \ \ \</span></span><br><span class="line"><span class="string"> \\/  ___)</span>|<span class="string"> </span>|<span class="string">_)</span>|<span class="string"> </span>|<span class="string"> </span>|<span class="string"> </span>|<span class="string"> </span>|<span class="string"> </span>||<span class="string"> (_</span>|<span class="string"> </span>|<span class="string">  ) ) ) )</span></span><br><span class="line"><span class="string">  &#x27;  </span>|<span class="string">____</span>|<span class="string"> .__</span>|<span class="string">_</span>|<span class="string"> </span>|<span class="string">_</span>|<span class="string">_</span>|<span class="string"> </span>|<span class="string">_\__, </span>|<span class="string"> / / / /</span></span><br><span class="line"><span class="string"> =========</span>|<span class="string">_</span>|<span class="string">==============</span>|<span class="string">___/=/_/_/_/</span></span><br><span class="line"><span class="string"> :: Spring Boot ::  (v2.6.1)</span></span><br><span class="line"><span class="string">....... . . .</span></span><br><span class="line"><span class="string">....... . . . (log output here)</span></span><br><span class="line"><span class="string">....... . . .</span></span><br><span class="line"><span class="string">........ Started MyApplication in 2.536 seconds (JVM running for 2.864)</span></span><br></pre></td></tr></table></figure>

<p>å’Œä»¥å‰ä¸€æ ·ï¼Œè¦é€€å‡ºåº”ç”¨ç¨‹åºï¼Œè¯·æŒ‰ <code>ctrl-c</code>ã€‚</p>
<h2 id="é€šè¿‡-SPRING-INITIALIZR-åˆ›å»º-Spring-Boot-é¡¹ç›®"><a href="#é€šè¿‡-SPRING-INITIALIZR-åˆ›å»º-Spring-Boot-é¡¹ç›®" class="headerlink" title="é€šè¿‡ SPRING INITIALIZR åˆ›å»º Spring Boot é¡¹ç›®"></a>é€šè¿‡ SPRING INITIALIZR åˆ›å»º Spring Boot é¡¹ç›®</h2><h3 id="åˆ›å»ºé¡¹ç›®"><a href="#åˆ›å»ºé¡¹ç›®" class="headerlink" title="åˆ›å»ºé¡¹ç›®"></a>åˆ›å»ºé¡¹ç›®</h3><p>é€šè¿‡ <code>SPRING INITIALIZR</code> å·¥å…·äº§ç”ŸåŸºç¡€é¡¹ç›®</p>
<ol>
<li>è®¿é—®ï¼š<code>http://start.spring.io/</code></li>
<li>é€‰æ‹©æ„å»ºå·¥å…·<code>Maven Project</code>ã€Spring Boot ç‰ˆæœ¬ <code>1.5.10</code> ä»¥åŠä¸€äº›å·¥ç¨‹åŸºæœ¬ä¿¡æ¯ï¼Œå¯å‚è€ƒä¸‹å›¾æ‰€ç¤ºï¼š</li>
</ol>
<p><img src="https://raw.githubusercontent.com/dunwu/images/dev/snap/start.spring.io.png" alt="img"></p>
<ol start="3">
<li>ç‚¹å‡»<code>Generate Project</code>ä¸‹è½½é¡¹ç›®å‹ç¼©åŒ…</li>
<li>è§£å‹å‹ç¼©åŒ…ï¼ŒåŒ…ä¸­å·²æ˜¯ä¸€ä¸ªå®Œæ•´çš„é¡¹ç›®ã€‚</li>
</ol>
<p>å¦‚æœä½ ä½¿ç”¨ Intellij ä½œä¸º IDEï¼Œé‚£ä¹ˆä½ å¯ä»¥ç›´æ¥ä½¿ç”¨ SPRING INITIALIZRï¼Œå‚è€ƒä¸‹å›¾æ“ä½œï¼š</p>
<p><img src="https://raw.githubusercontent.com/dunwu/images/dev/snap/intellij-spring-initializr.gif" alt="img"></p>
<h3 id="é¡¹ç›®è¯´æ˜"><a href="#é¡¹ç›®è¯´æ˜" class="headerlink" title="é¡¹ç›®è¯´æ˜"></a>é¡¹ç›®è¯´æ˜</h3><p><strong>é‡è¦æ–‡ä»¶</strong></p>
<ul>
<li><code>src/main/java</code> è·¯å¾„ä¸‹çš„ <code>Chapter1Application</code> ç±» ï¼šç¨‹åºå…¥å£</li>
<li><code>src/main/resources</code> è·¯å¾„ä¸‹çš„ <code>application.properties</code> ï¼šé¡¹ç›®é…ç½®æ–‡ä»¶</li>
<li><code>src/test/java</code> è·¯å¾„ä¸‹çš„ <code>Chapter01ApplicationTests</code> ï¼šç¨‹åºæµ‹è¯•å…¥å£</li>
</ul>
<p><strong>pom.xml</strong></p>
<p>pom ä¸­æŒ‡å®š parent ä¸ºä»¥ä¸‹å†…å®¹ï¼Œè¡¨ç¤ºæ­¤é¡¹ç›®ç»§æ‰¿äº† <code>spring-boot-starter-parent</code> çš„ maven é…ç½®ï¼ˆä¸»è¦æ˜¯æŒ‡å®šäº†å¸¸ç”¨ä¾èµ–ã€æ’ä»¶çš„ç‰ˆæœ¬ï¼‰ã€‚</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">parent</span>&gt;</span></span><br><span class="line"> <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line"> <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-starter-parent<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line"> <span class="tag">&lt;<span class="name">version</span>&gt;</span>1.5.10.RELEASE<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"> <span class="tag">&lt;<span class="name">relativePath</span>/&gt;</span> <span class="comment">&lt;!-- lookup parent from repository --&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">parent</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>æ­¤å¤–ï¼Œpom ä¸­é»˜è®¤å¼•å…¥ä¸¤ä¸ªä¾èµ–åŒ…ï¼Œå’Œä¸€ä¸ªæ’ä»¶ã€‚</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependencies</span>&gt;</span></span><br><span class="line"> <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-starter-web<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line"> <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"></span><br><span class="line"> <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-starter-test<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">scope</span>&gt;</span>test<span class="tag">&lt;/<span class="name">scope</span>&gt;</span></span><br><span class="line"> <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependencies</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">build</span>&gt;</span></span><br><span class="line"> <span class="tag">&lt;<span class="name">plugins</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">plugin</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-maven-plugin<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">plugin</span>&gt;</span></span><br><span class="line"> <span class="tag">&lt;/<span class="name">plugins</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">build</span>&gt;</span></span><br></pre></td></tr></table></figure>

<ul>
<li><code>spring-boot-starter-web</code>ï¼šæ ¸å¿ƒæ¨¡å—ï¼ŒåŒ…æ‹¬è‡ªåŠ¨é…ç½®æ”¯æŒã€æ—¥å¿—å’Œ YAMLã€‚</li>
<li><code>spring-boot-starter-test</code>ï¼šæµ‹è¯•æ¨¡å—ï¼ŒåŒ…æ‹¬ JUnitã€Hamcrestã€Mockitoã€‚</li>
<li><code>spring-boot-maven-plugin</code>ï¼šspring boot æ’ä»¶ï¼Œ æä¾›äº†ä¸€ç³»åˆ— spring boot ç›¸å…³çš„ maven æ“ä½œã€‚<ul>
<li><code>spring-boot:build-info</code>ï¼Œç”Ÿæˆ Actuator ä½¿ç”¨çš„æ„å»ºä¿¡æ¯æ–‡ä»¶ build-info.properties</li>
<li><code>spring-boot:repackage</code>ï¼Œé»˜è®¤ goalã€‚åœ¨ mvn package ä¹‹åï¼Œå†æ¬¡æ‰“åŒ…å¯æ‰§è¡Œçš„ jar&#x2F;warï¼ŒåŒæ—¶ä¿ç•™ mvn package ç”Ÿæˆçš„ jar&#x2F;war ä¸º.origin</li>
<li><code>spring-boot:run</code>ï¼Œè¿è¡Œ Spring Boot åº”ç”¨</li>
<li><code>spring-boot:start</code>ï¼Œåœ¨ mvn integration-test é˜¶æ®µï¼Œè¿›è¡Œ Spring Boot åº”ç”¨ç”Ÿå‘½å‘¨æœŸçš„ç®¡ç†</li>
<li><code>spring-boot:stop</code>ï¼Œåœ¨ mvn integration-test é˜¶æ®µï¼Œè¿›è¡Œ Spring Boot åº”ç”¨ç”Ÿå‘½å‘¨æœŸçš„ç®¡ç†</li>
</ul>
</li>
</ul>
<h3 id="ç¼–å†™-REST-æœåŠ¡"><a href="#ç¼–å†™-REST-æœåŠ¡" class="headerlink" title="ç¼–å†™ REST æœåŠ¡"></a>ç¼–å†™ REST æœåŠ¡</h3><ul>
<li>åˆ›å»º <code>package</code> ï¼Œåä¸º <code>io.github.zp.springboot.chapter1.web</code>ï¼ˆæ ¹æ®é¡¹ç›®æƒ…å†µä¿®æ”¹ï¼‰</li>
<li>åˆ›å»º <code>HelloController</code> ç±»ï¼Œå†…å®¹å¦‚ä¸‹ï¼š</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@RestController</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">HelloController</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@RequestMapping(&quot;/hello&quot;)</span></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">index</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;Hello World&quot;</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ul>
<li>å¯åŠ¨ä¸»ç¨‹åº <code>XXXApplication</code>ï¼Œæ‰“å¼€æµè§ˆå™¨è®¿é—®<code>http://localhost:8080/hello</code> ï¼Œå¯ä»¥çœ‹åˆ°é¡µé¢è¾“å‡º<code>Hello World</code></li>
</ul>
<h3 id="ç¼–å†™å•å…ƒæµ‹è¯•ç”¨ä¾‹"><a href="#ç¼–å†™å•å…ƒæµ‹è¯•ç”¨ä¾‹" class="headerlink" title="ç¼–å†™å•å…ƒæµ‹è¯•ç”¨ä¾‹"></a>ç¼–å†™å•å…ƒæµ‹è¯•ç”¨ä¾‹</h3><p>åœ¨ <code>XXXApplicationTests</code> ç±»ä¸­ç¼–å†™ä¸€ä¸ªç®€å•çš„å•å…ƒæµ‹è¯•æ¥æ¨¡æ‹Ÿ HTTP è¯·æ±‚ï¼Œå…·ä½“å¦‚ä¸‹ï¼š</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@RunWith(SpringJUnit4ClassRunner.class)</span></span><br><span class="line"><span class="meta">@SpringApplicationConfiguration(classes = MockServletContext.class)</span></span><br><span class="line"><span class="meta">@WebAppConfiguration</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">SpringBootHelloWorldApplicationTest</span> &#123;</span><br><span class="line"></span><br><span class="line">	<span class="keyword">private</span> MockMvc mvc;</span><br><span class="line"></span><br><span class="line">	<span class="meta">@Before</span></span><br><span class="line">	<span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setUp</span><span class="params">()</span> &#123;</span><br><span class="line">		mvc = MockMvcBuilders.standaloneSetup(<span class="keyword">new</span> <span class="title class_">HelloController</span>()).build();</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="meta">@Test</span></span><br><span class="line">	<span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">getHello</span><span class="params">()</span> <span class="keyword">throws</span> Exception &#123;</span><br><span class="line">		mvc.perform(MockMvcRequestBuilders.get(<span class="string">&quot;/hello&quot;</span>).accept(MediaType.APPLICATION_JSON))</span><br><span class="line">				.andExpect(status().isOk())</span><br><span class="line">				.andExpect(content().string(equalTo(<span class="string">&quot;Hello World&quot;</span>)));</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>ä½¿ç”¨<code>MockServletContext</code>æ¥æ„å»ºä¸€ä¸ªç©ºçš„<code>WebApplicationContext</code>ï¼Œè¿™æ ·æˆ‘ä»¬åˆ›å»ºçš„<code>HelloController</code>å°±å¯ä»¥åœ¨<code>@Before</code>å‡½æ•°ä¸­åˆ›å»ºå¹¶ä¼ é€’åˆ°<code>MockMvcBuilders.standaloneSetupï¼ˆï¼‰</code>å‡½æ•°ä¸­ã€‚</p>
<ul>
<li>æ³¨æ„å¼•å…¥ä¸‹é¢å†…å®¹ï¼Œè®©<code>status</code>ã€<code>content</code>ã€<code>equalTo</code>å‡½æ•°å¯ç”¨</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> <span class="keyword">static</span> org.hamcrest.Matchers.equalTo;</span><br><span class="line"><span class="keyword">import</span> <span class="keyword">static</span> org.springframework.test.web.servlet.result.MockMvcResultMatchers.content;</span><br><span class="line"><span class="keyword">import</span> <span class="keyword">static</span> org.springframework.test.web.servlet.result.MockMvcResultMatchers.status;</span><br></pre></td></tr></table></figure>

<p>è‡³æ­¤å·²å®Œæˆç›®æ ‡ï¼Œé€šè¿‡ Maven æ„å»ºäº†ä¸€ä¸ªç©ºç™½ Spring Boot é¡¹ç›®ï¼Œå†é€šè¿‡å¼•å…¥ web æ¨¡å—å®ç°äº†ä¸€ä¸ªç®€å•çš„è¯·æ±‚å¤„ç†ã€‚</p>
<h3 id="ç¤ºä¾‹æºç "><a href="#ç¤ºä¾‹æºç " class="headerlink" title="ç¤ºä¾‹æºç "></a>ç¤ºä¾‹æºç </h3><blockquote>
<p>ç¤ºä¾‹æºç ï¼š<a target="_blank" rel="noopener" href="https://github.com/dunwu/spring-boot-tutorial/tree/master/codes/web/spring-boot-web-helloworld">spring-boot-web-helloworld</a></p>
</blockquote>
<h2 id="å‚è€ƒèµ„æ–™"><a href="#å‚è€ƒèµ„æ–™" class="headerlink" title="å‚è€ƒèµ„æ–™"></a>å‚è€ƒèµ„æ–™</h2><ul>
<li><a target="_blank" rel="noopener" href="https://docs.spring.io/spring-boot/docs/current/reference/html/getting-started.html#getting-started">Spring Boot å®˜æ–¹æ–‡æ¡£ä¹‹ Getting Started</a></li>
</ul>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="https://dunwu.github.io/blog/pages/a249ff/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/blog/uploads/avatar.gif">
      <meta itemprop="name" content="é’æ‚Ÿ â—¾ Dunwu">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Dunwu Blog">
      <meta itemprop="description" content="é’æ‚Ÿçš„ä¸ªäººåšå®¢">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="undefined | Dunwu Blog">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/blog/pages/a249ff/" class="post-title-link" itemprop="url">Java ç¼–ç å’ŒåŠ å¯†</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">å‘è¡¨äº</span>

      <time title="åˆ›å»ºæ—¶é—´ï¼š2021-05-24 15:41:47" itemprop="dateCreated datePublished" datetime="2021-05-24T15:41:47+08:00">2021-05-24</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar-check"></i>
      </span>
      <span class="post-meta-item-text">æ›´æ–°äº</span>
      <time title="ä¿®æ”¹æ—¶é—´ï¼š2022-12-23 12:01:44" itemprop="dateModified" datetime="2022-12-23T12:01:44+08:00">2022-12-23</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">åˆ†ç±»äº</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/blog/categories/Java/" itemprop="url" rel="index"><span itemprop="name">Java</span></a>
        </span>
          ï¼Œ
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/blog/categories/Java/JavaSE/" itemprop="url" rel="index"><span itemprop="name">JavaSE</span></a>
        </span>
          ï¼Œ
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/blog/categories/Java/JavaSE/%E9%AB%98%E7%BA%A7%E7%89%B9%E6%80%A7/" itemprop="url" rel="index"><span itemprop="name">é«˜çº§ç‰¹æ€§</span></a>
        </span>
    </span>

  
    <span class="post-meta-break"></span>
    <span class="post-meta-item" title="æœ¬æ–‡å­—æ•°">
      <span class="post-meta-item-icon">
        <i class="far fa-file-word"></i>
      </span>
      <span class="post-meta-item-text">æœ¬æ–‡å­—æ•°ï¼š</span>
      <span>27k</span>
    </span>
    <span class="post-meta-item" title="é˜…è¯»æ—¶é•¿">
      <span class="post-meta-item-icon">
        <i class="far fa-clock"></i>
      </span>
      <span class="post-meta-item-text">é˜…è¯»æ—¶é•¿ &asymp;</span>
      <span>25 åˆ†é’Ÿ</span>
    </span>
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <h1 id="Java-ç¼–ç å’ŒåŠ å¯†"><a href="#Java-ç¼–ç å’ŒåŠ å¯†" class="headerlink" title="Java ç¼–ç å’ŒåŠ å¯†"></a>Java ç¼–ç å’ŒåŠ å¯†</h1><blockquote>
<p>å…³é”®è¯ï¼š<code>Base64</code>ã€<code>æ¶ˆæ¯æ‘˜è¦</code>ã€<code>æ•°å­—ç­¾å</code>ã€<code>å¯¹ç§°åŠ å¯†</code>ã€<code>éå¯¹ç§°åŠ å¯†</code>ã€<code>MD5</code>ã€<code>SHA</code>ã€<code>HMAC</code>ã€<code>AES</code>ã€<code>DES</code>ã€<code>DESede</code>ã€<code>RSA</code></p>
</blockquote>
<h2 id="Base64-ç¼–ç "><a href="#Base64-ç¼–ç " class="headerlink" title="Base64 ç¼–ç "></a>Base64 ç¼–ç </h2><h3 id="Base64-åŸç†"><a href="#Base64-åŸç†" class="headerlink" title="Base64 åŸç†"></a>Base64 åŸç†</h3><p>Base64 å†…å®¹ä¼ é€ç¼–ç æ˜¯ä¸€ç§ä»¥ä»»æ„ 8 ä½å­—èŠ‚åºåˆ—ç»„åˆçš„æè¿°å½¢å¼ï¼Œè¿™ç§å½¢å¼ä¸æ˜“è¢«äººç›´æ¥è¯†åˆ«ã€‚</p>
<p>Base64 æ˜¯ä¸€ç§å¾ˆå¸¸è§çš„ç¼–ç è§„èŒƒï¼Œå…¶ä½œç”¨æ˜¯å°†äºŒè¿›åˆ¶åºåˆ—è½¬æ¢ä¸ºäººç±»å¯è¯»çš„ ASCII å­—ç¬¦åºåˆ—ï¼Œå¸¸ç”¨åœ¨éœ€ç”¨é€šè¿‡æ–‡æœ¬åè®®ï¼ˆæ¯”å¦‚ HTTP å’Œ SMTPï¼‰æ¥ä¼ è¾“äºŒè¿›åˆ¶æ•°æ®çš„æƒ…å†µä¸‹ã€‚<strong>Base64 å¹¶ä¸æ˜¯åŠ å¯†è§£å¯†ç®—æ³•</strong>ï¼Œå°½ç®¡æˆ‘ä»¬æœ‰æ—¶ä¹Ÿå¬åˆ°ä½¿ç”¨ Base64 æ¥åŠ å¯†è§£å¯†çš„è¯´æ³•ï¼Œä½†è¿™é‡Œæ‰€è¯´çš„åŠ å¯†ä¸è§£å¯†å®é™…æ˜¯æŒ‡<strong>ç¼–ç ï¼ˆencodeï¼‰</strong>å’Œ<strong>è§£ç ï¼ˆdecodeï¼‰</strong>çš„è¿‡ç¨‹ï¼Œå…¶å˜æ¢æ˜¯éå¸¸ç®€å•çš„ï¼Œä»…ä»…èƒ½å¤Ÿé¿å…ä¿¡æ¯è¢«ç›´æ¥è¯†åˆ«ã€‚</p>
<p>Base64 ç®—æ³•ä¸»è¦æ˜¯å°†ç»™å®šçš„å­—ç¬¦ä»¥å­—ç¬¦ç¼–ç (å¦‚ ASCII ç ï¼ŒUTF-8 ç )å¯¹åº”çš„åè¿›åˆ¶æ•°ä¸ºåŸºå‡†ï¼Œåšç¼–ç æ“ä½œï¼š</p>
<ol>
<li>å°†ç»™å®šçš„å­—ç¬¦ä¸²ä»¥å­—ç¬¦ä¸ºå•ä½ï¼Œè½¬æ¢ä¸ºå¯¹åº”çš„å­—ç¬¦ç¼–ç ã€‚</li>
<li>å°†è·å¾—å­—ç¬¦ç¼–ç è½¬æ¢ä¸ºäºŒè¿›åˆ¶</li>
<li>å¯¹äºŒè¿›åˆ¶ç åšåˆ†ç»„è½¬æ¢ï¼Œæ¯ 3 ä¸ªå­—èŠ‚ä¸ºä¸€ç»„ï¼Œè½¬æ¢ä¸ºæ¯ 4 ä¸ª 6 ä½äºŒè¿›åˆ¶ä½ä¸€ç»„ï¼ˆä¸è¶³ 6 ä½æ—¶ä½ä½è¡¥ 0ï¼‰ã€‚è¿™æ˜¯ä¸€ä¸ªåˆ†ç»„å˜åŒ–çš„è¿‡ç¨‹ï¼Œ3 ä¸ª 8 ä½äºŒè¿›åˆ¶ç å’Œ 4 ä¸ª 6 ä½äºŒè¿›åˆ¶ç çš„é•¿åº¦éƒ½æ˜¯ 24 ä½ï¼ˆ3<em>8 &#x3D; 4</em>6 &#x3D; 24ï¼‰ã€‚</li>
<li>å¯¹è·å¾—çš„ 4-6 äºŒè¿›åˆ¶ç è¡¥ä½ï¼Œå‘ 6 ä½äºŒè¿›åˆ¶ç æ·»åŠ  2 ä½é«˜ä½ 0ï¼Œç»„æˆ 4 ä¸ª 8 ä½äºŒè¿›åˆ¶ç ã€‚</li>
<li>å¯¹è·å¾—çš„ 4-8 äºŒè¿›åˆ¶ç è½¬æ¢ä¸ºåè¿›åˆ¶ç ã€‚</li>
<li>å°†è·å¾—çš„åè¿›åˆ¶ç è½¬æ¢ä¸º Base64 å­—ç¬¦è¡¨ä¸­å¯¹åº”çš„å­—ç¬¦ã€‚</li>
</ol>
<p><strong><em>Base64 ç¼–ç è¡¨</em></strong></p>
<table>
<thead>
<tr>
<th><strong>ç´¢å¼•</strong></th>
<th><strong>å¯¹åº”å­—ç¬¦</strong></th>
<th><strong>ç´¢å¼•</strong></th>
<th><strong>å¯¹åº”å­—ç¬¦</strong></th>
<th><strong>ç´¢å¼•</strong></th>
<th><strong>å¯¹åº”å­—ç¬¦</strong></th>
<th><strong>ç´¢å¼•</strong></th>
<th><strong>å¯¹åº”å­—ç¬¦</strong></th>
</tr>
</thead>
<tbody><tr>
<td>0</td>
<td>A</td>
<td>17</td>
<td>R</td>
<td>34</td>
<td>i</td>
<td>51</td>
<td>z</td>
</tr>
<tr>
<td>1</td>
<td>B</td>
<td>18</td>
<td>S</td>
<td>35</td>
<td>j</td>
<td>52</td>
<td>0</td>
</tr>
<tr>
<td>2</td>
<td>C</td>
<td>19</td>
<td>T</td>
<td>36</td>
<td>k</td>
<td>53</td>
<td>1</td>
</tr>
<tr>
<td>3</td>
<td>D</td>
<td>20</td>
<td>U</td>
<td>37</td>
<td>l</td>
<td>54</td>
<td>2</td>
</tr>
<tr>
<td>4</td>
<td>E</td>
<td>21</td>
<td>V</td>
<td>38</td>
<td>m</td>
<td>55</td>
<td>3</td>
</tr>
<tr>
<td>5</td>
<td>F</td>
<td>22</td>
<td>W</td>
<td>39</td>
<td>n</td>
<td>56</td>
<td>4</td>
</tr>
<tr>
<td>6</td>
<td>G</td>
<td>23</td>
<td>X</td>
<td>40</td>
<td>o</td>
<td>57</td>
<td>5</td>
</tr>
<tr>
<td>7</td>
<td>H</td>
<td>24</td>
<td>Y</td>
<td>41</td>
<td>p</td>
<td>58</td>
<td>6</td>
</tr>
<tr>
<td>8</td>
<td>I</td>
<td>25</td>
<td>Z</td>
<td>42</td>
<td>q</td>
<td>59</td>
<td>7</td>
</tr>
<tr>
<td>9</td>
<td>J</td>
<td>26</td>
<td>a</td>
<td>43</td>
<td>r</td>
<td>60</td>
<td>8</td>
</tr>
<tr>
<td>10</td>
<td>K</td>
<td>27</td>
<td>b</td>
<td>44</td>
<td>s</td>
<td>61</td>
<td>9</td>
</tr>
<tr>
<td>11</td>
<td>L</td>
<td>28</td>
<td>c</td>
<td>45</td>
<td>t</td>
<td>62</td>
<td>+</td>
</tr>
<tr>
<td>12</td>
<td>M</td>
<td>29</td>
<td>d</td>
<td>46</td>
<td>u</td>
<td>63</td>
<td>&#x2F;</td>
</tr>
<tr>
<td>13</td>
<td>N</td>
<td>30</td>
<td>e</td>
<td>47</td>
<td>v</td>
<td></td>
<td></td>
</tr>
<tr>
<td>14</td>
<td>O</td>
<td>31</td>
<td>f</td>
<td>48</td>
<td>w</td>
<td></td>
<td></td>
</tr>
<tr>
<td>15</td>
<td>P</td>
<td>32</td>
<td>g</td>
<td>49</td>
<td>x</td>
<td></td>
<td></td>
</tr>
<tr>
<td>16</td>
<td>Q</td>
<td>33</td>
<td>h</td>
<td>50</td>
<td>y</td>
<td></td>
<td></td>
</tr>
</tbody></table>
<h3 id="Base64-åº”ç”¨"><a href="#Base64-åº”ç”¨" class="headerlink" title="Base64 åº”ç”¨"></a>Base64 åº”ç”¨</h3><p>Base64 ç¼–ç å¯ç”¨äºåœ¨ HTTP ç¯å¢ƒä¸‹ä¼ é€’è¾ƒé•¿çš„æ ‡è¯†ä¿¡æ¯ã€‚åœ¨å…¶ä»–åº”ç”¨ç¨‹åºä¸­ï¼Œä¹Ÿå¸¸å¸¸éœ€è¦æŠŠäºŒè¿›åˆ¶æ•°æ®ç¼–ç ä¸ºé€‚åˆæ”¾åœ¨ URL(åŒ…æ‹¬éšè—è¡¨å•åŸŸ)ä¸­çš„å½¢å¼ã€‚æ­¤æ—¶ï¼Œé‡‡ç”¨ Base64 ç¼–ç å…·æœ‰ä¸å¯è¯»æ€§ï¼Œå³æ‰€ç¼–ç çš„æ•°æ®ä¸ä¼šè¢«äººç”¨è‚‰çœ¼æ‰€ç›´æ¥çœ‹åˆ°ï¼Œç®—æ˜¯èµ·åˆ°ä¸€ä¸ªåŠ å¯†çš„ä½œç”¨ã€‚</p>
<p>ç„¶è€Œï¼Œ<strong>æ ‡å‡†çš„ Base64 å¹¶ä¸é€‚åˆç›´æ¥æ”¾åœ¨ URL é‡Œä¼ è¾“</strong>ï¼Œå› ä¸º URL ç¼–ç å™¨ä¼šæŠŠæ ‡å‡† Base64 ä¸­çš„ <code>/</code> å’Œ <code>+</code> å­—ç¬¦å˜ä¸ºå½¢å¦‚ <code>%XX</code> çš„å½¢å¼ï¼Œè€Œè¿™äº› <code>%</code> å·åœ¨å­˜å…¥æ•°æ®åº“æ—¶è¿˜éœ€è¦å†è¿›è¡Œè½¬æ¢ï¼Œå› ä¸º ANSI SQL ä¸­å·²å°† <code>%</code> å·ç”¨ä½œé€šé…ç¬¦ã€‚</p>
<p>ä¸ºè§£å†³æ­¤é—®é¢˜ï¼Œå¯é‡‡ç”¨ä¸€ç§ç”¨äº URL çš„æ”¹è¿› Base64 ç¼–ç ï¼Œå®ƒä¸ä»…åœ¨æœ«å°¾å¡«å…… <code>=</code> å·ï¼Œå¹¶å°†æ ‡å‡† Base64 ä¸­çš„â€œ+â€å’Œâ€œ&#x2F;â€åˆ†åˆ«æ”¹æˆäº† <code>-</code> å’Œ <code>_</code>ï¼Œè¿™æ ·å°±å…å»äº†åœ¨ URL ç¼–è§£ç å’Œæ•°æ®åº“å­˜å‚¨æ—¶æ‰€è¦ä½œçš„è½¬æ¢ï¼Œé¿å…äº†ç¼–ç ä¿¡æ¯é•¿åº¦åœ¨æ­¤è¿‡ç¨‹ä¸­çš„å¢åŠ ï¼Œå¹¶ç»Ÿä¸€äº†æ•°æ®åº“ã€è¡¨å•ç­‰å¤„å¯¹è±¡æ ‡è¯†ç¬¦çš„æ ¼å¼ã€‚</p>
<p>å¦æœ‰ä¸€ç§ç”¨äºæ­£åˆ™è¡¨è¾¾å¼çš„æ”¹è¿› Base64 å˜ç§ï¼Œå®ƒå°† <code>+</code> å’Œ <code>/</code> æ”¹æˆäº† <code>!</code> å’Œ <code>-</code>ï¼Œå› ä¸º <code>+</code>, <code>*</code> ä»¥åŠå‰é¢åœ¨ IRCu ä¸­ç”¨åˆ°çš„ <code>[</code> å’Œ <code>]</code> åœ¨æ­£åˆ™è¡¨è¾¾å¼ä¸­éƒ½å¯èƒ½å…·æœ‰ç‰¹æ®Šå«ä¹‰ã€‚</p>
<p>ã€ç¤ºä¾‹ã€‘<code>java.util.Base64</code> ç¼–ç ã€è§£ç ç¤ºä¾‹</p>
<p><code>Base64.getEncoder()</code> å’Œ <code>Base64.getDecoder()</code> æä¾›äº†çš„æ˜¯æ ‡å‡†çš„ Base64 ç¼–ç ã€è§£ç æ–¹å¼ï¼›</p>
<p><code>Base64.getUrlEncoder()</code> å’Œ <code>Base64.getUrlDecoder()</code> æä¾›äº† URL å®‰å…¨çš„ Base64 ç¼–ç ã€è§£ç æ–¹å¼ï¼ˆå°† <code>+</code> å’Œ <code>/</code> æ›¿æ¢ä¸º <code>-</code> å’Œ <code>_</code>ï¼‰ã€‚</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> java.nio.charset.StandardCharsets;</span><br><span class="line"><span class="keyword">import</span> java.util.Base64;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Base64Demo</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="type">String</span> <span class="variable">url</span> <span class="operator">=</span> <span class="string">&quot;https://www.baidu.com&quot;</span>;</span><br><span class="line">        System.out.println(<span class="string">&quot;url:&quot;</span> + url);</span><br><span class="line">        <span class="comment">// æ ‡å‡†çš„ Base64 ç¼–ç ã€è§£ç </span></span><br><span class="line">        <span class="type">byte</span>[] encoded = Base64.getEncoder().encode(url.getBytes(StandardCharsets.UTF_8));</span><br><span class="line">        <span class="type">byte</span>[] decoded = Base64.getDecoder().decode(encoded);</span><br><span class="line">        System.out.println(<span class="string">&quot;Url Safe Base64 encoded:&quot;</span> + <span class="keyword">new</span> <span class="title class_">String</span>(encoded));</span><br><span class="line">        System.out.println(<span class="string">&quot;Url Safe Base64 decoded:&quot;</span> + <span class="keyword">new</span> <span class="title class_">String</span>(decoded));</span><br><span class="line">        <span class="comment">// URL å®‰å…¨çš„ Base64 ç¼–ç ã€è§£ç </span></span><br><span class="line">        <span class="type">byte</span>[] encoded2 = Base64.getUrlEncoder().encode(url.getBytes(StandardCharsets.UTF_8));</span><br><span class="line">        <span class="type">byte</span>[] decoded2 = Base64.getUrlDecoder().decode(encoded2);</span><br><span class="line">        System.out.println(<span class="string">&quot;Base64 encoded:&quot;</span> + <span class="keyword">new</span> <span class="title class_">String</span>(encoded2));</span><br><span class="line">        System.out.println(<span class="string">&quot;Base64 decoded:&quot;</span> + <span class="keyword">new</span> <span class="title class_">String</span>(decoded2));</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>è¾“å‡ºï¼š</p>
<figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">url:https:<span class="regexp">//</span>www.baidu.com</span><br><span class="line">Url Safe Base64 encoded:aHR0cHM6Ly93d3cuYmFpZHUuY29t</span><br><span class="line">Url Safe Base64 decoded:https:<span class="regexp">//</span>www.baidu.com</span><br><span class="line">Base64 encoded:aHR0cHM6Ly93d3cuYmFpZHUuY29t</span><br><span class="line">Base64 decoded:https:<span class="regexp">//</span>www.baidu.com</span><br></pre></td></tr></table></figure>

<h2 id="æ¶ˆæ¯æ‘˜è¦"><a href="#æ¶ˆæ¯æ‘˜è¦" class="headerlink" title="æ¶ˆæ¯æ‘˜è¦"></a>æ¶ˆæ¯æ‘˜è¦</h2><h3 id="æ¶ˆæ¯æ‘˜è¦æ¦‚è¿°"><a href="#æ¶ˆæ¯æ‘˜è¦æ¦‚è¿°" class="headerlink" title="æ¶ˆæ¯æ‘˜è¦æ¦‚è¿°"></a>æ¶ˆæ¯æ‘˜è¦æ¦‚è¿°</h3><p><strong>æ¶ˆæ¯æ‘˜è¦ï¼Œå…¶å®å°±æ˜¯å°†éœ€è¦æ‘˜è¦çš„æ•°æ®ä½œä¸ºå‚æ•°ï¼Œç»è¿‡å“ˆå¸Œå‡½æ•°(Hash)çš„è®¡ç®—ï¼Œå¾—åˆ°çš„æ•£åˆ—å€¼</strong>ã€‚</p>
<p>æ¶ˆæ¯æ‘˜è¦æ˜¯ä¸€ä¸ªå”¯ä¸€å¯¹åº”ä¸€ä¸ªæ¶ˆæ¯æˆ–æ–‡æœ¬çš„å›ºå®šé•¿åº¦çš„å€¼ï¼Œå®ƒç”±ä¸€ä¸ªå•å‘ Hash åŠ å¯†å‡½æ•°å¯¹æ¶ˆæ¯è¿›è¡Œä½œç”¨è€Œäº§ç”Ÿã€‚å¦‚æœæ¶ˆæ¯åœ¨é€”ä¸­æ”¹å˜äº†ï¼Œåˆ™æ¥æ”¶è€…é€šè¿‡å¯¹æ”¶åˆ°æ¶ˆæ¯çš„æ–°äº§ç”Ÿçš„æ‘˜è¦ä¸åŸæ‘˜è¦æ¯”è¾ƒï¼Œå°±å¯çŸ¥é“æ¶ˆæ¯æ˜¯å¦è¢«æ”¹å˜äº†ã€‚å› æ­¤æ¶ˆæ¯æ‘˜è¦ä¿è¯äº†æ¶ˆæ¯çš„å®Œæ•´æ€§ã€‚æ¶ˆæ¯æ‘˜è¦é‡‡ç”¨å•å‘ Hash å‡½æ•°å°†éœ€åŠ å¯†çš„æ˜æ–‡â€æ‘˜è¦â€æˆä¸€ä¸²å¯†æ–‡ï¼Œè¿™ä¸€ä¸²å¯†æ–‡äº¦ç§°ä¸ºæ•°å­—æŒ‡çº¹(Finger Print)ã€‚å®ƒæœ‰å›ºå®šçš„é•¿åº¦ï¼Œä¸”ä¸åŒçš„æ˜æ–‡æ‘˜è¦æˆå¯†æ–‡ï¼Œå…¶ç»“æœæ€»æ˜¯ä¸åŒçš„ï¼Œè€ŒåŒæ ·çš„æ˜æ–‡å…¶æ‘˜è¦å¿…å®šä¸€è‡´ã€‚è¿™æ ·è¿™ä¸²æ‘˜è¦ä¾¿å¯æˆä¸ºéªŒè¯æ˜æ–‡æ˜¯å¦æ˜¯â€çœŸèº«â€çš„â€æŒ‡çº¹â€äº†ã€‚</p>
<h3 id="æ¶ˆæ¯æ‘˜è¦ç‰¹ç‚¹"><a href="#æ¶ˆæ¯æ‘˜è¦ç‰¹ç‚¹" class="headerlink" title="æ¶ˆæ¯æ‘˜è¦ç‰¹ç‚¹"></a>æ¶ˆæ¯æ‘˜è¦ç‰¹ç‚¹</h3><ul>
<li>å”¯ä¸€æ€§ï¼šæ•°æ®åªè¦æœ‰ä¸€ç‚¹æ”¹å˜ï¼Œé‚£ä¹ˆå†é€šè¿‡æ¶ˆæ¯æ‘˜è¦ç®—æ³•å¾—åˆ°çš„æ‘˜è¦ä¹Ÿä¼šå‘ç”Ÿå˜åŒ–ã€‚è™½ç„¶ç†è®ºä¸Šæœ‰å¯èƒ½ä¼šå‘ç”Ÿç¢°æ’ï¼Œä½†æ˜¯æ¦‚ç‡æå…¶ä½ã€‚</li>
<li>ä¸å¯é€†ï¼šæ¶ˆæ¯æ‘˜è¦ç®—æ³•çš„å¯†æ–‡æ— æ³•è¢«è§£å¯†ã€‚</li>
<li>ä¸éœ€è¦å¯†é’¥ï¼Œå¯ä½¿ç”¨äºåˆ†å¸ƒå¼ç½‘ç»œã€‚</li>
<li>æ— è®ºè¾“å…¥çš„æ˜æ–‡æœ‰å¤šé•¿ï¼Œè®¡ç®—å‡ºæ¥çš„æ¶ˆæ¯æ‘˜è¦çš„é•¿åº¦æ€»æ˜¯å›ºå®šçš„ã€‚</li>
</ul>
<h3 id="æ¶ˆæ¯æ‘˜è¦å¸¸ç”¨ç®—æ³•"><a href="#æ¶ˆæ¯æ‘˜è¦å¸¸ç”¨ç®—æ³•" class="headerlink" title="æ¶ˆæ¯æ‘˜è¦å¸¸ç”¨ç®—æ³•"></a>æ¶ˆæ¯æ‘˜è¦å¸¸ç”¨ç®—æ³•</h3><p>æ¶ˆæ¯æ‘˜è¦ç®—æ³•åŒ…æ‹¬**MD(Message Digestï¼Œæ¶ˆæ¯æ‘˜è¦ç®—æ³•)<strong>ã€</strong>SHA(Secure Hash Algorithmï¼Œå®‰å…¨æ•£åˆ—ç®—æ³•)<strong>ã€</strong>MAC(Message AuthenticationCodeï¼Œæ¶ˆæ¯è®¤è¯ç ç®—æ³•)**å…± 3 å¤§ç³»åˆ—ï¼Œå¸¸ç”¨äºéªŒè¯æ•°æ®çš„å®Œæ•´æ€§ï¼Œæ˜¯æ•°å­—ç­¾åç®—æ³•çš„æ ¸å¿ƒç®—æ³•ã€‚</p>
<p><strong>MD5</strong>å’Œ<strong>SHA1</strong>åˆ†åˆ«æ˜¯<strong>MD</strong>ã€<strong>SHA</strong>ç®—æ³•ç³»åˆ—ä¸­æœ€æœ‰ä»£è¡¨æ€§çš„ç®—æ³•ã€‚</p>
<p>å¦‚ä»Šï¼ŒMD5 å·²è¢«å‘ç°æœ‰è®¸å¤šæ¼æ´ï¼Œä»è€Œä¸å†å®‰å…¨ã€‚SHA ç®—æ³•æ¯” MD ç®—æ³•çš„æ‘˜è¦é•¿åº¦æ›´é•¿ï¼Œä¹Ÿæ›´åŠ å®‰å…¨ã€‚</p>
<h3 id="æ¶ˆæ¯æ‘˜è¦åº”ç”¨"><a href="#æ¶ˆæ¯æ‘˜è¦åº”ç”¨" class="headerlink" title="æ¶ˆæ¯æ‘˜è¦åº”ç”¨"></a>æ¶ˆæ¯æ‘˜è¦åº”ç”¨</h3><h4 id="MD5ã€SHA-çš„èŒƒä¾‹"><a href="#MD5ã€SHA-çš„èŒƒä¾‹" class="headerlink" title="MD5ã€SHA çš„èŒƒä¾‹"></a>MD5ã€SHA çš„èŒƒä¾‹</h4><p>JDK ä¸­ä½¿ç”¨ MD5 å’Œ SHA è¿™ä¸¤ç§æ¶ˆæ¯æ‘˜è¦çš„æ–¹å¼åŸºæœ¬ä¸€è‡´ï¼Œæ­¥éª¤å¦‚ä¸‹ï¼š</p>
<ol>
<li>åˆå§‹åŒ– MessageDigest å¯¹è±¡</li>
<li>æ›´æ–°è¦è®¡ç®—çš„å†…å®¹</li>
<li>ç”Ÿæˆæ‘˜è¦</li>
</ol>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> java.security.MessageDigest;</span><br><span class="line"><span class="keyword">import</span> java.util.Base64;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">MessageDigestDemo</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="type">byte</span>[] encode(<span class="type">byte</span>[] input, Type type) <span class="keyword">throws</span> Exception &#123;</span><br><span class="line">        <span class="comment">// æ ¹æ®ç±»å‹ï¼Œåˆå§‹åŒ–æ¶ˆæ¯æ‘˜è¦å¯¹è±¡</span></span><br><span class="line">        <span class="type">MessageDigest</span> <span class="variable">md5Digest</span> <span class="operator">=</span> MessageDigest.getInstance(type.getName());</span><br><span class="line"></span><br><span class="line">        <span class="comment">// æ›´æ–°è¦è®¡ç®—çš„å†…å®¹</span></span><br><span class="line">        md5Digest.update(input);</span><br><span class="line"></span><br><span class="line">        <span class="comment">// å®Œæˆå“ˆå¸Œè®¡ç®—ï¼Œè¿”å›æ‘˜è¦</span></span><br><span class="line">        <span class="keyword">return</span> md5Digest.digest();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="type">byte</span>[] encodeWithBase64(<span class="type">byte</span>[] input, Type type) <span class="keyword">throws</span> Exception &#123;</span><br><span class="line">        <span class="keyword">return</span> Base64.getUrlEncoder().encode(encode(input, type));</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> String <span class="title function_">encodeWithBase64String</span><span class="params">(<span class="type">byte</span>[] input, Type type)</span> <span class="keyword">throws</span> Exception &#123;</span><br><span class="line">        <span class="keyword">return</span> Base64.getUrlEncoder().encodeToString(encode(input, type));</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">enum</span> <span class="title class_">Type</span> &#123;</span><br><span class="line">        MD2(<span class="string">&quot;MD2&quot;</span>),</span><br><span class="line">        MD5(<span class="string">&quot;MD5&quot;</span>),</span><br><span class="line">        SHA1(<span class="string">&quot;SHA1&quot;</span>),</span><br><span class="line">        SHA256(<span class="string">&quot;SHA-256&quot;</span>),</span><br><span class="line">        SHA384(<span class="string">&quot;SHA-384&quot;</span>),</span><br><span class="line">        SHA512(<span class="string">&quot;SHA-512&quot;</span>);</span><br><span class="line"></span><br><span class="line">        <span class="keyword">private</span> String name;</span><br><span class="line"></span><br><span class="line">        Type(String name) &#123;</span><br><span class="line">            <span class="built_in">this</span>.name = name;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">public</span> String <span class="title function_">getName</span><span class="params">()</span> &#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="built_in">this</span>.name;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> Exception &#123;</span><br><span class="line">        <span class="type">String</span> <span class="variable">msg</span> <span class="operator">=</span> <span class="string">&quot;Hello World!&quot;</span>;</span><br><span class="line">        System.out.println(<span class="string">&quot;MD2: &quot;</span> + encodeWithBase64String(msg.getBytes(), Type.MD2));</span><br><span class="line">        System.out.println(<span class="string">&quot;MD5: &quot;</span> + encodeWithBase64String(msg.getBytes(), Type.MD5));</span><br><span class="line">        System.out.println(<span class="string">&quot;SHA1: &quot;</span> + encodeWithBase64String(msg.getBytes(), Type.SHA1));</span><br><span class="line">        System.out.println(<span class="string">&quot;SHA256: &quot;</span> + encodeWithBase64String(msg.getBytes(), Type.SHA256));</span><br><span class="line">        System.out.println(<span class="string">&quot;SHA384: &quot;</span> + encodeWithBase64String(msg.getBytes(), Type.SHA384));</span><br><span class="line">        System.out.println(<span class="string">&quot;SHA512: &quot;</span> + encodeWithBase64String(msg.getBytes(), Type.SHA512));</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>ã€è¾“å‡ºã€‘</p>
<figure class="highlight avrasm"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="symbol">MD2:</span> MV98ZyI_Aft8q0uVEA6HLg==</span><br><span class="line"><span class="symbol">MD5:</span> <span class="number">7</span>Qdih1MuhjZehB6Sv8UNjA==</span><br><span class="line"><span class="symbol">SHA1:</span> Lve95gjOVATpfV8EL5X4nxwjKHE=</span><br><span class="line"><span class="symbol">SHA256:</span> f4OxZX_x_FO5LcGBSKHWXfwtSx-j1ncoSt3SABJtkGk=</span><br><span class="line"><span class="symbol">SHA384:</span> v9dsDrvQBv7lg0EFR8GIewKSvnbVgtlsJC0qeScj4_1v0GH51c_RO4-WE1jmrbpK</span><br><span class="line"><span class="symbol">SHA512:</span> hhhE1nBOhXP-w02WfiC8_vPUJM9IvgTm3AjyvVjHKXQzcQFerYkcw88cnTS0kmS1EHUbH_nlN5N7xGtdb_TsyA==</span><br></pre></td></tr></table></figure>

<h4 id="HMAC-çš„èŒƒä¾‹"><a href="#HMAC-çš„èŒƒä¾‹" class="headerlink" title="HMAC çš„èŒƒä¾‹"></a>HMAC çš„èŒƒä¾‹</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.nio.charset.StandardCharsets;</span><br><span class="line"><span class="keyword">import</span> java.util.Base64;</span><br><span class="line"><span class="keyword">import</span> javax.crypto.Mac;</span><br><span class="line"><span class="keyword">import</span> javax.crypto.spec.SecretKeySpec;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">HmacMessageDigest</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> Exception &#123;</span><br><span class="line">        <span class="type">String</span> <span class="variable">msg</span> <span class="operator">=</span> <span class="string">&quot;Hello World!&quot;</span>;</span><br><span class="line">        <span class="type">byte</span>[] salt = <span class="string">&quot;My Salt&quot;</span>.getBytes(StandardCharsets.UTF_8);</span><br><span class="line">        System.out.println(<span class="string">&quot;åŸæ–‡: &quot;</span> + msg);</span><br><span class="line">        System.out.println(<span class="string">&quot;HmacMD5: &quot;</span> + encodeWithBase64String(msg.getBytes(), salt, HmacTypeEn.HmacMD5));</span><br><span class="line">        System.out.println(<span class="string">&quot;HmacSHA1: &quot;</span> + encodeWithBase64String(msg.getBytes(), salt, HmacTypeEn.HmacSHA1));</span><br><span class="line">        System.out.println(<span class="string">&quot;HmacSHA256: &quot;</span> + encodeWithBase64String(msg.getBytes(), salt, HmacTypeEn.HmacSHA256));</span><br><span class="line">        System.out.println(<span class="string">&quot;HmacSHA384: &quot;</span> + encodeWithBase64String(msg.getBytes(), salt, HmacTypeEn.HmacSHA384));</span><br><span class="line">        System.out.println(<span class="string">&quot;HmacSHA512: &quot;</span> + encodeWithBase64String(msg.getBytes(), salt, HmacTypeEn.HmacSHA512));</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="type">byte</span>[] encode(<span class="type">byte</span>[] plaintext, <span class="type">byte</span>[] salt, HmacTypeEn type) <span class="keyword">throws</span> Exception &#123;</span><br><span class="line">        <span class="type">SecretKeySpec</span> <span class="variable">keySpec</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">SecretKeySpec</span>(salt, type.name());</span><br><span class="line">        <span class="type">Mac</span> <span class="variable">mac</span> <span class="operator">=</span> Mac.getInstance(keySpec.getAlgorithm());</span><br><span class="line">        mac.init(keySpec);</span><br><span class="line">        <span class="keyword">return</span> mac.doFinal(plaintext);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="type">byte</span>[] encodeWithBase64(<span class="type">byte</span>[] plaintext, <span class="type">byte</span>[] salt, HmacTypeEn type) <span class="keyword">throws</span> Exception &#123;</span><br><span class="line">        <span class="keyword">return</span> Base64.getUrlEncoder().encode(encode(plaintext, salt, type));</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> String <span class="title function_">encodeWithBase64String</span><span class="params">(<span class="type">byte</span>[] plaintext, <span class="type">byte</span>[] salt, HmacTypeEn type)</span> <span class="keyword">throws</span> Exception &#123;</span><br><span class="line">        <span class="keyword">return</span> Base64.getUrlEncoder().encodeToString(encode(plaintext, salt, type));</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * JDKæ”¯æŒ HmacMD5, HmacSHA1, HmacSHA256, HmacSHA384, HmacSHA512</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">enum</span> <span class="title class_">HmacTypeEn</span> &#123;</span><br><span class="line"></span><br><span class="line">        HmacMD5, HmacSHA1, HmacSHA256, HmacSHA384, HmacSHA512;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><strong>è¾“å‡º</strong></p>
<figure class="highlight makefile"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="section">åŸæ–‡: Hello World!</span></span><br><span class="line"><span class="section">HmacMD5: re6BLRsB1Q26SfJTwXZUSQ==</span></span><br><span class="line"><span class="section">HmacSHA1: CFu8a9H6CbY9C5fo0OmJ2bnuILM=</span></span><br><span class="line"><span class="section">HmacSHA256: Z1czUqDWWfYYl7qEDJ2sUH6iieHVI7o83dXMl0JYER0=</span></span><br><span class="line"><span class="section">HmacSHA384: 34mKtRQBOYnwwznmQubjrDk_MsLDGqM2PmgcplZUpLsKNrG_cwfz4bLPJCbBW88b</span></span><br><span class="line"><span class="section">HmacSHA512: 6n77htTZ_atc04-SsmxhSK3wzh1sAmdudCl0Cb_RZp4DpienG4LZkhXMbq8lcK7XSnz6my_wIpnStDp6PC_-5w==</span></span><br></pre></td></tr></table></figure>

<h2 id="æ•°å­—ç­¾å"><a href="#æ•°å­—ç­¾å" class="headerlink" title="æ•°å­—ç­¾å"></a>æ•°å­—ç­¾å</h2><h3 id="æ•°å­—ç­¾åæ¦‚è¿°"><a href="#æ•°å­—ç­¾åæ¦‚è¿°" class="headerlink" title="æ•°å­—ç­¾åæ¦‚è¿°"></a>æ•°å­—ç­¾åæ¦‚è¿°</h3><p>æ•°å­—ç­¾åç®—æ³•å¯ä»¥çœ‹åšæ˜¯ä¸€ç§å¸¦æœ‰å¯†é’¥çš„æ¶ˆæ¯æ‘˜è¦ç®—æ³•ï¼Œå¹¶ä¸”è¿™ç§å¯†é’¥åŒ…å«äº†å…¬é’¥å’Œç§é’¥ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œ<strong>æ•°å­—ç­¾åç®—æ³•æ˜¯éå¯¹ç§°åŠ å¯†ç®—æ³•å’Œæ¶ˆæ¯æ‘˜è¦ç®—æ³•çš„ç»“åˆä½“</strong>ã€‚</p>
<p>æ•°å­—ç­¾åç®—æ³•è¦æ±‚èƒ½å¤ŸéªŒè¯æ•°æ®å®Œæ•´æ€§ã€è®¤è¯æ•°æ®æ¥æºï¼Œå¹¶èµ·åˆ°æŠ—å¦è®¤çš„ä½œç”¨ã€‚</p>
<p>æ•°å­—ç­¾åç®—æ³•åŒ…å«ç­¾åå’ŒéªŒè¯ä¸¤é¡¹æ“ä½œï¼Œéµå¾ªç§é’¥ç­¾åï¼Œå…¬é’¥éªŒè¯çš„æ–¹å¼ã€‚</p>
<p>ç­¾åæ—¶è¦ä½¿ç”¨ç§é’¥å’Œå¾…ç­¾åæ•°æ®ï¼ŒéªŒè¯æ—¶åˆ™éœ€è¦å…¬é’¥ã€ç­¾åå€¼å’Œå¾…ç­¾åæ•°æ®ï¼Œå…¶æ ¸å¿ƒç®—æ³•ä¸»è¦æ˜¯æ¶ˆæ¯æ‘˜è¦ç®—æ³•ã€‚</p>
<p><img src="https://raw.githubusercontent.com/dunwu/images/dev/cs/java/advanced/java-message-digest-process.jpg" alt="img"></p>
<p>æ•°å­—ç­¾åå¸¸ç”¨ç®—æ³•ï¼š<strong>RSA</strong>ã€<strong>DSA</strong>ã€<strong>ECDSA</strong></p>
<h3 id="æ•°å­—ç­¾åç®—æ³•åº”ç”¨"><a href="#æ•°å­—ç­¾åç®—æ³•åº”ç”¨" class="headerlink" title="æ•°å­—ç­¾åç®—æ³•åº”ç”¨"></a>æ•°å­—ç­¾åç®—æ³•åº”ç”¨</h3><h4 id="DSA-çš„èŒƒä¾‹"><a href="#DSA-çš„èŒƒä¾‹" class="headerlink" title="DSA çš„èŒƒä¾‹"></a>DSA çš„èŒƒä¾‹</h4><p>æ•°å­—ç­¾åæœ‰ä¸¤ä¸ªæµç¨‹ï¼šç­¾åå’ŒéªŒè¯ã€‚</p>
<p>å®ƒä»¬çš„å‰æéƒ½æ˜¯è¦æœ‰ä¸€ä¸ªå…¬é’¥ã€å¯†é’¥å¯¹ã€‚</p>
<p>æ•°å­—ç­¾åç”¨ç§é’¥ä¸ºæ¶ˆæ¯è®¡ç®—ç­¾åã€‚</p>
<p>ã€ç¤ºä¾‹ã€‘ç”¨å…¬é’¥éªŒè¯æ‘˜è¦</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">DsaCoder</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="type">String</span> <span class="variable">KEY_ALGORITHM</span> <span class="operator">=</span> <span class="string">&quot;DSA&quot;</span>;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="type">String</span> <span class="variable">SIGN_ALGORITHM</span> <span class="operator">=</span> <span class="string">&quot;SHA1withDSA&quot;</span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * DSAå¯†é’¥é•¿åº¦é»˜è®¤1024ä½ã€‚ å¯†é’¥é•¿åº¦å¿…é¡»æ˜¯64çš„æ•´æ•°å€ï¼ŒèŒƒå›´åœ¨512~1024ä¹‹é—´</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="type">int</span> <span class="variable">KEY_SIZE</span> <span class="operator">=</span> <span class="number">1024</span>;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> KeyPair keyPair;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">DsaCoder</span><span class="params">()</span> <span class="keyword">throws</span> Exception &#123;</span><br><span class="line">        <span class="built_in">this</span>.keyPair = initKey();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> KeyPair <span class="title function_">initKey</span><span class="params">()</span> <span class="keyword">throws</span> Exception &#123;</span><br><span class="line">        <span class="comment">// åˆå§‹åŒ–å¯†é’¥å¯¹ç”Ÿæˆå™¨</span></span><br><span class="line">        <span class="type">KeyPairGenerator</span> <span class="variable">keyPairGen</span> <span class="operator">=</span> KeyPairGenerator.getInstance(DsaCoder.KEY_ALGORITHM);</span><br><span class="line">        <span class="comment">// å®ä¾‹åŒ–å¯†é’¥å¯¹ç”Ÿæˆå™¨</span></span><br><span class="line">        keyPairGen.initialize(KEY_SIZE);</span><br><span class="line">        <span class="comment">// å®ä¾‹åŒ–å¯†é’¥å¯¹</span></span><br><span class="line">        <span class="keyword">return</span> keyPairGen.genKeyPair();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="type">byte</span>[] signature(<span class="type">byte</span>[] data, <span class="type">byte</span>[] privateKey) <span class="keyword">throws</span> Exception &#123;</span><br><span class="line">        <span class="type">PKCS8EncodedKeySpec</span> <span class="variable">keySpec</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">PKCS8EncodedKeySpec</span>(privateKey);</span><br><span class="line">        <span class="type">KeyFactory</span> <span class="variable">keyFactory</span> <span class="operator">=</span> KeyFactory.getInstance(KEY_ALGORITHM);</span><br><span class="line">        <span class="type">PrivateKey</span> <span class="variable">key</span> <span class="operator">=</span> keyFactory.generatePrivate(keySpec);</span><br><span class="line"></span><br><span class="line">        <span class="type">Signature</span> <span class="variable">signature</span> <span class="operator">=</span> Signature.getInstance(SIGN_ALGORITHM);</span><br><span class="line">        signature.initSign(key);</span><br><span class="line">        signature.update(data);</span><br><span class="line">        <span class="keyword">return</span> signature.sign();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="type">byte</span>[] getPrivateKey() &#123;</span><br><span class="line">        <span class="keyword">return</span> keyPair.getPrivate().getEncoded();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="type">boolean</span> <span class="title function_">verify</span><span class="params">(<span class="type">byte</span>[] data, <span class="type">byte</span>[] publicKey, <span class="type">byte</span>[] sign)</span> <span class="keyword">throws</span> Exception &#123;</span><br><span class="line">        <span class="type">X509EncodedKeySpec</span> <span class="variable">keySpec</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">X509EncodedKeySpec</span>(publicKey);</span><br><span class="line">        <span class="type">KeyFactory</span> <span class="variable">keyFactory</span> <span class="operator">=</span> KeyFactory.getInstance(KEY_ALGORITHM);</span><br><span class="line">        <span class="type">PublicKey</span> <span class="variable">key</span> <span class="operator">=</span> keyFactory.generatePublic(keySpec);</span><br><span class="line"></span><br><span class="line">        <span class="type">Signature</span> <span class="variable">signature</span> <span class="operator">=</span> Signature.getInstance(SIGN_ALGORITHM);</span><br><span class="line">        signature.initVerify(key);</span><br><span class="line">        signature.update(data);</span><br><span class="line">        <span class="keyword">return</span> signature.verify(sign);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="type">byte</span>[] getPublicKey() &#123;</span><br><span class="line">        <span class="keyword">return</span> keyPair.getPublic().getEncoded();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> Exception &#123;</span><br><span class="line">        <span class="type">String</span> <span class="variable">msg</span> <span class="operator">=</span> <span class="string">&quot;Hello World&quot;</span>;</span><br><span class="line">        <span class="type">DsaCoder</span> <span class="variable">dsa</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">DsaCoder</span>();</span><br><span class="line">        <span class="type">byte</span>[] sign = dsa.signature(msg.getBytes(), dsa.getPrivateKey());</span><br><span class="line">        <span class="type">boolean</span> <span class="variable">flag</span> <span class="operator">=</span> dsa.verify(msg.getBytes(), dsa.getPublicKey(), sign);</span><br><span class="line">        <span class="type">String</span> <span class="variable">result</span> <span class="operator">=</span> flag ? <span class="string">&quot;æ•°å­—ç­¾ååŒ¹é…&quot;</span> : <span class="string">&quot;æ•°å­—ç­¾åä¸åŒ¹é…&quot;</span>;</span><br><span class="line">        System.out.println(<span class="string">&quot;æ•°å­—ç­¾åï¼š&quot;</span> + Base64.getUrlEncoder().encodeToString(sign));</span><br><span class="line">        System.out.println(<span class="string">&quot;éªŒè¯ç»“æœï¼š&quot;</span> + result);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>ã€è¾“å‡ºã€‘</p>
<figure class="highlight gcode"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">æ•°å­—ç­¾åï¼šMCwCFDPUO_VrO<span class="symbol">Nl5</span>ST<span class="number">0</span>AWary-MLXJuSCAhRMeM<span class="symbol">nUVhpizfa2</span>H<span class="number">2</span><span class="name">M37</span>t<span class="symbol">ne0</span>pUtoA==</span><br><span class="line">éªŒè¯ç»“æœï¼šæ•°å­—ç­¾ååŒ¹é…</span><br></pre></td></tr></table></figure>

<h2 id="å¯¹ç§°åŠ å¯†"><a href="#å¯¹ç§°åŠ å¯†" class="headerlink" title="å¯¹ç§°åŠ å¯†"></a>å¯¹ç§°åŠ å¯†</h2><h3 id="å¯¹ç§°åŠ å¯†æ¦‚è¿°"><a href="#å¯¹ç§°åŠ å¯†æ¦‚è¿°" class="headerlink" title="å¯¹ç§°åŠ å¯†æ¦‚è¿°"></a>å¯¹ç§°åŠ å¯†æ¦‚è¿°</h3><p>å¯¹ç§°åŠ å¯†ç®—æ³•ä¸»è¦æœ‰ DESã€3DESï¼ˆTripleDESï¼‰ã€AESã€IDEAã€RC2ã€RC4ã€RC5 å’Œ Blowfish ç­‰ã€‚</p>
<p>å¯¹ç§°åŠ å¯†ç®—æ³•æ˜¯åº”ç”¨è¾ƒæ—©çš„åŠ å¯†ç®—æ³•ï¼ŒæŠ€æœ¯æˆç†Ÿã€‚åœ¨å¯¹ç§°åŠ å¯†ç®—æ³•ä¸­ï¼Œæ•°æ®å‘ä¿¡æ–¹å°†æ˜æ–‡ï¼ˆåŸå§‹æ•°æ®ï¼‰å’ŒåŠ å¯†å¯†é’¥ï¼ˆmi yaoï¼‰ä¸€èµ·ç»è¿‡ç‰¹æ®ŠåŠ å¯†ç®—æ³•å¤„ç†åï¼Œä½¿å…¶å˜æˆå¤æ‚çš„åŠ å¯†å¯†æ–‡å‘é€å‡ºå»ã€‚æ”¶ä¿¡æ–¹æ”¶åˆ°å¯†æ–‡åï¼Œè‹¥æƒ³è§£è¯»åŸæ–‡ï¼Œåˆ™éœ€è¦ä½¿ç”¨åŠ å¯†ç”¨è¿‡çš„å¯†é’¥åŠç›¸åŒç®—æ³•çš„é€†ç®—æ³•å¯¹å¯†æ–‡è¿›è¡Œè§£å¯†ï¼Œæ‰èƒ½ä½¿å…¶æ¢å¤æˆå¯è¯»æ˜æ–‡ã€‚åœ¨å¯¹ç§°åŠ å¯†ç®—æ³•ä¸­ï¼Œä½¿ç”¨çš„å¯†é’¥åªæœ‰ä¸€ä¸ªï¼Œå‘æ”¶ä¿¡åŒæ–¹éƒ½ä½¿ç”¨è¿™ä¸ªå¯†é’¥å¯¹æ•°æ®è¿›è¡ŒåŠ å¯†å’Œè§£å¯†ï¼Œè¿™å°±è¦æ±‚è§£å¯†æ–¹äº‹å…ˆå¿…é¡»çŸ¥é“åŠ å¯†å¯†é’¥ã€‚</p>
<p>å¯¹ç§°åŠ å¯†ç‰¹ç‚¹ï¼š</p>
<ul>
<li>ä¼˜ç‚¹ï¼šè®¡ç®—é‡å°ã€åŠ å¯†é€Ÿåº¦å¿«ã€åŠ å¯†æ•ˆç‡é«˜ã€‚</li>
<li>ç¼ºç‚¹ï¼šç®—æ³•æ˜¯å…¬å¼€çš„ï¼Œå®‰å…¨æ€§å¾—ä¸åˆ°ä¿è¯ã€‚</li>
</ul>
<p>é€šä¿¡åŒæ–¹æ¯æ¬¡ä½¿ç”¨å¯¹ç§°åŠ å¯†ç®—æ³•æ—¶ï¼Œéƒ½éœ€è¦ä½¿ç”¨å…¶ä»–äººä¸çŸ¥é“çš„æƒŸä¸€å¯†é’¥ï¼Œè¿™ä¼šä½¿å¾—é€šä¿¡åŒæ–¹æ‰€æ‹¥æœ‰çš„å¯†é’¥æ•°é‡å‘ˆå‡ ä½•çº§æ•°å¢é•¿ï¼Œå¯†é’¥ç®¡ç†æˆä¸ºç”¨æˆ·çš„è´Ÿæ‹…ã€‚å¯¹ç§°åŠ å¯†ç®—æ³•åœ¨åˆ†å¸ƒå¼ç½‘ç»œç³»ç»Ÿä¸Šä½¿ç”¨è¾ƒä¸ºå›°éš¾ï¼Œä¸»è¦æ˜¯å› ä¸ºå¯†é’¥ç®¡ç†å›°éš¾ï¼Œä½¿ç”¨æˆæœ¬è¾ƒé«˜ã€‚</p>
<p>è€Œä¸å…¬é’¥ã€å¯†é’¥åŠ å¯†ç®—æ³•æ¯”èµ·æ¥ï¼Œå¯¹ç§°åŠ å¯†ç®—æ³•èƒ½å¤Ÿæä¾›åŠ å¯†å’Œè®¤è¯å´ç¼ºä¹äº†ç­¾ååŠŸèƒ½ï¼Œä½¿å¾—ä½¿ç”¨èŒƒå›´æœ‰æ‰€ç¼©å°ã€‚</p>
<h4 id="å¯¹ç§°åŠ å¯†åŸç†"><a href="#å¯¹ç§°åŠ å¯†åŸç†" class="headerlink" title="å¯¹ç§°åŠ å¯†åŸç†"></a>å¯¹ç§°åŠ å¯†åŸç†</h4><p>å¯¹ç§°åŠ å¯†è¦æ±‚åŠ å¯†ä¸è§£å¯†ä½¿ç”¨åŒä¸€ä¸ªå¯†é’¥ï¼Œè§£å¯†æ˜¯åŠ å¯†çš„é€†è¿ç®—ã€‚ç”±äºåŠ å¯†ã€è§£å¯†ä½¿ç”¨åŒä¸€ä¸ªå¯†é’¥ï¼Œè¿™è¦æ±‚é€šä¿¡åŒæ–¹å¿…é¡»åœ¨é€šä¿¡å‰å•†å®šè¯¥å¯†é’¥ï¼Œå¹¶å¦¥å–„ä¿å­˜è¯¥å¯†é’¥ã€‚</p>
<p>å¯¹ç§°åŠ å¯†ä½“åˆ¶åˆ†ä¸ºä¸¤ç§ï¼š</p>
<p>ä¸€ç§æ˜¯å¯¹æ˜æ–‡çš„å•ä¸ªä½ï¼ˆæˆ–å­—èŠ‚ï¼‰è¿›è¡Œè¿ç®—ï¼Œç§°ä¸ºæµå¯†ç ï¼Œä¹Ÿç§°ä¸ºåºåˆ—å¯†ç ï¼›</p>
<p>ä¸€ç§æ˜¯æŠŠæ˜æ–‡ä¿¡æ¯åˆ’åˆ†ä¸ºä¸åŒçš„ç»„ï¼ˆæˆ–å—ï¼‰ç»“æ„ï¼Œåˆ†åˆ«å¯¹æ¯ä¸ªç»„ï¼ˆæˆ–å—ï¼‰è¿›è¡ŒåŠ å¯†ã€è§£å¯†ï¼Œç§°ä¸ºåˆ†ç»„å¯†ç ã€‚</p>
<p><img src="https://raw.githubusercontent.com/dunwu/images/dev/cs/java/advanced/symmetric-encryption.png" alt="img"></p>
<p>å‡è®¾ç”²ä¹™æ–¹ä½œä¸ºé€šä¿¡åŒæ–¹ã€‚å‡å®šç”²ä¹™åŒæ–¹åœ¨æ¶ˆæ¯ä¼ é€’å‰å·²å•†å®šåŠ å¯†ç®—æ³•ï¼Œæ¬²å®Œæˆä¸€æ¬¡æ¶ˆæ¯ä¼ é€’éœ€è¦ç»è¿‡å¦‚ä¸‹æ­¥éª¤ã€‚</p>
<p><img src="https://raw.githubusercontent.com/dunwu/images/dev/cs/java/advanced/symmetric-encryption-progress.png" alt="img"></p>
<h4 id="å¯¹ç§°åŠ å¯†å·¥ä½œæ¨¡å¼"><a href="#å¯¹ç§°åŠ å¯†å·¥ä½œæ¨¡å¼" class="headerlink" title="å¯¹ç§°åŠ å¯†å·¥ä½œæ¨¡å¼"></a>å¯¹ç§°åŠ å¯†å·¥ä½œæ¨¡å¼</h4><p>ä»¥ DES ç®—æ³•çš„å·¥ä½œæ¨¡å¼ä¸ºä¾‹ï¼ŒDES ç®—æ³•æ ¹æ®å…¶åŠ å¯†ç®—æ³•æ‰€å®šä¹‰çš„æ˜æ–‡åˆ†ç»„çš„å¤§å°ï¼ˆ56 ä½ï¼‰ï¼Œå°†æ•°æ®åˆ†å‰²æˆè‹¥å¹² 56 ä½çš„åŠ å¯†åŒºå—ï¼Œå†ä»¥åŠ å¯†åŒºå—ä¸ºå•ä½ï¼Œåˆ†åˆ«è¿›è¡ŒåŠ å¯†å¤„ç†ã€‚å¦‚æœæœ€åå‰©ä¸‹ä¸è¶³ä¸€ä¸ªåŒºå—çš„å¤§å°ï¼Œç§°ä¹‹ä¸º<strong>çŸ­å—</strong>ã€‚çŸ­å—çš„å¤„ç†æ–¹æ³•æœ‰å¡«å……æ³•ã€æµå¯†ç åŠ å¯†æ³•ã€å¯†æ–‡æŒªç”¨æŠ€æœ¯ã€‚</p>
<p>æ ¹æ®æ•°æ®åŠ å¯†æ—¶æ¯ä¸ªåŠ å¯†åŒºå—è§å¾—å…³è”æ–¹å¼æ¥åŒºåˆ†ï¼Œå¯ä»¥åˆ†ä¸ºä»¥ä¸‹ç§å·¥ä½œæ¨¡å¼ï¼š</p>
<p><strong>(1) ç”µå­å¯†ç æœ¬æ¨¡å¼(Electronic Code Book, ECB)</strong></p>
<p>ç”¨é€”ï¼šé€‚åˆåŠ å¯†å¯†é’¥ï¼Œéšæœºæ•°ç­‰çŸ­æ•°æ®ã€‚ä¾‹å¦‚ï¼Œå®‰å…¨åœ°ä¼ é€’ DES å¯†é’¥ï¼ŒECB æ˜¯æœ€åˆé€‚çš„æ¨¡å¼ã€‚</p>
<p><strong>(2) å¯†æ–‡é“¾æ¥æ¨¡å¼(Cipher Booki Chaining, CBC)</strong></p>
<p>ç”¨é€”ï¼šå¯åŠ å¯†ä»»æ„é•¿åº¦çš„æ•°æ®ï¼Œé€‚ç”¨äºè®¡ç®—äº§ç”Ÿæ£€æµ‹æ•°æ®å®Œæ•´æ€§çš„æ¶ˆæ¯è®¤è¯ MACã€‚</p>
<p><strong>(3) å¯†æ–‡åé¦ˆæ¨¡å¼(Cipher Feed Back, CFB)</strong></p>
<p>ç”¨é€”ï¼šå› é”™è¯¯ä¼ æ’­æ— ç•Œï¼Œå¯ä»¥ç”¨äºæ£€æŸ¥å‘ç°æ˜æ–‡å¯†æ–‡çš„ç¯¡æ”¹ã€‚</p>
<p><strong>(4) è¾“å‡ºåé¦ˆæ¨¡å¼(Output Feed Back, OFB)</strong></p>
<p>ç”¨é€”ï¼šä½¿ç”¨äºåŠ å¯†å†—ä½™æ€§è¾ƒå¤§çš„æ•°æ®ï¼Œæ¯”å¦‚è¯­éŸ³å’Œå›¾åƒæ•°æ®ã€‚</p>
<p>AES ç®—æ³•é™¤äº†ä»¥ä¸Š 4 ä¸­æ¨¡å¼å¤–ï¼Œè¿˜æœ‰ä¸€ç§æ–°çš„å·¥ä½œæ¨¡å¼ï¼š</p>
<p><strong>(5) è®¡æ•°å™¨æ¨¡å¼(Counter, CTR)</strong></p>
<p>ç”¨é€”ï¼šé€‚ç”¨äºå„ç§åŠ å¯†åº”ç”¨ã€‚</p>
<p>æœ¬æ–‡å¯¹äºå„ç§å·¥ä½œæ¨¡å¼çš„åŸç†å±•å¼€æè¿°ã€‚ä¸ªäººè®¤ä¸ºï¼Œä½œä¸ºå·¥ç¨‹åº”ç”¨ï¼Œäº†è§£å…¶ç”¨é€”å³å¯ã€‚</p>
<h4 id="å¯¹ç§°åŠ å¯†å¡«å……æ–¹æ³•"><a href="#å¯¹ç§°åŠ å¯†å¡«å……æ–¹æ³•" class="headerlink" title="å¯¹ç§°åŠ å¯†å¡«å……æ–¹æ³•"></a>å¯¹ç§°åŠ å¯†å¡«å……æ–¹æ³•</h4><p>Java ä¸­å¯¹ç§°åŠ å¯†å¯¹äºçŸ­å—çš„å¤„ç†ï¼Œä¸€èˆ¬æ˜¯é‡‡ç”¨å¡«å……æ–¹å¼ã€‚</p>
<p>å¸¸é‡‡ç”¨çš„æ˜¯ï¼šNoPaddingï¼ˆä¸å¡«å……ï¼‰ã€Zeros å¡«å……ï¼ˆ0 å¡«å……ï¼‰ã€PKCS5Padding å¡«å……ã€‚</p>
<p><strong>ZerosPadding</strong></p>
<p>æ–¹å¼ï¼šå…¨éƒ¨å¡«å……ä¸º 0 çš„å­—èŠ‚</p>
<p>ç»“æœå¦‚ä¸‹ï¼š</p>
<p>F1 F2 F3 F4 F5 F6 F7 F8 &#x2F;&#x2F;ç¬¬ä¸€å—</p>
<p>F9 00 00 00 00 00 00 00 &#x2F;&#x2F;ç¬¬äºŒå—</p>
<p><strong>PKCS5Padding</strong></p>
<p>æ–¹å¼ï¼šæ¯ä¸ªå¡«å……çš„å­—èŠ‚éƒ½è®°å½•äº†å¡«å……çš„æ€»å­—èŠ‚æ•°</p>
<p>ç»“æœå¦‚ä¸‹ï¼š</p>
<p>F1 F2 F3 F4 F5 F6 F7 F8 &#x2F;&#x2F;ç¬¬ä¸€å—</p>
<p>F9 07 07 07 07 07 07 07 &#x2F;&#x2F;ç¬¬äºŒå—</p>
<h3 id="å¯¹ç§°åŠ å¯†åº”ç”¨"><a href="#å¯¹ç§°åŠ å¯†åº”ç”¨" class="headerlink" title="å¯¹ç§°åŠ å¯†åº”ç”¨"></a>å¯¹ç§°åŠ å¯†åº”ç”¨</h3><h4 id="åŸºäºå¯†é’¥åŠ å¯†çš„æµç¨‹ï¼ˆDESã€DESedeã€AES-å’Œ-IDEAï¼‰"><a href="#åŸºäºå¯†é’¥åŠ å¯†çš„æµç¨‹ï¼ˆDESã€DESedeã€AES-å’Œ-IDEAï¼‰" class="headerlink" title="åŸºäºå¯†é’¥åŠ å¯†çš„æµç¨‹ï¼ˆDESã€DESedeã€AES å’Œ IDEAï¼‰"></a>åŸºäºå¯†é’¥åŠ å¯†çš„æµç¨‹ï¼ˆDESã€DESedeã€AES å’Œ IDEAï¼‰</h4><p>DESã€DESedeã€AES å’Œ IDEA ç­‰ç®—æ³•éƒ½æ˜¯åŸºäºå¯†é’¥åŠ å¯†çš„å¯¹ç§°åŠ å¯†ç®—æ³•ï¼Œå®ƒä»¬çš„å®ç°æµç¨‹ä¹ŸåŸºæœ¬ä¸€è‡´ã€‚æ­¥éª¤å¦‚ä¸‹ï¼š</p>
<p>ï¼ˆ1ï¼‰ç”Ÿæˆå¯†é’¥</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">KeyGenerator</span> <span class="variable">kg</span> <span class="operator">=</span> KeyGenerator.getInstance(<span class="string">&quot;DES&quot;</span>);</span><br><span class="line"><span class="type">SecureRandom</span> <span class="variable">random</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">SecureRandom</span>();</span><br><span class="line">kg.init(random);</span><br><span class="line"><span class="type">SecretKey</span> <span class="variable">secretKey</span> <span class="operator">=</span> kg.generateKey();</span><br></pre></td></tr></table></figure>

<p>å»ºè®®ä½¿ç”¨éšæœºæ•°æ¥åˆå§‹åŒ–å¯†é’¥çš„ç”Ÿæˆã€‚</p>
<p>ï¼ˆ2ï¼‰åˆå§‹åŒ–å¯†ç å¯¹è±¡</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">Cipher</span> <span class="variable">cipher</span> <span class="operator">=</span> Cipher.getInstance(<span class="string">&quot;DES/ECB/PKCS5Padding&quot;</span>);</span><br><span class="line">cipher.init(Cipher.ENCRYPT_MODE, secretKey);</span><br></pre></td></tr></table></figure>

<p><code>ENCRYPT_MODE</code>ï¼šåŠ å¯†æ¨¡å¼</p>
<p><code>DECRYPT_MODE</code>ï¼šè§£å¯†æ¨¡å¼</p>
<p>ï¼ˆ3ï¼‰æ‰§è¡Œ</p>
<figure class="highlight abnf"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">String plaintext <span class="operator">=</span> <span class="string">&quot;Hello World&quot;</span><span class="comment">;</span></span><br><span class="line">byte[] ciphertext <span class="operator">=</span> cipher.doFinal(plaintext.getBytes())<span class="comment">;</span></span><br></pre></td></tr></table></figure>

<p>ä¸€ä¸ªå®Œæ•´çš„ DES åŠ å¯†è§£å¯†èŒƒä¾‹</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> java.nio.charset.StandardCharsets;</span><br><span class="line"><span class="keyword">import</span> java.security.*;</span><br><span class="line"><span class="keyword">import</span> java.util.Base64;</span><br><span class="line"><span class="keyword">import</span> javax.crypto.*;</span><br><span class="line"><span class="keyword">import</span> javax.crypto.spec.IvParameterSpec;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * DESå®‰å…¨ç¼–ç ï¼šæ˜¯ç»å…¸çš„å¯¹ç§°åŠ å¯†ç®—æ³•ã€‚å¯†é’¥ä»…56ä½ï¼Œä¸”è¿­ä»£æ¬¡æ•°åå°‘ã€‚å·²è¢«è§†ä¸ºå¹¶ä¸å®‰å…¨çš„åŠ å¯†ç®—æ³•ã€‚</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> Zhang Peng</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@since</span> 2016å¹´7æœˆ14æ—¥</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">DESCoder</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="type">String</span> <span class="variable">KEY_ALGORITHM_DES</span> <span class="operator">=</span> <span class="string">&quot;DES&quot;</span>;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="type">String</span> <span class="variable">CIPHER_DES_DEFAULT</span> <span class="operator">=</span> <span class="string">&quot;DES&quot;</span>;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="type">String</span> <span class="variable">CIPHER_DES_ECB_PKCS5PADDING</span> <span class="operator">=</span> <span class="string">&quot;DES/ECB/PKCS5Padding&quot;</span>; <span class="comment">// ç®—æ³•/æ¨¡å¼/è¡¥ç æ–¹å¼</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="type">String</span> <span class="variable">CIPHER_DES_CBC_PKCS5PADDING</span> <span class="operator">=</span> <span class="string">&quot;DES/CBC/PKCS5Padding&quot;</span>;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="type">String</span> <span class="variable">CIPHER_DES_CBC_NOPADDING</span> <span class="operator">=</span> <span class="string">&quot;DES/CBC/NoPadding&quot;</span>;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="type">String</span> <span class="variable">SEED</span> <span class="operator">=</span> <span class="string">&quot;%%%today is nice***&quot;</span>; <span class="comment">// ç”¨äºç”Ÿæˆéšæœºæ•°çš„ç§å­</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> Key key;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> Cipher cipher;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> String transformation;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">DESCoder</span><span class="params">()</span> <span class="keyword">throws</span> NoSuchAlgorithmException, NoSuchPaddingException, NoSuchProviderException &#123;</span><br><span class="line">        <span class="built_in">this</span>.key = initKey();</span><br><span class="line">        <span class="built_in">this</span>.cipher = Cipher.getInstance(CIPHER_DES_DEFAULT);</span><br><span class="line">        <span class="built_in">this</span>.transformation = CIPHER_DES_DEFAULT;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * æ ¹æ®éšæœºæ•°ç§å­ç”Ÿæˆä¸€ä¸ªå¯†é’¥</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span> Key</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@throws</span> NoSuchAlgorithmException</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@throws</span> NoSuchProviderException</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@author</span> Zhang Peng</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@since</span> 2016å¹´7æœˆ14æ—¥</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">private</span> Key <span class="title function_">initKey</span><span class="params">()</span> <span class="keyword">throws</span> NoSuchAlgorithmException, NoSuchProviderException &#123;</span><br><span class="line">        <span class="comment">// æ ¹æ®ç§å­ç”Ÿæˆä¸€ä¸ªå®‰å…¨çš„éšæœºæ•°</span></span><br><span class="line">        <span class="type">SecureRandom</span> <span class="variable">secureRandom</span> <span class="operator">=</span> <span class="literal">null</span>;</span><br><span class="line">        secureRandom = <span class="keyword">new</span> <span class="title class_">SecureRandom</span>(SEED.getBytes());</span><br><span class="line"></span><br><span class="line">        <span class="type">KeyGenerator</span> <span class="variable">keyGen</span> <span class="operator">=</span> KeyGenerator.getInstance(KEY_ALGORITHM_DES);</span><br><span class="line">        keyGen.init(secureRandom);</span><br><span class="line">        <span class="keyword">return</span> keyGen.generateKey();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">DESCoder</span><span class="params">(String transformation)</span></span><br><span class="line">        <span class="keyword">throws</span> NoSuchAlgorithmException, NoSuchPaddingException, NoSuchProviderException &#123;</span><br><span class="line">        <span class="built_in">this</span>.key = initKey();</span><br><span class="line">        <span class="built_in">this</span>.cipher = Cipher.getInstance(transformation);</span><br><span class="line">        <span class="built_in">this</span>.transformation = transformation;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * åŠ å¯†</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> input æ˜æ–‡</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span> byte[] å¯†æ–‡</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@throws</span> InvalidKeyException</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@throws</span> IllegalBlockSizeException</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@throws</span> BadPaddingException</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@throws</span> InvalidAlgorithmParameterException</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@author</span> Zhang Peng</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@since</span> 2016å¹´7æœˆ20æ—¥</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="type">byte</span>[] encrypt(<span class="type">byte</span>[] input) <span class="keyword">throws</span> InvalidKeyException, IllegalBlockSizeException, BadPaddingException,</span><br><span class="line">        InvalidAlgorithmParameterException &#123;</span><br><span class="line">        <span class="keyword">if</span> (transformation.equals(CIPHER_DES_CBC_PKCS5PADDING) || transformation.equals(CIPHER_DES_CBC_NOPADDING)) &#123;</span><br><span class="line">            cipher.init(Cipher.ENCRYPT_MODE, key, <span class="keyword">new</span> <span class="title class_">IvParameterSpec</span>(getIV()));</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            cipher.init(Cipher.ENCRYPT_MODE, key);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> cipher.doFinal(input);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * è§£å¯†</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> input å¯†æ–‡</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span> byte[] æ˜æ–‡</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@throws</span> InvalidKeyException</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@throws</span> IllegalBlockSizeException</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@throws</span> BadPaddingException</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@throws</span> InvalidAlgorithmParameterException</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@author</span> Zhang Peng</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@since</span> 2016å¹´7æœˆ20æ—¥</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="type">byte</span>[] decrypt(<span class="type">byte</span>[] input) <span class="keyword">throws</span> InvalidKeyException, IllegalBlockSizeException, BadPaddingException,</span><br><span class="line">        InvalidAlgorithmParameterException &#123;</span><br><span class="line">        <span class="keyword">if</span> (transformation.equals(CIPHER_DES_CBC_PKCS5PADDING) || transformation.equals(CIPHER_DES_CBC_NOPADDING)) &#123;</span><br><span class="line">            cipher.init(Cipher.DECRYPT_MODE, key, <span class="keyword">new</span> <span class="title class_">IvParameterSpec</span>(getIV()));</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            cipher.init(Cipher.DECRYPT_MODE, key);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> cipher.doFinal(input);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="type">byte</span>[] getIV() &#123;</span><br><span class="line">        <span class="type">String</span> <span class="variable">iv</span> <span class="operator">=</span> <span class="string">&quot;01234567&quot;</span>; <span class="comment">// IV length: must be 8 bytes long</span></span><br><span class="line">        <span class="keyword">return</span> iv.getBytes();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> Exception &#123;</span><br><span class="line">        <span class="type">DESCoder</span> <span class="variable">aes</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">DESCoder</span>(CIPHER_DES_CBC_PKCS5PADDING);</span><br><span class="line"></span><br><span class="line">        <span class="type">String</span> <span class="variable">msg</span> <span class="operator">=</span> <span class="string">&quot;Hello World!&quot;</span>;</span><br><span class="line">        System.out.println(<span class="string">&quot;åŸæ–‡: &quot;</span> + msg);</span><br><span class="line">        <span class="type">byte</span>[] encoded = aes.encrypt(msg.getBytes(StandardCharsets.UTF_8));</span><br><span class="line">        <span class="type">String</span> <span class="variable">encodedBase64</span> <span class="operator">=</span> Base64.getUrlEncoder().encodeToString(encoded);</span><br><span class="line">        System.out.println(<span class="string">&quot;å¯†æ–‡: &quot;</span> + encodedBase64);</span><br><span class="line"></span><br><span class="line">        <span class="type">byte</span>[] decodedBase64 = Base64.getUrlDecoder().decode(encodedBase64);</span><br><span class="line">        <span class="type">byte</span>[] decoded = aes.decrypt(decodedBase64);</span><br><span class="line">        System.out.println(<span class="string">&quot;æ˜æ–‡: &quot;</span> + <span class="keyword">new</span> <span class="title class_">String</span>(decoded));</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><strong>è¾“å‡º</strong></p>
<figure class="highlight makefile"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="section">åŸæ–‡: Hello World!</span></span><br><span class="line"><span class="section">å¯†æ–‡: TtnEu9ezNQtxFKpmq_37Qw==</span></span><br><span class="line"><span class="section">æ˜æ–‡: Hello World!</span></span><br></pre></td></tr></table></figure>

<h4 id="åŸºäºå£ä»¤åŠ å¯†çš„æµç¨‹ï¼ˆPBEï¼‰"><a href="#åŸºäºå£ä»¤åŠ å¯†çš„æµç¨‹ï¼ˆPBEï¼‰" class="headerlink" title="åŸºäºå£ä»¤åŠ å¯†çš„æµç¨‹ï¼ˆPBEï¼‰"></a>åŸºäºå£ä»¤åŠ å¯†çš„æµç¨‹ï¼ˆPBEï¼‰</h4><p>DESã€DESedeã€AESã€IDEA è¿™å‡ ç§ç®—æ³•çš„åº”ç”¨æ¨¡å‹å‡ ä¹å¦‚å‡ºä¸€è¾™ã€‚</p>
<p>ä½†æ˜¯ï¼Œå¹¶éæ‰€æœ‰å¯¹ç§°åŠ å¯†ç®—æ³•éƒ½æ˜¯å¦‚æ­¤ã€‚</p>
<p>åŸºäºå£ä»¤åŠ å¯†(Password Based Encryption, PBE)æ˜¯ä¸€ç§åŸºäºå£ä»¤åŠ å¯†çš„ç®—æ³•ã€‚å…¶ç‰¹ç‚¹æ˜¯ï¼šå£ä»¤ç”±ç”¨æˆ·è‡ªå·±æŒç®¡ï¼Œé‡‡ç”¨éšæœºæ•°ï¼ˆè¿™é‡Œå«åšç›ï¼‰æ‚å‡‘å¤šé‡åŠ å¯†ç­‰æ–¹æ³•ä¿è¯æ•°æ®çš„å®‰å…¨æ€§ã€‚</p>
<p>PBE æ²¡æœ‰å¯†é’¥æ¦‚å¿µï¼Œå¯†é’¥åœ¨å…¶ä»–å¯¹ç§°åŠ å¯†ç®—æ³•ä¸­æ˜¯ç»è¿‡è®¡ç®—å¾—å‡ºçš„ï¼ŒPBE åˆ™ä½¿ç”¨å£ä»¤æ›¿ä»£äº†å¯†é’¥ã€‚</p>
<p>æµç¨‹ï¼š</p>
<p><img src="https://raw.githubusercontent.com/dunwu/images/dev/cs/java/advanced/password-based-encryption-progress.png" alt="img"></p>
<p>æ­¥éª¤å¦‚ä¸‹ï¼š</p>
<p><strong>ï¼ˆ1ï¼‰äº§ç”Ÿç›</strong></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">SecureRandom</span> <span class="variable">secureRandom</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">SecureRandom</span>();</span><br><span class="line"><span class="type">byte</span>[] salt = secureRandom.generateSeed(<span class="number">8</span>); <span class="comment">// ç›é•¿åº¦å¿…é¡»ä¸º8å­—èŠ‚</span></span><br></pre></td></tr></table></figure>

<p><strong>ï¼ˆ2ï¼‰æ ¹æ®å¯†ç äº§ç”Ÿ Key</strong></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">String</span> <span class="variable">password</span> <span class="operator">=</span> <span class="string">&quot;123456&quot;</span>;</span><br><span class="line"><span class="type">PBEKeySpec</span> <span class="variable">keySpec</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">PBEKeySpec</span>(password.toCharArray());</span><br><span class="line"><span class="type">SecretKeyFactory</span> <span class="variable">keyFactory</span> <span class="operator">=</span> SecretKeyFactory.getInstance(KEY_ALGORITHM);</span><br><span class="line"><span class="type">SecretKey</span> <span class="variable">secretKey</span> <span class="operator">=</span> keyFactory.generateSecret(keySpec);</span><br></pre></td></tr></table></figure>

<p><strong>ï¼ˆ3ï¼‰åˆå§‹åŒ–åŠ å¯†æˆ–è§£å¯†å¯¹è±¡</strong></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">PBEParameterSpec</span> <span class="variable">paramSpec</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">PBEParameterSpec</span>(salt, ITERATION_COUNT);</span><br><span class="line"><span class="type">Cipher</span> <span class="variable">cipher</span> <span class="operator">=</span> Cipher.getInstance(KEY_ALGORITHM);</span><br><span class="line">cipher.init(Cipher.ENCRYPT_MODE, secretKey, paramSpec);</span><br></pre></td></tr></table></figure>

<p><strong>ï¼ˆ4ï¼‰æ‰§è¡Œ</strong></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">byte</span>[] plaintext = <span class="string">&quot;Hello World&quot;</span>.getBytes();</span><br><span class="line"><span class="type">byte</span>[] ciphertext = cipher.doFinal(plaintext);</span><br></pre></td></tr></table></figure>

<p>ï¼ˆ5ï¼‰å®Œæ•´ PBE ç¤ºä¾‹</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> java.security.Key;</span><br><span class="line"><span class="keyword">import</span> java.security.SecureRandom;</span><br><span class="line"><span class="keyword">import</span> java.util.Base64;</span><br><span class="line"><span class="keyword">import</span> javax.crypto.Cipher;</span><br><span class="line"><span class="keyword">import</span> javax.crypto.SecretKey;</span><br><span class="line"><span class="keyword">import</span> javax.crypto.SecretKeyFactory;</span><br><span class="line"><span class="keyword">import</span> javax.crypto.spec.PBEKeySpec;</span><br><span class="line"><span class="keyword">import</span> javax.crypto.spec.PBEParameterSpec;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * åŸºäºå£ä»¤åŠ å¯†(Password Based Encryption, PBE)ï¼Œæ˜¯ä¸€ç§å¯¹ç§°åŠ å¯†ç®—æ³•ã€‚ å…¶ç‰¹ç‚¹æ˜¯ï¼šå£ä»¤ç”±ç”¨æˆ·è‡ªå·±æŒç®¡ï¼Œé‡‡ç”¨éšæœºæ•°ï¼ˆè¿™é‡Œå«åšç›ï¼‰æ‚å‡‘å¤šé‡åŠ å¯†ç­‰æ–¹æ³•ä¿è¯æ•°æ®çš„å®‰å…¨æ€§ã€‚</span></span><br><span class="line"><span class="comment"> * PBEæ²¡æœ‰å¯†é’¥æ¦‚å¿µï¼Œå¯†é’¥åœ¨å…¶ä»–å¯¹ç§°åŠ å¯†ç®—æ³•ä¸­æ˜¯ç»è¿‡è®¡ç®—å¾—å‡ºçš„ï¼ŒPBEåˆ™ä½¿ç”¨å£ä»¤æ›¿ä»£äº†å¯†é’¥ã€‚</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> Zhang Peng</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@since</span> 2016å¹´7æœˆ20æ—¥</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">PBECoder</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="type">String</span> <span class="variable">KEY_ALGORITHM</span> <span class="operator">=</span> <span class="string">&quot;PBEWITHMD5andDES&quot;</span>;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="type">int</span> <span class="variable">ITERATION_COUNT</span> <span class="operator">=</span> <span class="number">100</span>;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> Key key;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="type">byte</span>[] salt;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">PBECoder</span><span class="params">(String password)</span> <span class="keyword">throws</span> Exception &#123;</span><br><span class="line">        <span class="built_in">this</span>.salt = initSalt();</span><br><span class="line">        <span class="built_in">this</span>.key = initKey(password);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="type">byte</span>[] initSalt() &#123;</span><br><span class="line">        <span class="type">SecureRandom</span> <span class="variable">secureRandom</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">SecureRandom</span>();</span><br><span class="line">        <span class="keyword">return</span> secureRandom.generateSeed(<span class="number">8</span>); <span class="comment">// ç›é•¿åº¦å¿…é¡»ä¸º8å­—èŠ‚</span></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> Key <span class="title function_">initKey</span><span class="params">(String password)</span> <span class="keyword">throws</span> Exception &#123;</span><br><span class="line">        <span class="type">PBEKeySpec</span> <span class="variable">keySpec</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">PBEKeySpec</span>(password.toCharArray());</span><br><span class="line">        <span class="type">SecretKeyFactory</span> <span class="variable">keyFactory</span> <span class="operator">=</span> SecretKeyFactory.getInstance(KEY_ALGORITHM);</span><br><span class="line">        <span class="keyword">return</span> keyFactory.generateSecret(keySpec);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="type">byte</span>[] encrypt(<span class="type">byte</span>[] plaintext) <span class="keyword">throws</span> Exception &#123;</span><br><span class="line">        <span class="type">PBEParameterSpec</span> <span class="variable">paramSpec</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">PBEParameterSpec</span>(salt, ITERATION_COUNT);</span><br><span class="line">        <span class="type">Cipher</span> <span class="variable">cipher</span> <span class="operator">=</span> Cipher.getInstance(KEY_ALGORITHM);</span><br><span class="line">        cipher.init(Cipher.ENCRYPT_MODE, key, paramSpec);</span><br><span class="line">        <span class="keyword">return</span> cipher.doFinal(plaintext);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="type">byte</span>[] decrypt(<span class="type">byte</span>[] ciphertext) <span class="keyword">throws</span> Exception &#123;</span><br><span class="line">        <span class="type">PBEParameterSpec</span> <span class="variable">paramSpec</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">PBEParameterSpec</span>(salt, ITERATION_COUNT);</span><br><span class="line">        <span class="type">Cipher</span> <span class="variable">cipher</span> <span class="operator">=</span> Cipher.getInstance(KEY_ALGORITHM);</span><br><span class="line">        cipher.init(Cipher.DECRYPT_MODE, key, paramSpec);</span><br><span class="line">        <span class="keyword">return</span> cipher.doFinal(ciphertext);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">test1</span><span class="params">()</span> <span class="keyword">throws</span> Exception &#123;</span><br><span class="line"></span><br><span class="line">        <span class="comment">// äº§ç”Ÿç›</span></span><br><span class="line">        <span class="type">SecureRandom</span> <span class="variable">secureRandom</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">SecureRandom</span>();</span><br><span class="line">        <span class="type">byte</span>[] salt = secureRandom.generateSeed(<span class="number">8</span>); <span class="comment">// ç›é•¿åº¦å¿…é¡»ä¸º8å­—èŠ‚</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">// äº§ç”ŸKey</span></span><br><span class="line">        <span class="type">String</span> <span class="variable">password</span> <span class="operator">=</span> <span class="string">&quot;123456&quot;</span>;</span><br><span class="line">        <span class="type">PBEKeySpec</span> <span class="variable">keySpec</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">PBEKeySpec</span>(password.toCharArray());</span><br><span class="line">        <span class="type">SecretKeyFactory</span> <span class="variable">keyFactory</span> <span class="operator">=</span> SecretKeyFactory.getInstance(KEY_ALGORITHM);</span><br><span class="line">        <span class="type">SecretKey</span> <span class="variable">secretKey</span> <span class="operator">=</span> keyFactory.generateSecret(keySpec);</span><br><span class="line"></span><br><span class="line">        <span class="type">PBEParameterSpec</span> <span class="variable">paramSpec</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">PBEParameterSpec</span>(salt, ITERATION_COUNT);</span><br><span class="line">        <span class="type">Cipher</span> <span class="variable">cipher</span> <span class="operator">=</span> Cipher.getInstance(KEY_ALGORITHM);</span><br><span class="line">        cipher.init(Cipher.ENCRYPT_MODE, secretKey, paramSpec);</span><br><span class="line"></span><br><span class="line">        <span class="type">byte</span>[] plaintext = <span class="string">&quot;Hello World&quot;</span>.getBytes();</span><br><span class="line">        <span class="type">byte</span>[] ciphertext = cipher.doFinal(plaintext);</span><br><span class="line">        <span class="keyword">new</span> <span class="title class_">String</span>(ciphertext);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> Exception &#123;</span><br><span class="line">        <span class="type">PBECoder</span> <span class="variable">encode</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">PBECoder</span>(<span class="string">&quot;123456&quot;</span>);</span><br><span class="line">        <span class="type">String</span> <span class="variable">message</span> <span class="operator">=</span> <span class="string">&quot;Hello World!&quot;</span>;</span><br><span class="line">        <span class="type">byte</span>[] ciphertext = encode.encrypt(message.getBytes());</span><br><span class="line">        <span class="type">byte</span>[] plaintext = encode.decrypt(ciphertext);</span><br><span class="line"></span><br><span class="line">        System.out.println(<span class="string">&quot;åŸæ–‡ï¼š&quot;</span> + message);</span><br><span class="line">        System.out.println(<span class="string">&quot;å¯†æ–‡ï¼š&quot;</span> + Base64.getUrlEncoder().encodeToString(ciphertext));</span><br><span class="line">        System.out.println(<span class="string">&quot;æ˜æ–‡ï¼š&quot;</span> + <span class="keyword">new</span> <span class="title class_">String</span>(plaintext));</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="éå¯¹ç§°åŠ å¯†"><a href="#éå¯¹ç§°åŠ å¯†" class="headerlink" title="éå¯¹ç§°åŠ å¯†"></a>éå¯¹ç§°åŠ å¯†</h2><h3 id="éå¯¹ç§°åŠ å¯†æ¦‚è¿°"><a href="#éå¯¹ç§°åŠ å¯†æ¦‚è¿°" class="headerlink" title="éå¯¹ç§°åŠ å¯†æ¦‚è¿°"></a>éå¯¹ç§°åŠ å¯†æ¦‚è¿°</h3><p>éå¯¹ç§°åŠ å¯†å¸¸ç”¨ç®—æ³•ï¼šDH(Diffie-Hellmanï¼Œå¯†é’¥äº¤æ¢ç®—æ³•)ã€RSA</p>
<p>éå¯¹ç§°åŠ å¯†ç®—æ³•å’Œå¯¹ç§°åŠ å¯†ç®—æ³•çš„ä¸»è¦å·®åˆ«åœ¨äºéå¯¹ç§°åŠ å¯†ç®—æ³•ç”¨äºåŠ å¯†å’Œè§£å¯†çš„å¯†é’¥æ˜¯ä¸åŒçš„ã€‚ä¸€ä¸ªå…¬å¼€ï¼Œç§°ä¸ºå…¬é’¥ï¼ˆpublic keyï¼‰ï¼›ä¸€ä¸ªä¿å¯†ï¼Œç§°ä¸ºç§é’¥ï¼ˆprivate keyï¼‰ã€‚å› æ­¤ï¼Œéå¯¹ç§°åŠ å¯†ç®—æ³•ä¹Ÿç§°ä¸ºåŒé’¥åŠ å¯†ç®—æ³•æˆ–å…¬é’¥åŠ å¯†ç®—æ³•ã€‚</p>
<p>éå¯¹ç§°åŠ å¯†ç‰¹ç‚¹ï¼š</p>
<ul>
<li>ä¼˜ç‚¹ï¼šéå¯¹ç§°åŠ å¯†ç®—æ³•è§£å†³äº†å¯¹ç§°åŠ å¯†ç®—æ³•çš„å¯†é’¥åˆ†é…é—®é¢˜ï¼Œå¹¶æå¤§åœ°æé«˜äº†ç®—æ³•å®‰å…¨æ€§ã€‚</li>
<li>ç¼ºç‚¹ï¼šç®—æ³•æ¯”å¯¹ç§°ç®—æ³•æ›´å¤æ‚ï¼Œå› æ­¤åŠ å¯†ã€è§£å¯†é€Ÿåº¦éƒ½æ¯”å¯¹ç§°ç®—æ³•æ…¢å¾ˆå¤šã€‚</li>
</ul>
<p><img src="https://raw.githubusercontent.com/dunwu/images/dev/cs/java/advanced/asymmetric-encryption.png" alt="img"></p>
<p>éå¯¹ç§°åŠ å¯†ç®—æ³•å®ç°æœºå¯†ä¿¡æ¯äº¤æ¢çš„åŸºæœ¬è¿‡ç¨‹æ˜¯ï¼šç”²æ–¹ç”Ÿæˆä¸€å¯¹å¯†é’¥å¹¶å°†å…¶ä¸­çš„ä¸€æŠŠä½œä¸ºå…¬ç”¨å¯†é’¥å‘å…¶å®ƒæ–¹å…¬å¼€ï¼›å¾—åˆ°è¯¥å…¬ç”¨å¯†é’¥çš„ä¹™æ–¹ä½¿ç”¨è¯¥å¯†é’¥å¯¹æœºå¯†ä¿¡æ¯è¿›è¡ŒåŠ å¯†åå†å‘é€ç»™ç”²æ–¹ï¼›ç”²æ–¹å†ç”¨è‡ªå·±ä¿å­˜çš„å¦ä¸€æŠŠä¸“ç”¨å¯†é’¥å¯¹åŠ å¯†åçš„ä¿¡æ¯è¿›è¡Œè§£å¯†ã€‚</p>
<p>å¦ä¸€æ–¹é¢ï¼Œç”²æ–¹å¯ä»¥ä½¿ç”¨ä¹™æ–¹çš„å…¬é’¥å¯¹æœºå¯†ä¿¡æ¯è¿›è¡Œç­¾ååå†å‘é€ç»™ä¹™æ–¹ï¼›ä¹™æ–¹å†ç”¨è‡ªå·±çš„ç§åŒ™å¯¹æ•°æ®è¿›è¡ŒéªŒè¯ã€‚</p>
<p>ç”²æ–¹åªèƒ½ç”¨å…¶ç§é’¥è§£å¯†ï¼Œç”±å…¶å…¬é’¥åŠ å¯†åçš„ä»»ä½•ä¿¡æ¯ã€‚ éå¯¹ç§°åŠ å¯†ç®—æ³•çš„ä¿å¯†æ€§æ¯”è¾ƒå¥½ï¼Œå®ƒæ¶ˆé™¤äº†æœ€ç»ˆç”¨æˆ·äº¤æ¢å¯†é’¥çš„éœ€è¦ã€‚</p>
<h3 id="éå¯¹ç§°åŠ å¯†ç®—æ³•åº”ç”¨"><a href="#éå¯¹ç§°åŠ å¯†ç®—æ³•åº”ç”¨" class="headerlink" title="éå¯¹ç§°åŠ å¯†ç®—æ³•åº”ç”¨"></a>éå¯¹ç§°åŠ å¯†ç®—æ³•åº”ç”¨</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> java.nio.charset.StandardCharsets;</span><br><span class="line"><span class="keyword">import</span> java.security.*;</span><br><span class="line"><span class="keyword">import</span> java.security.spec.PKCS8EncodedKeySpec;</span><br><span class="line"><span class="keyword">import</span> java.security.spec.X509EncodedKeySpec;</span><br><span class="line"><span class="keyword">import</span> java.util.Base64;</span><br><span class="line"><span class="keyword">import</span> javax.crypto.Cipher;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * RSAå®‰å…¨ç¼–ç ï¼šéå¯¹ç§°åŠ å¯†ç®—æ³•ã€‚å®ƒæ—¢å¯ä»¥ç”¨æ¥åŠ å¯†ã€è§£å¯†ï¼Œä¹Ÿå¯ä»¥ç”¨æ¥åšæ•°å­—ç­¾å</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> Zhang Peng</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@since</span> 2016å¹´7æœˆ20æ—¥</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">RSACoder</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">final</span> <span class="keyword">static</span> <span class="type">String</span> <span class="variable">KEY_ALGORITHM</span> <span class="operator">=</span> <span class="string">&quot;RSA&quot;</span>;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">final</span> <span class="keyword">static</span> <span class="type">String</span> <span class="variable">SIGN_ALGORITHM</span> <span class="operator">=</span> <span class="string">&quot;MD5WithRSA&quot;</span>;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> KeyPair keyPair;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">RSACoder</span><span class="params">()</span> <span class="keyword">throws</span> Exception &#123;</span><br><span class="line">        <span class="built_in">this</span>.keyPair = initKeyPair();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> KeyPair <span class="title function_">initKeyPair</span><span class="params">()</span> <span class="keyword">throws</span> Exception &#123;</span><br><span class="line">        <span class="comment">// KeyPairGeneratorç±»ç”¨äºç”Ÿæˆå…¬é’¥å’Œç§é’¥å¯¹ï¼ŒåŸºäºRSAç®—æ³•ç”Ÿæˆå¯¹è±¡</span></span><br><span class="line">        <span class="type">KeyPairGenerator</span> <span class="variable">keyPairGen</span> <span class="operator">=</span> KeyPairGenerator.getInstance(KEY_ALGORITHM);</span><br><span class="line">        <span class="comment">// åˆå§‹åŒ–å¯†é’¥å¯¹ç”Ÿæˆå™¨ï¼Œå¯†é’¥å¤§å°ä¸º1024ä½</span></span><br><span class="line">        keyPairGen.initialize(<span class="number">1024</span>);</span><br><span class="line">        <span class="comment">// ç”Ÿæˆä¸€ä¸ªå¯†é’¥å¯¹</span></span><br><span class="line">        <span class="keyword">return</span> keyPairGen.genKeyPair();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="type">byte</span>[] encryptByPrivateKey(<span class="type">byte</span>[] plaintext, <span class="type">byte</span>[] key) <span class="keyword">throws</span> Exception &#123;</span><br><span class="line">        <span class="type">PKCS8EncodedKeySpec</span> <span class="variable">keySpec</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">PKCS8EncodedKeySpec</span>(key);</span><br><span class="line">        <span class="type">KeyFactory</span> <span class="variable">keyFactory</span> <span class="operator">=</span> KeyFactory.getInstance(KEY_ALGORITHM);</span><br><span class="line">        <span class="type">PrivateKey</span> <span class="variable">privateKey</span> <span class="operator">=</span> keyFactory.generatePrivate(keySpec);</span><br><span class="line">        <span class="type">Cipher</span> <span class="variable">cipher</span> <span class="operator">=</span> Cipher.getInstance(keyFactory.getAlgorithm());</span><br><span class="line">        cipher.init(Cipher.ENCRYPT_MODE, privateKey);</span><br><span class="line">        <span class="keyword">return</span> cipher.doFinal(plaintext);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="type">byte</span>[] decryptByPublicKey(<span class="type">byte</span>[] ciphertext, <span class="type">byte</span>[] key) <span class="keyword">throws</span> Exception &#123;</span><br><span class="line">        <span class="type">X509EncodedKeySpec</span> <span class="variable">keySpec</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">X509EncodedKeySpec</span>(key);</span><br><span class="line">        <span class="type">KeyFactory</span> <span class="variable">keyFactory</span> <span class="operator">=</span> KeyFactory.getInstance(KEY_ALGORITHM);</span><br><span class="line">        <span class="type">PublicKey</span> <span class="variable">publicKey</span> <span class="operator">=</span> keyFactory.generatePublic(keySpec);</span><br><span class="line">        <span class="type">Cipher</span> <span class="variable">cipher</span> <span class="operator">=</span> Cipher.getInstance(keyFactory.getAlgorithm());</span><br><span class="line">        cipher.init(Cipher.DECRYPT_MODE, publicKey);</span><br><span class="line">        <span class="keyword">return</span> cipher.doFinal(ciphertext);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="type">byte</span>[] encryptByPublicKey(<span class="type">byte</span>[] plaintext, <span class="type">byte</span>[] key) <span class="keyword">throws</span> Exception &#123;</span><br><span class="line">        <span class="type">X509EncodedKeySpec</span> <span class="variable">keySpec</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">X509EncodedKeySpec</span>(key);</span><br><span class="line">        <span class="type">KeyFactory</span> <span class="variable">keyFactory</span> <span class="operator">=</span> KeyFactory.getInstance(KEY_ALGORITHM);</span><br><span class="line">        <span class="type">PublicKey</span> <span class="variable">publicKey</span> <span class="operator">=</span> keyFactory.generatePublic(keySpec);</span><br><span class="line">        <span class="type">Cipher</span> <span class="variable">cipher</span> <span class="operator">=</span> Cipher.getInstance(keyFactory.getAlgorithm());</span><br><span class="line">        cipher.init(Cipher.ENCRYPT_MODE, publicKey);</span><br><span class="line">        <span class="keyword">return</span> cipher.doFinal(plaintext);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="type">byte</span>[] decryptByPrivateKey(<span class="type">byte</span>[] ciphertext, <span class="type">byte</span>[] key) <span class="keyword">throws</span> Exception &#123;</span><br><span class="line">        <span class="type">PKCS8EncodedKeySpec</span> <span class="variable">keySpec</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">PKCS8EncodedKeySpec</span>(key);</span><br><span class="line">        <span class="type">KeyFactory</span> <span class="variable">keyFactory</span> <span class="operator">=</span> KeyFactory.getInstance(KEY_ALGORITHM);</span><br><span class="line">        <span class="type">PrivateKey</span> <span class="variable">privateKey</span> <span class="operator">=</span> keyFactory.generatePrivate(keySpec);</span><br><span class="line">        <span class="type">Cipher</span> <span class="variable">cipher</span> <span class="operator">=</span> Cipher.getInstance(keyFactory.getAlgorithm());</span><br><span class="line">        cipher.init(Cipher.DECRYPT_MODE, privateKey);</span><br><span class="line">        <span class="keyword">return</span> cipher.doFinal(ciphertext);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="type">byte</span>[] signature(<span class="type">byte</span>[] data, <span class="type">byte</span>[] privateKey, RsaSignTypeEn type) <span class="keyword">throws</span> Exception &#123;</span><br><span class="line">        <span class="type">PKCS8EncodedKeySpec</span> <span class="variable">keySpec</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">PKCS8EncodedKeySpec</span>(privateKey);</span><br><span class="line">        <span class="type">KeyFactory</span> <span class="variable">keyFactory</span> <span class="operator">=</span> KeyFactory.getInstance(KEY_ALGORITHM);</span><br><span class="line">        <span class="type">PrivateKey</span> <span class="variable">key</span> <span class="operator">=</span> keyFactory.generatePrivate(keySpec);</span><br><span class="line"></span><br><span class="line">        <span class="type">Signature</span> <span class="variable">signature</span> <span class="operator">=</span> Signature.getInstance(type.name());</span><br><span class="line">        signature.initSign(key);</span><br><span class="line">        signature.update(data);</span><br><span class="line">        <span class="keyword">return</span> signature.sign();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="type">byte</span>[] getPrivateKey() &#123;</span><br><span class="line">        <span class="keyword">return</span> keyPair.getPrivate().getEncoded();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="type">boolean</span> <span class="title function_">verify</span><span class="params">(<span class="type">byte</span>[] data, <span class="type">byte</span>[] publicKey, <span class="type">byte</span>[] sign, RsaSignTypeEn type)</span> <span class="keyword">throws</span> Exception &#123;</span><br><span class="line">        <span class="type">X509EncodedKeySpec</span> <span class="variable">keySpec</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">X509EncodedKeySpec</span>(publicKey);</span><br><span class="line">        <span class="type">KeyFactory</span> <span class="variable">keyFactory</span> <span class="operator">=</span> KeyFactory.getInstance(KEY_ALGORITHM);</span><br><span class="line">        <span class="type">PublicKey</span> <span class="variable">key</span> <span class="operator">=</span> keyFactory.generatePublic(keySpec);</span><br><span class="line"></span><br><span class="line">        <span class="type">Signature</span> <span class="variable">signature</span> <span class="operator">=</span> Signature.getInstance(type.name());</span><br><span class="line">        signature.initVerify(key);</span><br><span class="line">        signature.update(data);</span><br><span class="line">        <span class="keyword">return</span> signature.verify(sign);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="type">byte</span>[] getPublicKey() &#123;</span><br><span class="line">        <span class="keyword">return</span> keyPair.getPublic().getEncoded();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">enum</span> <span class="title class_">RsaSignTypeEn</span> &#123;</span><br><span class="line"></span><br><span class="line">        MD2WithRSA,</span><br><span class="line">        MD5WithRSA,</span><br><span class="line">        SHA1WithRSA</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> Exception &#123;</span><br><span class="line">        <span class="type">String</span> <span class="variable">msg</span> <span class="operator">=</span> <span class="string">&quot;Hello World!&quot;</span>;</span><br><span class="line">        <span class="type">RSACoder</span> <span class="variable">coder</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">RSACoder</span>();</span><br><span class="line">        <span class="comment">// ç§é’¥åŠ å¯†ï¼Œå…¬é’¥è§£å¯†</span></span><br><span class="line">        <span class="type">byte</span>[] ciphertext = coder.encryptByPrivateKey(msg.getBytes(StandardCharsets.UTF_8), coder.keyPair.getPrivate().getEncoded());</span><br><span class="line">        <span class="type">byte</span>[] plaintext = coder.decryptByPublicKey(ciphertext, coder.keyPair.getPublic().getEncoded());</span><br><span class="line"></span><br><span class="line">        <span class="comment">// å…¬é’¥åŠ å¯†ï¼Œç§é’¥è§£å¯†</span></span><br><span class="line">        <span class="type">byte</span>[] ciphertext2 = coder.encryptByPublicKey(msg.getBytes(), coder.keyPair.getPublic().getEncoded());</span><br><span class="line">        <span class="type">byte</span>[] plaintext2 = coder.decryptByPrivateKey(ciphertext2, coder.keyPair.getPrivate().getEncoded());</span><br><span class="line"></span><br><span class="line">        <span class="type">byte</span>[] sign = coder.signature(msg.getBytes(), coder.getPrivateKey(), RsaSignTypeEn.SHA1WithRSA);</span><br><span class="line">        <span class="type">boolean</span> <span class="variable">flag</span> <span class="operator">=</span> coder.verify(msg.getBytes(), coder.getPublicKey(), sign, RsaSignTypeEn.SHA1WithRSA);</span><br><span class="line">        <span class="type">String</span> <span class="variable">result</span> <span class="operator">=</span> flag ? <span class="string">&quot;æ•°å­—ç­¾ååŒ¹é…&quot;</span> : <span class="string">&quot;æ•°å­—ç­¾åä¸åŒ¹é…&quot;</span>;</span><br><span class="line"></span><br><span class="line">        System.out.println(<span class="string">&quot;åŸæ–‡ï¼š&quot;</span> + msg);</span><br><span class="line">        System.out.println(<span class="string">&quot;å…¬é’¥ï¼š&quot;</span> + Base64.getUrlEncoder().encodeToString(coder.keyPair.getPublic().getEncoded()));</span><br><span class="line">        System.out.println(<span class="string">&quot;ç§é’¥ï¼š&quot;</span> + Base64.getUrlEncoder().encodeToString(coder.keyPair.getPrivate().getEncoded()));</span><br><span class="line"></span><br><span class="line">        System.out.println(<span class="string">&quot;============== ç§é’¥åŠ å¯†ï¼Œå…¬é’¥è§£å¯† ==============&quot;</span>);</span><br><span class="line">        System.out.println(<span class="string">&quot;å¯†æ–‡ï¼š&quot;</span> + Base64.getUrlEncoder().encodeToString(ciphertext));</span><br><span class="line">        System.out.println(<span class="string">&quot;æ˜æ–‡ï¼š&quot;</span> + <span class="keyword">new</span> <span class="title class_">String</span>(plaintext));</span><br><span class="line"></span><br><span class="line">        System.out.println(<span class="string">&quot;============== å…¬é’¥åŠ å¯†ï¼Œç§é’¥è§£å¯† ==============&quot;</span>);</span><br><span class="line">        System.out.println(<span class="string">&quot;å¯†æ–‡ï¼š&quot;</span> + Base64.getUrlEncoder().encodeToString(ciphertext2));</span><br><span class="line">        System.out.println(<span class="string">&quot;æ˜æ–‡ï¼š&quot;</span> + <span class="keyword">new</span> <span class="title class_">String</span>(plaintext2));</span><br><span class="line"></span><br><span class="line">        System.out.println(<span class="string">&quot;============== æ•°å­—ç­¾å ==============&quot;</span>);</span><br><span class="line">        System.out.println(<span class="string">&quot;æ•°å­—ç­¾åï¼š&quot;</span> + Base64.getUrlEncoder().encodeToString(sign));</span><br><span class="line">        System.out.println(<span class="string">&quot;éªŒè¯ç»“æœï¼š&quot;</span> + result);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><strong>è¾“å‡º</strong></p>
<figure class="highlight smali"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">åŸæ–‡ï¼šHello World!</span><br><span class="line">å…¬é’¥ï¼šMIGfMA0GCSqGSIb3DQEBAQUAA4GNADCBiQKBgQCzPtRLErTUcYtr8GmIpvbso7FN18thuEq02U21mh7TA4FH4TjvNgOZrZEORYu94dxrPdnrPjh0p62P5pDIjx_dtGlZr0aGWgtTvBbPwAKE4keXyPqv4VV6iXRzyQ2HdOvFOovim5eu0Tu_TxGeNpFfp0pYj2LXCzpsgSrdUPuPmwIDAQAB</span><br><span class="line">ç§é’¥ï¼šMIICdwIBADANBgkqhkiG9w0BAQEFAASCAmEwggJdAgEAAoGBALM-1EsStNRxi2vwaYim9uyjsU3Xy2G4SrTZTbWaHtMDgUfhOO82A5mtkQ5Fi73h3Gs92es-OHSnrY_mkMiPH920aVmvRoZaC1O8Fs_AAoTiR5fI-q_hVXqJdHPJDYd068U6i-Kbl67RO79PEZ42kV-nSliPYtcLOmyBKt1Q-4-bAgMBAAECgYBJxOXiL8S0WjajKcKFNxIQuh3Sh6lwgkRcwcI1p0RgW-TtDEg-SuCYctJsKTsl3rq0eDQjmOvrNsc7ngygPidCiTdbD1H6m3tLrebBB-wZdXMSWPsHtQJsq4dE0e93mmfysciOP6QExOs0JqVjTyyBSK37LpUcLdalj2IJDtC0gQJBAPfMngZAuIPmXued7PUuWNBuwxnkmdMcs308eC_9vnLLXWhDB9xKMuXCMwqk16MJ6j1FQWtJu62T21yniWWQHIsCQQC5LWqKfRxVukgnBg0Pa95NVWWY01Yttnb125JsLxeKbR97KU4VgBaBcB9TyUdPr9lxAzGFg6Y3A1wfsfukaGsxAkEA1l719oLXHYSWZdmBvTozK14m-qeBS9lwjc9aSmpB8B1u2Vvj2Pd3wLyYW4Tv5-QT-J2JUr-e1TMseqOVgX-CsQJAETRoBq_zFv_0vjNwuTMTd2nsw5M3GY4vZU5eP1Dsxf63gxDmYVcCQEpzjqxPxNaYxEhArJ_7rHbSc1ts_ux4sQJBAIlbGQC4-92foXGzWT80rsqZlMQ8J8Nbjpoo7RUN9tgx60Vkr3xv26Vos77oqdufWlt5IiBZBS9acTA2suav6Qg=</span><br><span class="line">============== ç§é’¥åŠ å¯†ï¼Œå…¬é’¥è§£å¯† ==============</span><br><span class="line">å¯†æ–‡ï¼šqn6iGjSJV45EnH21RYRx2UZfMueqplbm1g3VIpBBQBuF63RdHdSgMJsVPAuB__V0rxpPlU3gR6qLyWu1mpaJ-ix_6KogAH64wqTWqPRh7E6aj767rybNpt9JyVlCmmpy9DiqHAUFWtBJDo34q-a7Fhq9c8bWrJ6jnn47IdmzHfU=</span><br><span class="line">æ˜æ–‡ï¼šHello World!</span><br><span class="line">============== å…¬é’¥åŠ å¯†ï¼Œç§é’¥è§£å¯† ==============</span><br><span class="line">å¯†æ–‡ï¼šfsz2IFs69d7JDrH-yoe5pi5WKQU1Zml7SDSpPqTZUn6muSCjNp6x312deQCXKMGSeAdMpVeb01yZBfa0MT_6eYJYVseU7Rd6bDf6YIg3AZFC41yh5ITiTvQ-XzxugnppS12sLpXSWg0faa5qjcVZnoTX9p7nHr8n20y4CNMI6Rw=</span><br><span class="line">æ˜æ–‡ï¼šHello World!</span><br><span class="line">============== æ•°å­—ç­¾å ==============</span><br><span class="line">æ•°å­—ç­¾åï¼šdTtUUlWX1wRQbW1PcA8O6WJcWcrHinEZRXwgLKEwBOm2DpvHnynvV_HYKS-qFE5_4vJQcPGJ2hZqWbfv1VKLHMUWuiXM7VJk70g3g7BF8i8RWbrCDOxgTR77jrEwidpr1PYJzWJVGq_HP36MxInGFLcVh2sN0fu8MppzsXUENZQ=</span><br><span class="line">éªŒè¯ç»“æœï¼šæ•°å­—ç­¾ååŒ¹é…</span><br></pre></td></tr></table></figure>

<h2 id="æœ¯è¯­"><a href="#æœ¯è¯­" class="headerlink" title="æœ¯è¯­"></a>æœ¯è¯­</h2><ul>
<li>**æ˜æ–‡(Plaintext)**ï¼šæŒ‡å¾…åŠ å¯†ä¿¡æ¯ã€‚æ˜æ–‡å¯ä»¥æ˜¯æ–‡æœ¬æ–‡ä»¶ã€å›¾ç‰‡æ–‡ä»¶ã€äºŒè¿›åˆ¶æ•°æ®ç­‰ã€‚</li>
<li>**å¯†æ–‡(Ciphertext)**ï¼šæŒ‡ç»è¿‡åŠ å¯†åçš„æ˜æ–‡ã€‚å¯†æ–‡é€šå¸¸ä»¥æ–‡æœ¬ã€äºŒè¿›åˆ¶ç­‰å½¢å¼å­˜åœ¨ã€‚</li>
<li>**åŠ å¯†(Encryption)**ï¼šæŒ‡å°†æ˜æ–‡è½¬æ¢ä¸ºå¯†æ–‡çš„è¿‡ç¨‹ã€‚</li>
<li>**è§£å¯†(Decryption)**ï¼šæŒ‡å°†å¯†æ–‡è½¬æ¢ä¸ºæ˜æ–‡çš„è¿‡ç¨‹ã€‚</li>
<li>**åŠ å¯†å¯†é’¥(Encryption Key)**ï¼šæŒ‡é€šè¿‡åŠ å¯†ç®—æ³•è¿›è¡ŒåŠ å¯†æ“ä½œç”¨çš„å¯†é’¥ã€‚</li>
<li>**è§£å¯†å¯†é’¥(Decryption Key)**ï¼šæŒ‡é€šè¿‡è§£å¯†ç®—æ³•è¿›è¡Œè§£å¯†æ“ä½œç”¨çš„å¯†é’¥ã€‚</li>
<li>**ä¿¡é“(Channel)**ï¼šé€šä¿¡çš„é€šé“ï¼Œæ˜¯ä¿¡å·ä¼ è¾“çš„åª’ä»‹ã€‚</li>
</ul>
<h2 id="å‚è€ƒèµ„æ–™"><a href="#å‚è€ƒèµ„æ–™" class="headerlink" title="å‚è€ƒèµ„æ–™"></a>å‚è€ƒèµ„æ–™</h2><ul>
<li><a target="_blank" rel="noopener" href="https://book.douban.com/subject/27165931/">ã€ŠJava æ ¸å¿ƒæŠ€æœ¯ å· II é«˜çº§ç‰¹æ€§ã€‹</a></li>
<li><a target="_blank" rel="noopener" href="https://book.douban.com/subject/25861566/">ã€ŠJava åŠ å¯†ä¸è§£å¯†çš„è‰ºæœ¯ã€‹</a></li>
</ul>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="https://dunwu.github.io/blog/pages/08f153/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/blog/uploads/avatar.gif">
      <meta itemprop="name" content="é’æ‚Ÿ â—¾ Dunwu">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Dunwu Blog">
      <meta itemprop="description" content="é’æ‚Ÿçš„ä¸ªäººåšå®¢">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="undefined | Dunwu Blog">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/blog/pages/08f153/" class="post-title-link" itemprop="url">JVM ä½“ç³»ç»“æ„</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">å‘è¡¨äº</span>

      <time title="åˆ›å»ºæ—¶é—´ï¼š2021-05-24 15:41:47" itemprop="dateCreated datePublished" datetime="2021-05-24T15:41:47+08:00">2021-05-24</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar-check"></i>
      </span>
      <span class="post-meta-item-text">æ›´æ–°äº</span>
      <time title="ä¿®æ”¹æ—¶é—´ï¼š2022-12-23 12:01:44" itemprop="dateModified" datetime="2022-12-23T12:01:44+08:00">2022-12-23</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">åˆ†ç±»äº</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/blog/categories/Java/" itemprop="url" rel="index"><span itemprop="name">Java</span></a>
        </span>
          ï¼Œ
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/blog/categories/Java/JavaSE/" itemprop="url" rel="index"><span itemprop="name">JavaSE</span></a>
        </span>
          ï¼Œ
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/blog/categories/Java/JavaSE/JVM/" itemprop="url" rel="index"><span itemprop="name">JVM</span></a>
        </span>
    </span>

  
    <span class="post-meta-break"></span>
    <span class="post-meta-item" title="æœ¬æ–‡å­—æ•°">
      <span class="post-meta-item-icon">
        <i class="far fa-file-word"></i>
      </span>
      <span class="post-meta-item-text">æœ¬æ–‡å­—æ•°ï¼š</span>
      <span>852</span>
    </span>
    <span class="post-meta-item" title="é˜…è¯»æ—¶é•¿">
      <span class="post-meta-item-icon">
        <i class="far fa-clock"></i>
      </span>
      <span class="post-meta-item-text">é˜…è¯»æ—¶é•¿ &asymp;</span>
      <span>1 åˆ†é’Ÿ</span>
    </span>
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <h1 id="JVM-ä½“ç³»ç»“æ„"><a href="#JVM-ä½“ç³»ç»“æ„" class="headerlink" title="JVM ä½“ç³»ç»“æ„"></a>JVM ä½“ç³»ç»“æ„</h1><blockquote>
<p>JVM èƒ½è·¨å¹³å°å·¥ä½œï¼Œä¸»è¦æ˜¯ç”±äº JVM å±è”½äº†ä¸å„ä¸ªè®¡ç®—æœºå¹³å°ç›¸å…³çš„è½¯ä»¶ã€ç¡¬ä»¶ä¹‹é—´çš„å·®å¼‚ã€‚</p>
</blockquote>
<h2 id="JVM-ç®€ä»‹"><a href="#JVM-ç®€ä»‹" class="headerlink" title="JVM ç®€ä»‹"></a>JVM ç®€ä»‹</h2><h3 id="è®¡ç®—æœºä½“ç³»ç»“æ„"><a href="#è®¡ç®—æœºä½“ç³»ç»“æ„" class="headerlink" title="è®¡ç®—æœºä½“ç³»ç»“æ„"></a>è®¡ç®—æœºä½“ç³»ç»“æ„</h3><p>çœŸå®çš„è®¡ç®—æœºä½“ç³»ç»“æ„çš„æ ¸å¿ƒéƒ¨åˆ†åŒ…å«ï¼š</p>
<ul>
<li>æŒ‡ä»¤é›†</li>
<li>è®¡ç®—å•å…ƒï¼ˆCPUï¼‰</li>
<li>å¯»å€æ–¹å¼</li>
<li>å¯„å­˜å™¨</li>
<li>å­˜å‚¨å•å…ƒ</li>
</ul>
<h3 id="JVM-ä½“ç³»ç»“æ„ç®€ä»‹"><a href="#JVM-ä½“ç³»ç»“æ„ç®€ä»‹" class="headerlink" title="JVM ä½“ç³»ç»“æ„ç®€ä»‹"></a>JVM ä½“ç³»ç»“æ„ç®€ä»‹</h3><p>JVM ä½“ç³»ç»“æ„ä¸è®¡ç®—æœºä½“ç³»ç»“æ„ç›¸ä¼¼ï¼Œå®ƒçš„æ ¸å¿ƒéƒ¨åˆ†åŒ…å«ï¼š</p>
<ul>
<li>JVM æŒ‡ä»¤é›†</li>
<li>ç±»åŠ è½½å™¨</li>
<li>æ‰§è¡Œå¼•æ“ - ç›¸å½“äº JVM çš„ CPU</li>
<li>å†…å­˜åŒº - JVM çš„å­˜å‚¨</li>
<li>æœ¬åœ°æ–¹æ³•è°ƒç”¨ - è°ƒç”¨ C&#x2F;C++ å®ç°çš„æœ¬åœ°æ–¹æ³•</li>
</ul>
<h2 id="Hotspot-æ¶æ„"><a href="#Hotspot-æ¶æ„" class="headerlink" title="Hotspot æ¶æ„"></a>Hotspot æ¶æ„</h2><p>Hotspot æ˜¯æœ€æµè¡Œçš„ JVMã€‚</p>
<p>Java è™šæ‹Ÿæœºçš„ä¸»è¦ç»„ä»¶ï¼ŒåŒ…æ‹¬<strong>ç±»åŠ è½½å™¨</strong>ã€<strong>è¿è¡Œæ—¶æ•°æ®åŒº</strong>å’Œ<strong>æ‰§è¡Œå¼•æ“</strong>ã€‚</p>
<p>Hotspot è™šæ‹Ÿæœºæ‹¥æœ‰ä¸€ä¸ªæ¶æ„ï¼Œå®ƒæ”¯æŒå¼ºå¤§ç‰¹æ€§å’Œèƒ½åŠ›çš„åŸºç¡€å¹³å°ï¼Œæ”¯æŒå®ç°é«˜æ€§èƒ½å’Œå¼ºå¤§çš„å¯ä¼¸ç¼©æ€§çš„èƒ½åŠ›ã€‚ä¸¾ä¸ªä¾‹å­ï¼ŒHotspot è™šæ‹Ÿæœº JIT ç¼–è¯‘å™¨ç”ŸæˆåŠ¨æ€çš„ä¼˜åŒ–ï¼Œæ¢å¥è¯è¯´ï¼Œå®ƒä»¬åœ¨ Java åº”ç”¨æ‰§è¡ŒæœŸåšå‡ºä¼˜åŒ–ï¼Œä¸ºåº•å±‚ç³»ç»Ÿæ¶æ„ç”Ÿæˆé«˜æ€§èƒ½çš„æœ¬åœ°æœºå™¨æŒ‡ä»¤ã€‚å¦å¤–ï¼Œç»è¿‡å®ƒçš„è¿è¡Œæ—¶ç¯å¢ƒå’Œå¤šçº¿ç¨‹åƒåœ¾å›æ”¶æˆç†Ÿçš„è¿›åŒ–å’Œè¿ç»­çš„è®¾è®¡ï¼Œ Hotspot è™šæ‹Ÿæœºåœ¨é«˜å¯ç”¨è®¡ç®—ç³»ç»Ÿä¸Šäº§å‡ºäº†é«˜ä¼¸ç¼©æ€§ã€‚</p>
<div align="center">
<img src="https://raw.githubusercontent.com/dunwu/images/dev/cs/java/javacore/jvm/jvm-hotspot-architecture.png" />
</div>

<h3 id="Hotspot-å…³é”®ç»„ä»¶"><a href="#Hotspot-å…³é”®ç»„ä»¶" class="headerlink" title="Hotspot å…³é”®ç»„ä»¶"></a>Hotspot å…³é”®ç»„ä»¶</h3><p>Java è™šæ‹Ÿæœºæœ‰ä¸‰ä¸ªç»„ä»¶å…³æ³¨ç€ä»€ä¹ˆæ—¶å€™è¿›è¡Œæ€§èƒ½ä¼˜åŒ–ï¼Œå †ç©ºé—´æ˜¯å¯¹è±¡æ‰€å­˜å‚¨çš„åœ°æ–¹ï¼Œè¿™ä¸ªåŒºåŸŸè¢«å¯åŠ¨æ—¶é€‰æ‹©çš„åƒåœ¾å›æ”¶å™¨ç®¡ç†ï¼Œå¤§éƒ¨åˆ†è°ƒä¼˜é€‰é¡¹ä¸è°ƒæ•´å †å¤§å°å’Œæ ¹æ®ä½ çš„æƒ…å†µé€‰æ‹©æœ€é€‚å½“çš„åƒåœ¾æ”¶é›†å™¨ç›¸å…³ã€‚å³æ—¶ç¼–è¯‘å™¨å¯¹æ€§èƒ½ä¹Ÿæœ‰å¾ˆå¤§çš„å½±å“ï¼Œä½†æ˜¯ä½¿ç”¨æ–°ç‰ˆæœ¬çš„ Java è™šæ‹Ÿæœºæ—¶å¾ˆå°‘éœ€è¦è°ƒæ•´ã€‚</p>
<div align="center">
<img src="https://raw.githubusercontent.com/dunwu/images/dev/cs/java/javacore/jvm/jvm-hotspot-key-components.png" />
</div>

<h3 id="æ€§èƒ½æŒ‡æ ‡"><a href="#æ€§èƒ½æŒ‡æ ‡" class="headerlink" title="æ€§èƒ½æŒ‡æ ‡"></a>æ€§èƒ½æŒ‡æ ‡</h3><p>Java è™šæ‹Ÿæœºçš„æ€§èƒ½æŒ‡æ ‡ä¸»è¦æœ‰ä¸¤ç‚¹ï¼š</p>
<ul>
<li><strong>åœé¡¿æ—¶é—´</strong> - å“åº”å»¶è¿Ÿæ˜¯æŒ‡ä¸€ä¸ªåº”ç”¨å›åº”ä¸€ä¸ªè¯·æ±‚çš„é€Ÿåº¦æœ‰å¤šå¿«ã€‚å¯¹å…³æ³¨å“åº”èƒ½åŠ›çš„åº”ç”¨æ¥è¯´ï¼Œé•¿æš‚åœæ—¶é—´æ˜¯ä¸å¯æ¥å—çš„ï¼Œé‡ç‚¹æ˜¯åœ¨çŸ­çš„æ—¶é—´å‘¨æœŸå†…èƒ½åšå‡ºå“åº”ã€‚<ul>
<li>æ¡Œé¢ UI å“åº”äº‹ä»¶çš„é€Ÿåº¦</li>
<li>ç½‘ç«™è¿”å›ç½‘é¡µçš„é€Ÿåº¦</li>
<li>æ•°æ®æŸ¥è¯¢è¿”å›çš„é€Ÿåº¦</li>
</ul>
</li>
<li><strong>ååé‡</strong> - ååé‡å…³æ³¨åœ¨ç‰¹å®šçš„æ—¶é—´å‘¨æœŸå†…ä¸€ä¸ªåº”ç”¨çš„å·¥ä½œé‡çš„æœ€å¤§å€¼ã€‚å¯¹å…³æ³¨ååé‡çš„åº”ç”¨æ¥è¯´é•¿æš‚åœæ—¶é—´æ˜¯å¯ä»¥æ¥å—çš„ã€‚ç”±äºé«˜ååé‡çš„åº”ç”¨å…³æ³¨çš„åŸºå‡†åœ¨æ›´é•¿å‘¨æœŸæ—¶é—´ä¸Šï¼Œæ‰€ä»¥å¿«é€Ÿå“åº”æ—¶é—´ä¸åœ¨è€ƒè™‘ä¹‹å†…ã€‚<ul>
<li>ç»™å®šæ—¶é—´å†…å®Œæˆäº‹åŠ¡çš„æ•°é‡</li>
<li>ä¸€å°æ—¶å†…æ‰¹å¤„ç†ç¨‹åºå®Œæˆçš„å·¥ä½œæ•°é‡</li>
<li>ä¸€å°æ—¶å†…æ•°æ®æŸ¥è¯¢å®Œæˆçš„æ•°é‡</li>
</ul>
</li>
</ul>
<h2 id="å‚è€ƒèµ„æ–™"><a href="#å‚è€ƒèµ„æ–™" class="headerlink" title="å‚è€ƒèµ„æ–™"></a>å‚è€ƒèµ„æ–™</h2><ul>
<li><a target="_blank" rel="noopener" href="https://book.douban.com/subject/34907497/">ã€Šæ·±å…¥ç†è§£ Java è™šæ‹Ÿæœºã€‹</a></li>
</ul>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="https://dunwu.github.io/blog/pages/568352/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/blog/uploads/avatar.gif">
      <meta itemprop="name" content="é’æ‚Ÿ â—¾ Dunwu">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Dunwu Blog">
      <meta itemprop="description" content="é’æ‚Ÿçš„ä¸ªäººåšå®¢">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="undefined | Dunwu Blog">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/blog/pages/568352/" class="post-title-link" itemprop="url">SpringBoot ä¹‹å®‰å…¨å¿«é€Ÿå…¥é—¨</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">å‘è¡¨äº</span>

      <time title="åˆ›å»ºæ—¶é—´ï¼š2021-05-13 18:21:56" itemprop="dateCreated datePublished" datetime="2021-05-13T18:21:56+08:00">2021-05-13</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar-check"></i>
      </span>
      <span class="post-meta-item-text">æ›´æ–°äº</span>
      <time title="ä¿®æ”¹æ—¶é—´ï¼š2022-12-23 12:01:44" itemprop="dateModified" datetime="2022-12-23T12:01:44+08:00">2022-12-23</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">åˆ†ç±»äº</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/blog/categories/Java/" itemprop="url" rel="index"><span itemprop="name">Java</span></a>
        </span>
          ï¼Œ
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/blog/categories/Java/%E6%A1%86%E6%9E%B6/" itemprop="url" rel="index"><span itemprop="name">æ¡†æ¶</span></a>
        </span>
          ï¼Œ
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/blog/categories/Java/%E6%A1%86%E6%9E%B6/Spring/" itemprop="url" rel="index"><span itemprop="name">Spring</span></a>
        </span>
          ï¼Œ
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/blog/categories/Java/%E6%A1%86%E6%9E%B6/Spring/Spring%E5%AE%89%E5%85%A8/" itemprop="url" rel="index"><span itemprop="name">Springå®‰å…¨</span></a>
        </span>
    </span>

  
    <span class="post-meta-break"></span>
    <span class="post-meta-item" title="æœ¬æ–‡å­—æ•°">
      <span class="post-meta-item-icon">
        <i class="far fa-file-word"></i>
      </span>
      <span class="post-meta-item-text">æœ¬æ–‡å­—æ•°ï¼š</span>
      <span>528</span>
    </span>
    <span class="post-meta-item" title="é˜…è¯»æ—¶é•¿">
      <span class="post-meta-item-icon">
        <i class="far fa-clock"></i>
      </span>
      <span class="post-meta-item-text">é˜…è¯»æ—¶é•¿ &asymp;</span>
      <span>1 åˆ†é’Ÿ</span>
    </span>
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <h1 id="SpringBoot-ä¹‹å®‰å…¨å¿«é€Ÿå…¥é—¨"><a href="#SpringBoot-ä¹‹å®‰å…¨å¿«é€Ÿå…¥é—¨" class="headerlink" title="SpringBoot ä¹‹å®‰å…¨å¿«é€Ÿå…¥é—¨"></a>SpringBoot ä¹‹å®‰å…¨å¿«é€Ÿå…¥é—¨</h1><h2 id="QuickStart"><a href="#QuickStart" class="headerlink" title="QuickStart"></a>QuickStart</h2><p>ï¼ˆ1ï¼‰æ·»åŠ ä¾èµ–</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-starter-web<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-starter-security<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>ï¼ˆ2ï¼‰æ·»åŠ é…ç½®</p>
<figure class="highlight properties"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">spring.security.user.name</span> = <span class="string">root</span></span><br><span class="line"><span class="attr">spring.security.user.password</span> = <span class="string">root</span></span><br><span class="line"><span class="attr">spring.security.user.roles</span> = <span class="string">USER</span></span><br></pre></td></tr></table></figure>

<p>ï¼ˆ3ï¼‰å¯åŠ¨åº”ç”¨åï¼Œè®¿é—®ä»»æ„è·¯å¾„ï¼Œéƒ½ä¼šå‡ºç°ä»¥ä¸‹é¡µé¢ï¼Œæç¤ºä½ å…ˆæ‰§è¡Œç™»å½•æ“ä½œã€‚è¾“å…¥é…ç½®çš„ç”¨æˆ·åã€å¯†ç ï¼ˆroot&#x2F;rootï¼‰å³å¯è®¿é—®åº”ç”¨é¡µé¢ã€‚</p>
<p><img src="https://raw.githubusercontent.com/dunwu/images/dev/snap/image-20191118150326556.png" alt="img"></p>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="https://dunwu.github.io/blog/pages/bc583c/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/blog/uploads/avatar.gif">
      <meta itemprop="name" content="é’æ‚Ÿ â—¾ Dunwu">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Dunwu Blog">
      <meta itemprop="description" content="é’æ‚Ÿçš„ä¸ªäººåšå®¢">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="undefined | Dunwu Blog">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/blog/pages/bc583c/" class="post-title-link" itemprop="url">æ·±å…¥ç†è§£ Java String ç±»å‹</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">å‘è¡¨äº</span>

      <time title="åˆ›å»ºæ—¶é—´ï¼š2020-12-25 18:43:11" itemprop="dateCreated datePublished" datetime="2020-12-25T18:43:11+08:00">2020-12-25</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar-check"></i>
      </span>
      <span class="post-meta-item-text">æ›´æ–°äº</span>
      <time title="ä¿®æ”¹æ—¶é—´ï¼š2022-12-23 12:01:44" itemprop="dateModified" datetime="2022-12-23T12:01:44+08:00">2022-12-23</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">åˆ†ç±»äº</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/blog/categories/Java/" itemprop="url" rel="index"><span itemprop="name">Java</span></a>
        </span>
          ï¼Œ
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/blog/categories/Java/JavaSE/" itemprop="url" rel="index"><span itemprop="name">JavaSE</span></a>
        </span>
          ï¼Œ
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/blog/categories/Java/JavaSE/%E5%9F%BA%E7%A1%80%E7%89%B9%E6%80%A7/" itemprop="url" rel="index"><span itemprop="name">åŸºç¡€ç‰¹æ€§</span></a>
        </span>
    </span>

  
    <span class="post-meta-break"></span>
    <span class="post-meta-item" title="æœ¬æ–‡å­—æ•°">
      <span class="post-meta-item-icon">
        <i class="far fa-file-word"></i>
      </span>
      <span class="post-meta-item-text">æœ¬æ–‡å­—æ•°ï¼š</span>
      <span>3.4k</span>
    </span>
    <span class="post-meta-item" title="é˜…è¯»æ—¶é•¿">
      <span class="post-meta-item-icon">
        <i class="far fa-clock"></i>
      </span>
      <span class="post-meta-item-text">é˜…è¯»æ—¶é•¿ &asymp;</span>
      <span>3 åˆ†é’Ÿ</span>
    </span>
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <h1 id="æ·±å…¥ç†è§£-Java-String-ç±»å‹"><a href="#æ·±å…¥ç†è§£-Java-String-ç±»å‹" class="headerlink" title="æ·±å…¥ç†è§£ Java String ç±»å‹"></a>æ·±å…¥ç†è§£ Java String ç±»å‹</h1><blockquote>
<p>String ç±»å‹å¯èƒ½æ˜¯ Java ä¸­åº”ç”¨æœ€é¢‘ç¹çš„å¼•ç”¨ç±»å‹ï¼Œä½†å®ƒçš„æ€§èƒ½é—®é¢˜å´å¸¸å¸¸è¢«å¿½ç•¥ã€‚é«˜æ•ˆçš„ä½¿ç”¨å­—ç¬¦ä¸²ï¼Œå¯ä»¥æå‡ç³»ç»Ÿçš„æ•´ä½“æ€§èƒ½ã€‚å½“ç„¶ï¼Œè¦åšåˆ°é«˜æ•ˆä½¿ç”¨å­—ç¬¦ä¸²ï¼Œéœ€è¦æ·±å…¥äº†è§£å…¶ç‰¹æ€§ã€‚</p>
</blockquote>
<h2 id="String-çš„ä¸å¯å˜æ€§"><a href="#String-çš„ä¸å¯å˜æ€§" class="headerlink" title="String çš„ä¸å¯å˜æ€§"></a>String çš„ä¸å¯å˜æ€§</h2><p>æˆ‘ä»¬å…ˆæ¥çœ‹ä¸‹ <code>String</code> çš„å®šä¹‰ï¼š</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">final</span> <span class="keyword">class</span> <span class="title class_">String</span></span><br><span class="line">    <span class="keyword">implements</span> <span class="title class_">java</span>.io.Serializable, Comparable&lt;String&gt;, CharSequence &#123;</span><br><span class="line">    <span class="comment">/** The value is used for character storage. */</span></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">final</span> <span class="type">char</span> value[];</span><br></pre></td></tr></table></figure>

<p><code>String</code> ç±»è¢« <code>final</code> å…³é”®å­—ä¿®é¥°ï¼Œè¡¨ç¤º<strong>ä¸å¯ç»§æ‰¿ <code>String</code> ç±»</strong>ã€‚</p>
<p><code>String</code> ç±»çš„æ•°æ®å­˜å‚¨äº <code>char[]</code> æ•°ç»„ï¼Œè¿™ä¸ªæ•°ç»„è¢« <code>final</code> å…³é”®å­—ä¿®é¥°ï¼Œè¡¨ç¤º <strong><code>String</code> å¯¹è±¡ä¸å¯è¢«æ›´æ”¹</strong>ã€‚</p>
<p>ä¸ºä»€ä¹ˆ Java è¦è¿™æ ·è®¾è®¡ï¼Ÿ</p>
<p>ï¼ˆ1ï¼‰<strong>ä¿è¯ String å¯¹è±¡å®‰å…¨æ€§</strong>ã€‚é¿å… String è¢«ç¯¡æ”¹ã€‚</p>
<p>ï¼ˆ2ï¼‰<strong>ä¿è¯ hash å€¼ä¸ä¼šé¢‘ç¹å˜æ›´</strong>ã€‚</p>
<p>ï¼ˆ3ï¼‰<strong>å¯ä»¥å®ç°å­—ç¬¦ä¸²å¸¸é‡æ± </strong>ã€‚é€šå¸¸æœ‰ä¸¤ç§åˆ›å»ºå­—ç¬¦ä¸²å¯¹è±¡çš„æ–¹å¼ï¼Œä¸€ç§æ˜¯é€šè¿‡å­—ç¬¦ä¸²å¸¸é‡çš„æ–¹å¼åˆ›å»ºï¼Œå¦‚ <code>String str=&quot;abc&quot;;</code> å¦ä¸€ç§æ˜¯å­—ç¬¦ä¸²å˜é‡é€šè¿‡ new å½¢å¼çš„åˆ›å»ºï¼Œå¦‚ <code>String str = new String(&quot;abc&quot;)</code>ã€‚</p>
<p>ä½¿ç”¨ç¬¬ä¸€ç§æ–¹å¼åˆ›å»ºå­—ç¬¦ä¸²å¯¹è±¡æ—¶ï¼ŒJVM é¦–å…ˆä¼šæ£€æŸ¥è¯¥å¯¹è±¡æ˜¯å¦åœ¨å­—ç¬¦ä¸²å¸¸é‡æ± ä¸­ï¼Œå¦‚æœåœ¨ï¼Œå°±è¿”å›è¯¥å¯¹è±¡å¼•ç”¨ï¼Œå¦åˆ™æ–°çš„å­—ç¬¦ä¸²å°†åœ¨å¸¸é‡æ± ä¸­è¢«åˆ›å»ºã€‚è¿™ç§æ–¹å¼å¯ä»¥å‡å°‘åŒä¸€ä¸ªå€¼çš„å­—ç¬¦ä¸²å¯¹è±¡çš„é‡å¤åˆ›å»ºï¼ŒèŠ‚çº¦å†…å­˜ã€‚</p>
<p><code>String str = new String(&quot;abc&quot;)</code> è¿™ç§æ–¹å¼ï¼Œé¦–å…ˆåœ¨ç¼–è¯‘ç±»æ–‡ä»¶æ—¶ï¼Œ<code>&quot;abc&quot;</code> å¸¸é‡å­—ç¬¦ä¸²å°†ä¼šæ”¾å…¥åˆ°å¸¸é‡ç»“æ„ä¸­ï¼Œåœ¨ç±»åŠ è½½æ—¶ï¼Œ<code>&quot;abc&quot;</code> å°†ä¼šåœ¨å¸¸é‡æ± ä¸­åˆ›å»ºï¼›å…¶æ¬¡ï¼Œåœ¨è°ƒç”¨ new æ—¶ï¼ŒJVM å‘½ä»¤å°†ä¼šè°ƒç”¨ <code>String</code> çš„æ„é€ å‡½æ•°ï¼ŒåŒæ—¶å¼•ç”¨å¸¸é‡æ± ä¸­çš„ <code>&quot;abc&quot;</code> å­—ç¬¦ä¸²ï¼Œåœ¨å †å†…å­˜ä¸­åˆ›å»ºä¸€ä¸ª <code>String</code> å¯¹è±¡ï¼›æœ€åï¼Œstr å°†å¼•ç”¨ <code>String</code> å¯¹è±¡ã€‚</p>
<h2 id="String-çš„æ€§èƒ½è€ƒé‡"><a href="#String-çš„æ€§èƒ½è€ƒé‡" class="headerlink" title="String çš„æ€§èƒ½è€ƒé‡"></a>String çš„æ€§èƒ½è€ƒé‡</h2><h3 id="å­—ç¬¦ä¸²æ‹¼æ¥"><a href="#å­—ç¬¦ä¸²æ‹¼æ¥" class="headerlink" title="å­—ç¬¦ä¸²æ‹¼æ¥"></a>å­—ç¬¦ä¸²æ‹¼æ¥</h3><p><strong>å­—ç¬¦ä¸²å¸¸é‡çš„æ‹¼æ¥ï¼Œç¼–è¯‘å™¨ä¼šå°†å…¶ä¼˜åŒ–ä¸ºä¸€ä¸ªå¸¸é‡å­—ç¬¦ä¸²</strong>ã€‚</p>
<p>ã€ç¤ºä¾‹ã€‘å­—ç¬¦ä¸²å¸¸é‡æ‹¼æ¥</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">    <span class="comment">// æœ¬è¡Œä»£ç åœ¨ class æ–‡ä»¶ä¸­ï¼Œä¼šè¢«ç¼–è¯‘å™¨ç›´æ¥ä¼˜åŒ–ä¸ºï¼š</span></span><br><span class="line">    <span class="comment">// String str = &quot;abc&quot;;</span></span><br><span class="line">    <span class="type">String</span> <span class="variable">str</span> <span class="operator">=</span> <span class="string">&quot;a&quot;</span> + <span class="string">&quot;b&quot;</span> + <span class="string">&quot;c&quot;</span>;</span><br><span class="line">    System.out.println(<span class="string">&quot;str = &quot;</span> + str);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><strong>å­—ç¬¦ä¸²å˜é‡çš„æ‹¼æ¥ï¼Œç¼–è¯‘å™¨ä¼šä¼˜åŒ–æˆ <code>StringBuilder</code> çš„æ–¹å¼</strong>ã€‚</p>
<p>ã€ç¤ºä¾‹ã€‘å­—ç¬¦ä¸²å˜é‡çš„æ‹¼æ¥</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">    <span class="type">String</span> <span class="variable">str</span> <span class="operator">=</span> <span class="string">&quot;&quot;</span>;</span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">0</span>; i&lt;<span class="number">1000</span>; i++) &#123;</span><br><span class="line">        <span class="comment">// æœ¬è¡Œä»£ç ä¼šè¢«ç¼–è¯‘å™¨ä¼˜åŒ–ä¸ºï¼š</span></span><br><span class="line">        <span class="comment">// str = (new StringBuilder(String.valueOf(str))).append(i).toString();</span></span><br><span class="line">        str = str + i;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>ä½†æ˜¯ï¼Œæ¯æ¬¡å¾ªç¯éƒ½ä¼šç”Ÿæˆä¸€ä¸ªæ–°çš„ <code>StringBuilder</code> å®ä¾‹ï¼ŒåŒæ ·ä¹Ÿä¼šé™ä½ç³»ç»Ÿçš„æ€§èƒ½ã€‚</p>
<p>å­—ç¬¦ä¸²æ‹¼æ¥çš„æ­£ç¡®æ–¹æ¡ˆï¼š</p>
<ul>
<li>å¦‚æœéœ€è¦ä½¿ç”¨<strong>å­—ç¬¦ä¸²æ‹¼æ¥ï¼Œåº”è¯¥ä¼˜å…ˆè€ƒè™‘ <code>StringBuilder</code> çš„ <code>append</code> æ–¹æ³•æ›¿ä»£ä½¿ç”¨ <code>+</code> å·</strong>ã€‚</li>
<li>å¦‚æœåœ¨å¹¶å‘ç¼–ç¨‹ä¸­ï¼Œ<code>String</code> å¯¹è±¡çš„æ‹¼æ¥æ¶‰åŠåˆ°çº¿ç¨‹å®‰å…¨ï¼Œå¯ä»¥ä½¿ç”¨ <code>StringBuffer</code>ã€‚ä½†æ˜¯è¦æ³¨æ„ï¼Œç”±äº <code>StringBuffer</code> æ˜¯çº¿ç¨‹å®‰å…¨çš„ï¼Œæ¶‰åŠåˆ°é”ç«äº‰ï¼Œæ‰€ä»¥ä»æ€§èƒ½ä¸Šæ¥è¯´ï¼Œè¦æ¯” <code>StringBuilder</code> å·®ä¸€äº›ã€‚</li>
</ul>
<h3 id="å­—ç¬¦ä¸²åˆ†å‰²"><a href="#å­—ç¬¦ä¸²åˆ†å‰²" class="headerlink" title="å­—ç¬¦ä¸²åˆ†å‰²"></a>å­—ç¬¦ä¸²åˆ†å‰²</h3><p><strong><code>String</code> çš„ <code>split()</code> æ–¹æ³•ä½¿ç”¨æ­£åˆ™è¡¨è¾¾å¼å®ç°å…¶å¼ºå¤§çš„åˆ†å‰²åŠŸèƒ½</strong>ã€‚è€Œæ­£åˆ™è¡¨è¾¾å¼çš„æ€§èƒ½æ˜¯éå¸¸ä¸ç¨³å®šçš„ï¼Œä½¿ç”¨ä¸æ°å½“ä¼šå¼•èµ·å›æº¯é—®é¢˜ï¼Œå¾ˆå¯èƒ½å¯¼è‡´ CPU å±…é«˜ä¸ä¸‹ã€‚</p>
<p>æ‰€ä»¥ï¼Œåº”è¯¥æ…é‡ä½¿ç”¨ <code>split()</code> æ–¹æ³•ï¼Œ<strong>å¯ä»¥è€ƒè™‘ç”¨ <code>String.indexOf()</code> æ–¹æ³•ä»£æ›¿ <code>split()</code> æ–¹æ³•å®Œæˆå­—ç¬¦ä¸²çš„åˆ†å‰²</strong>ã€‚å¦‚æœå®åœ¨æ— æ³•æ»¡è¶³éœ€æ±‚ï¼Œä½ å°±åœ¨ä½¿ç”¨ Split() æ–¹æ³•æ—¶ï¼Œå¯¹å›æº¯é—®é¢˜åŠ ä»¥é‡è§†å°±å¯ä»¥äº†ã€‚</p>
<h3 id="String-intern"><a href="#String-intern" class="headerlink" title="String.intern"></a>String.intern</h3><p><strong>åœ¨æ¯æ¬¡èµ‹å€¼çš„æ—¶å€™ä½¿ç”¨ <code>String</code> çš„ <code>intern</code> æ–¹æ³•ï¼Œå¦‚æœå¸¸é‡æ± ä¸­æœ‰ç›¸åŒå€¼ï¼Œå°±ä¼šé‡å¤ä½¿ç”¨è¯¥å¯¹è±¡ï¼Œè¿”å›å¯¹è±¡å¼•ç”¨ï¼Œè¿™æ ·ä¸€å¼€å§‹çš„å¯¹è±¡å°±å¯ä»¥è¢«å›æ”¶æ‰</strong>ã€‚</p>
<p>åœ¨å­—ç¬¦ä¸²å¸¸é‡ä¸­ï¼Œé»˜è®¤ä¼šå°†å¯¹è±¡æ”¾å…¥å¸¸é‡æ± ï¼›åœ¨å­—ç¬¦ä¸²å˜é‡ä¸­ï¼Œå¯¹è±¡æ˜¯ä¼šåˆ›å»ºåœ¨å †å†…å­˜ä¸­ï¼ŒåŒæ—¶ä¹Ÿä¼šåœ¨å¸¸é‡æ± ä¸­åˆ›å»ºä¸€ä¸ªå­—ç¬¦ä¸²å¯¹è±¡ï¼Œå¤åˆ¶åˆ°å †å†…å­˜å¯¹è±¡ä¸­ï¼Œå¹¶è¿”å›å †å†…å­˜å¯¹è±¡å¼•ç”¨ã€‚</p>
<p>å¦‚æœè°ƒç”¨ <code>intern</code> æ–¹æ³•ï¼Œä¼šå»æŸ¥çœ‹å­—ç¬¦ä¸²å¸¸é‡æ± ä¸­æ˜¯å¦æœ‰ç­‰äºè¯¥å¯¹è±¡çš„å­—ç¬¦ä¸²ï¼Œå¦‚æœæ²¡æœ‰ï¼Œå°±åœ¨å¸¸é‡æ± ä¸­æ–°å¢è¯¥å¯¹è±¡ï¼Œå¹¶è¿”å›è¯¥å¯¹è±¡å¼•ç”¨ï¼›å¦‚æœæœ‰ï¼Œå°±è¿”å›å¸¸é‡æ± ä¸­çš„å­—ç¬¦ä¸²å¼•ç”¨ã€‚å †å†…å­˜ä¸­åŸæœ‰çš„å¯¹è±¡ç”±äºæ²¡æœ‰å¼•ç”¨æŒ‡å‘å®ƒï¼Œå°†ä¼šé€šè¿‡åƒåœ¾å›æ”¶å™¨å›æ”¶ã€‚</p>
<p>ã€ç¤ºä¾‹ã€‘</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">SharedLocation</span> &#123;</span><br><span class="line"></span><br><span class="line">	<span class="keyword">private</span> String city;</span><br><span class="line">	<span class="keyword">private</span> String region;</span><br><span class="line">	<span class="keyword">private</span> String countryCode;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="type">SharedLocation</span> <span class="variable">sharedLocation</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">SharedLocation</span>();</span><br><span class="line">sharedLocation.setCity(messageInfo.getCity().intern());		sharedLocation.setCountryCode(messageInfo.getRegion().intern());</span><br><span class="line">sharedLocation.setRegion(messageInfo.getCountryCode().intern());</span><br></pre></td></tr></table></figure>

<blockquote>
<p>ä½¿ç”¨ <code>intern</code> æ–¹æ³•éœ€è¦æ³¨æ„ï¼šä¸€å®šè¦ç»“åˆå®é™…åœºæ™¯ã€‚å› ä¸ºå¸¸é‡æ± çš„å®ç°æ˜¯ç±»ä¼¼äºä¸€ä¸ª HashTable çš„å®ç°æ–¹å¼ï¼ŒHashTable å­˜å‚¨çš„æ•°æ®è¶Šå¤§ï¼Œéå†çš„æ—¶é—´å¤æ‚åº¦å°±ä¼šå¢åŠ ã€‚å¦‚æœæ•°æ®è¿‡å¤§ï¼Œä¼šå¢åŠ æ•´ä¸ªå­—ç¬¦ä¸²å¸¸é‡æ± çš„è´Ÿæ‹…ã€‚</p>
</blockquote>
<h2 id="Stringã€StringBufferã€StringBuilder-æœ‰ä»€ä¹ˆåŒºåˆ«"><a href="#Stringã€StringBufferã€StringBuilder-æœ‰ä»€ä¹ˆåŒºåˆ«" class="headerlink" title="Stringã€StringBufferã€StringBuilder æœ‰ä»€ä¹ˆåŒºåˆ«"></a>Stringã€StringBufferã€StringBuilder æœ‰ä»€ä¹ˆåŒºåˆ«</h2><p><code>String</code> æ˜¯ Java è¯­è¨€éå¸¸åŸºç¡€å’Œé‡è¦çš„ç±»ï¼Œæä¾›äº†æ„é€ å’Œç®¡ç†å­—ç¬¦ä¸²çš„å„ç§åŸºæœ¬é€»è¾‘ã€‚å®ƒæ˜¯å…¸å‹çš„ <code>Immutable</code> ç±»ï¼Œè¢«å£°æ˜æˆä¸º <code>final class</code>ï¼Œæ‰€æœ‰å±æ€§ä¹Ÿéƒ½æ˜¯ <code>final</code> çš„ã€‚ä¹Ÿç”±äºå®ƒçš„ä¸å¯å˜æ€§ï¼Œç±»ä¼¼æ‹¼æ¥ã€è£å‰ªå­—ç¬¦ä¸²ç­‰åŠ¨ä½œï¼Œéƒ½ä¼šäº§ç”Ÿæ–°çš„ <code>String</code> å¯¹è±¡ã€‚ç”±äºå­—ç¬¦ä¸²æ“ä½œçš„æ™®éæ€§ï¼Œæ‰€ä»¥ç›¸å…³æ“ä½œçš„æ•ˆç‡å¾€å¾€å¯¹åº”ç”¨æ€§èƒ½æœ‰æ˜æ˜¾å½±å“ã€‚</p>
<p><code>StringBuffer</code> æ˜¯ä¸ºè§£å†³ä¸Šé¢æåˆ°æ‹¼æ¥äº§ç”Ÿå¤ªå¤šä¸­é—´å¯¹è±¡çš„é—®é¢˜è€Œæä¾›çš„ä¸€ä¸ªç±»ï¼Œæˆ‘ä»¬å¯ä»¥ç”¨ <code>append</code> æˆ–è€… <code>add</code> æ–¹æ³•ï¼ŒæŠŠå­—ç¬¦ä¸²æ·»åŠ åˆ°å·²æœ‰åºåˆ—çš„æœ«å°¾æˆ–è€…æŒ‡å®šä½ç½®ã€‚<code>StringBuffer</code> æ˜¯ä¸€ä¸ª<strong>çº¿ç¨‹å®‰å…¨çš„</strong>å¯ä¿®æ”¹å­—ç¬¦åºåˆ—ã€‚<code>StringBuffer</code> çš„çº¿ç¨‹å®‰å…¨æ˜¯é€šè¿‡åœ¨å„ç§ä¿®æ”¹æ•°æ®çš„æ–¹æ³•ä¸Šç”¨ <code>synchronized</code> å…³é”®å­—ä¿®é¥°å®ç°çš„ã€‚</p>
<p><code>StringBuilder</code> æ˜¯ Java 1.5 ä¸­æ–°å¢çš„ï¼Œåœ¨èƒ½åŠ›ä¸Šå’Œ StringBuffer æ²¡æœ‰æœ¬è´¨åŒºåˆ«ï¼Œä½†æ˜¯å®ƒå»æ‰äº†çº¿ç¨‹å®‰å…¨çš„éƒ¨åˆ†ï¼Œæœ‰æ•ˆå‡å°äº†å¼€é”€ï¼Œæ˜¯ç»å¤§éƒ¨åˆ†æƒ…å†µä¸‹è¿›è¡Œå­—ç¬¦ä¸²æ‹¼æ¥çš„é¦–é€‰ã€‚</p>
<p><code>StringBuffer</code> å’Œ <code>StringBuilder</code> åº•å±‚éƒ½æ˜¯åˆ©ç”¨å¯ä¿®æ”¹çš„ï¼ˆcharï¼ŒJDK 9 ä»¥åæ˜¯ byteï¼‰æ•°ç»„ï¼ŒäºŒè€…éƒ½ç»§æ‰¿äº† <code>AbstractStringBuilder</code>ï¼Œé‡Œé¢åŒ…å«äº†åŸºæœ¬æ“ä½œï¼ŒåŒºåˆ«ä»…åœ¨äºæœ€ç»ˆçš„æ–¹æ³•æ˜¯å¦åŠ äº† <code>synchronized</code>ã€‚æ„å»ºæ—¶åˆå§‹å­—ç¬¦ä¸²é•¿åº¦åŠ  16ï¼ˆè¿™æ„å‘³ç€ï¼Œå¦‚æœæ²¡æœ‰æ„å»ºå¯¹è±¡æ—¶è¾“å…¥æœ€åˆçš„å­—ç¬¦ä¸²ï¼Œé‚£ä¹ˆåˆå§‹å€¼å°±æ˜¯ 16ï¼‰ã€‚æˆ‘ä»¬å¦‚æœç¡®å®šæ‹¼æ¥ä¼šå‘ç”Ÿéå¸¸å¤šæ¬¡ï¼Œè€Œä¸”å¤§æ¦‚æ˜¯å¯é¢„è®¡çš„ï¼Œé‚£ä¹ˆå°±å¯ä»¥æŒ‡å®šåˆé€‚çš„å¤§å°ï¼Œé¿å…å¾ˆå¤šæ¬¡æ‰©å®¹çš„å¼€é”€ã€‚æ‰©å®¹ä¼šäº§ç”Ÿå¤šé‡å¼€é”€ï¼Œå› ä¸ºè¦æŠ›å¼ƒåŸæœ‰æ•°ç»„ï¼Œåˆ›å»ºæ–°çš„ï¼ˆå¯ä»¥ç®€å•è®¤ä¸ºæ˜¯å€æ•°ï¼‰æ•°ç»„ï¼Œè¿˜è¦è¿›è¡Œ <code>arraycopy</code>ã€‚</p>
<p>**é™¤éæœ‰çº¿ç¨‹å®‰å…¨çš„éœ€è¦ï¼Œä¸ç„¶ä¸€èˆ¬éƒ½ä½¿ç”¨ <code>StringBuilder</code>**ã€‚</p>
<h2 id="å‚è€ƒèµ„æ–™"><a href="#å‚è€ƒèµ„æ–™" class="headerlink" title="å‚è€ƒèµ„æ–™"></a>å‚è€ƒèµ„æ–™</h2><ul>
<li><a target="_blank" rel="noopener" href="https://book.douban.com/subject/2130190/">ã€ŠJava ç¼–ç¨‹æ€æƒ³ï¼ˆThinking in javaï¼‰ã€‹</a></li>
<li><a target="_blank" rel="noopener" href="https://book.douban.com/subject/26880667/">ã€ŠJava æ ¸å¿ƒæŠ€æœ¯ å· I åŸºç¡€çŸ¥è¯†ã€‹</a></li>
<li><a target="_blank" rel="noopener" href="https://time.geekbang.org/column/intro/100028001">ã€ŠJava æ€§èƒ½è°ƒä¼˜å®æˆ˜ã€‹</a></li>
<li><a target="_blank" rel="noopener" href="https://time.geekbang.org/column/intro/82">ã€ŠJava æ ¸å¿ƒæŠ€æœ¯é¢è¯•ç²¾è®²ã€‹</a></li>
<li><a target="_blank" rel="noopener" href="https://juejin.im/post/59cd71835188255d3448faf6">Java åŸºæœ¬æ•°æ®ç±»å‹å’Œå¼•ç”¨ç±»å‹</a></li>
<li><a target="_blank" rel="noopener" href="https://www.cnblogs.com/dolphin0520/p/3780005.html">æ·±å…¥å‰–æ Java ä¸­çš„è£…ç®±å’Œæ‹†ç®±</a></li>
</ul>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="https://dunwu.github.io/blog/pages/4c1dd4/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/blog/uploads/avatar.gif">
      <meta itemprop="name" content="é’æ‚Ÿ â—¾ Dunwu">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Dunwu Blog">
      <meta itemprop="description" content="é’æ‚Ÿçš„ä¸ªäººåšå®¢">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="undefined | Dunwu Blog">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/blog/pages/4c1dd4/" class="post-title-link" itemprop="url">Java æ­£åˆ™ä»å…¥é—¨åˆ°ç²¾é€š</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">å‘è¡¨äº</span>

      <time title="åˆ›å»ºæ—¶é—´ï¼š2020-12-25 18:43:11" itemprop="dateCreated datePublished" datetime="2020-12-25T18:43:11+08:00">2020-12-25</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar-check"></i>
      </span>
      <span class="post-meta-item-text">æ›´æ–°äº</span>
      <time title="ä¿®æ”¹æ—¶é—´ï¼š2022-12-23 12:01:44" itemprop="dateModified" datetime="2022-12-23T12:01:44+08:00">2022-12-23</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">åˆ†ç±»äº</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/blog/categories/Java/" itemprop="url" rel="index"><span itemprop="name">Java</span></a>
        </span>
          ï¼Œ
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/blog/categories/Java/JavaSE/" itemprop="url" rel="index"><span itemprop="name">JavaSE</span></a>
        </span>
          ï¼Œ
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/blog/categories/Java/JavaSE/%E9%AB%98%E7%BA%A7%E7%89%B9%E6%80%A7/" itemprop="url" rel="index"><span itemprop="name">é«˜çº§ç‰¹æ€§</span></a>
        </span>
    </span>

  
    <span class="post-meta-break"></span>
    <span class="post-meta-item" title="æœ¬æ–‡å­—æ•°">
      <span class="post-meta-item-icon">
        <i class="far fa-file-word"></i>
      </span>
      <span class="post-meta-item-text">æœ¬æ–‡å­—æ•°ï¼š</span>
      <span>37k</span>
    </span>
    <span class="post-meta-item" title="é˜…è¯»æ—¶é•¿">
      <span class="post-meta-item-icon">
        <i class="far fa-clock"></i>
      </span>
      <span class="post-meta-item-text">é˜…è¯»æ—¶é•¿ &asymp;</span>
      <span>34 åˆ†é’Ÿ</span>
    </span>
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <h1 id="Java-æ­£åˆ™ä»å…¥é—¨åˆ°ç²¾é€š"><a href="#Java-æ­£åˆ™ä»å…¥é—¨åˆ°ç²¾é€š" class="headerlink" title="Java æ­£åˆ™ä»å…¥é—¨åˆ°ç²¾é€š"></a>Java æ­£åˆ™ä»å…¥é—¨åˆ°ç²¾é€š</h1><blockquote>
<p>å…³é”®è¯ï¼šPatternã€Matcherã€æ•è·ä¸éæ•è·ã€åå‘å¼•ç”¨ã€é›¶å®½æ–­è¨€ã€è´ªå©ªä¸æ‡’æƒ°ã€å…ƒå­—ç¬¦ã€DFAã€NFA</p>
</blockquote>
<h2 id="æ­£åˆ™ç®€ä»‹"><a href="#æ­£åˆ™ç®€ä»‹" class="headerlink" title="æ­£åˆ™ç®€ä»‹"></a>æ­£åˆ™ç®€ä»‹</h2><h3 id="æ­£åˆ™è¡¨è¾¾å¼æ˜¯ä»€ä¹ˆ"><a href="#æ­£åˆ™è¡¨è¾¾å¼æ˜¯ä»€ä¹ˆ" class="headerlink" title="æ­£åˆ™è¡¨è¾¾å¼æ˜¯ä»€ä¹ˆ"></a>æ­£åˆ™è¡¨è¾¾å¼æ˜¯ä»€ä¹ˆ</h3><p>æ­£åˆ™è¡¨è¾¾å¼ï¼ˆRegular Expressionï¼‰æ˜¯ä¸€ä¸ªç”¨æ­£åˆ™ç¬¦å·å†™å‡ºçš„å…¬å¼ï¼Œç¨‹åºå¯¹è¿™ä¸ªå…¬å¼è¿›è¡Œè¯­æ³•åˆ†æï¼Œå»ºç«‹ä¸€ä¸ªè¯­æ³•åˆ†ææ ‘ï¼Œå†æ ¹æ®è¿™ä¸ªåˆ†ææ ‘ç»“åˆæ­£åˆ™è¡¨è¾¾å¼çš„å¼•æ“ç”Ÿæˆæ‰§è¡Œç¨‹åºï¼ˆè¿™ä¸ªæ‰§è¡Œç¨‹åºæˆ‘ä»¬æŠŠå®ƒç§°ä½œçŠ¶æ€æœºï¼Œä¹Ÿå«çŠ¶æ€è‡ªåŠ¨æœºï¼‰ï¼Œç”¨äºå­—ç¬¦åŒ¹é…ã€‚</p>
<h3 id="å¦‚ä½•å­¦ä¹ æ­£åˆ™"><a href="#å¦‚ä½•å­¦ä¹ æ­£åˆ™" class="headerlink" title="å¦‚ä½•å­¦ä¹ æ­£åˆ™"></a>å¦‚ä½•å­¦ä¹ æ­£åˆ™</h3><p>æ­£åˆ™è¡¨è¾¾å¼æ˜¯ä¸€ä¸ªå¼ºå¤§çš„æ–‡æœ¬åŒ¹é…å·¥å…·ï¼Œä½†æ˜¯å®ƒçš„è§„åˆ™å¾ˆå¤æ‚ï¼Œç†è§£èµ·æ¥è¾ƒä¸ºå›°éš¾ï¼Œå®¹æ˜“è®©äººæœ›è€Œç”Ÿç•ã€‚</p>
<p>åˆšæ¥è§¦æ­£åˆ™æ—¶ï¼Œæˆ‘çœ‹äº†ä¸€å †æ­£åˆ™çš„è¯­ä¹‰è¯´æ˜ï¼Œä½†æ˜¯ä»ç„¶ä¸æ˜æ‰€ä»¥ã€‚åæ¥ï¼Œæˆ‘å¤šæ¥è§¦ä¸€äº›æ­£åˆ™çš„åº”ç”¨å®ä¾‹ï¼Œæ¸æ¸æœ‰äº†æ„Ÿè§‰ï¼Œå†ç»“åˆè¯­ä¹‰è¯´æ˜ï¼Œç»ˆæœ‰é¢†æ‚Ÿã€‚æˆ‘è§‰å¾—æ­£åˆ™è¡¨è¾¾å¼å’Œæ­¦ä¾ ä¿®ç»ƒæ­¦åŠŸå·®ä¸å¤šï¼Œåº”è¯¥å…ˆç»ƒæ‹›å¼ï¼Œå†ç»ƒå¿ƒæ³•ã€‚å¦‚æœä¸€å¼€å§‹å°±ç›´æ¥çœ‹æ­£åˆ™çš„è§„åˆ™ï¼Œä¿è¯ä½ ä¼šæ‡µé€¼ã€‚å½“ä½ ç†Ÿæ‚‰åŸºæœ¬æ‹›å¼ï¼ˆæ­£åˆ™åŸºæœ¬ä½¿ç”¨æ¡ˆä¾‹ï¼‰åï¼Œä¹Ÿè¯¥ä¿®ç‚¼ä¿®ç‚¼å¿ƒæ³•ï¼ˆæ­£åˆ™è¯­æ³•ï¼‰äº†ã€‚çœŸæ­£çš„é«˜æ‰‹ä¸èƒ½åªé æ­»è®°ç¡¬èƒŒé‚£ä¹ˆå‡ æ‹›æŠŠå¼ã€‚å°±åƒå¼ ä¸‰ä¸°æ•™å¼ æ— å¿Œå¤ªææ‹³ä¸€æ ·ï¼Œé¢†æ‚Ÿå¿ƒæ³•ï¼Œèä¼šè´¯é€šï¼Œå°‘ä¾ ä½ å°±å¯ä»¥æ— æ‹›èƒœæœ‰æ‹›ï¼Œæˆä¸ºä¼ è¯´ä¸­çš„ç»ä¸–é«˜æ‰‹ã€‚</p>
<p><strong>ä»¥ä¸Šé—²è¯å¯å½’çº³ä¸ºä¸€å¥ï¼šå­¦ä¹ æ­£åˆ™åº”è¯¥ä»å®ä¾‹å»ç†è§£è§„åˆ™ã€‚</strong></p>
<h2 id="æ­£åˆ™å·¥å…·ç±»"><a href="#æ­£åˆ™å·¥å…·ç±»" class="headerlink" title="æ­£åˆ™å·¥å…·ç±»"></a>æ­£åˆ™å·¥å…·ç±»</h2><p>JDK ä¸­çš„ <code>java.util.regex</code> åŒ…æä¾›äº†å¯¹æ­£åˆ™è¡¨è¾¾å¼çš„æ”¯æŒã€‚</p>
<p><code>java.util.regex</code> æœ‰ä¸‰ä¸ªæ ¸å¿ƒç±»ï¼š</p>
<ul>
<li><strong>Pattern ç±»ï¼š</strong><code>Pattern</code> æ˜¯ä¸€ä¸ªæ­£åˆ™è¡¨è¾¾å¼çš„ç¼–è¯‘è¡¨ç¤ºã€‚</li>
<li><strong>Matcher ç±»ï¼š</strong><code>Matcher</code> æ˜¯å¯¹è¾“å…¥å­—ç¬¦ä¸²è¿›è¡Œè§£é‡Šå’ŒåŒ¹é…æ“ä½œçš„å¼•æ“ã€‚</li>
<li><strong>PatternSyntaxExceptionï¼š</strong><code>PatternSyntaxException</code> æ˜¯ä¸€ä¸ªéå¼ºåˆ¶å¼‚å¸¸ç±»ï¼Œå®ƒè¡¨ç¤ºä¸€ä¸ªæ­£åˆ™è¡¨è¾¾å¼æ¨¡å¼ä¸­çš„è¯­æ³•é”™è¯¯ã€‚</li>
</ul>
<p><strong>æ³¨ï¼š</strong>éœ€è¦æ ¼å¤–æ³¨æ„ä¸€ç‚¹ï¼Œåœ¨ Java ä¸­ä½¿ç”¨åæ–œæ â€\â€œæ—¶å¿…é¡»å†™æˆ <code>&quot;\\&quot;</code>ã€‚æ‰€ä»¥æœ¬æ–‡çš„ä»£ç å‡ºç°å½¢å¦‚ <code>String regex = &quot;\\$\\&#123;.*?\\&#125;&quot;</code> å…¶å®å°±æ˜¯ <code>\$\&#123;.\*?\&#125;</code>ã€‚</p>
<h3 id="Pattern-ç±»"><a href="#Pattern-ç±»" class="headerlink" title="Pattern ç±»"></a>Pattern ç±»</h3><p><code>Pattern</code>ç±»æ²¡æœ‰å…¬å…±æ„é€ æ–¹æ³•ã€‚è¦åˆ›å»ºä¸€ä¸ª<code>Pattern</code>å¯¹è±¡ï¼Œä½ å¿…é¡»é¦–å…ˆè°ƒç”¨å…¶<strong>é™æ€æ–¹æ³•</strong><code>compile</code>ï¼ŒåŠ è½½æ­£åˆ™è§„åˆ™å­—ç¬¦ä¸²ï¼Œç„¶åè¿”å›ä¸€ä¸ª Pattern å¯¹è±¡ã€‚</p>
<p>ä¸<code>Pattern</code>ç±»ä¸€æ ·ï¼Œ<code>Matcher</code>ç±»ä¹Ÿæ²¡æœ‰å…¬å…±æ„é€ æ–¹æ³•ã€‚ä½ éœ€è¦è°ƒç”¨<code>Pattern</code>å¯¹è±¡çš„<code>matcher</code>æ–¹æ³•æ¥è·å¾—ä¸€ä¸ª<code>Matcher</code>å¯¹è±¡ã€‚</p>
<p>ã€ç¤ºä¾‹ã€‘Pattern å’Œ Matcher çš„åˆå§‹åŒ–</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">Pattern</span> <span class="variable">p</span> <span class="operator">=</span> Pattern.compile(regex);</span><br><span class="line"><span class="type">Matcher</span> <span class="variable">m</span> <span class="operator">=</span> p.matcher(content);</span><br></pre></td></tr></table></figure>

<h3 id="Matcher-ç±»"><a href="#Matcher-ç±»" class="headerlink" title="Matcher ç±»"></a>Matcher ç±»</h3><p><code>Matcher</code> ç±»å¯ä»¥è¯´æ˜¯ <code>java.util.regex</code> ä¸­çš„æ ¸å¿ƒç±»ï¼Œå®ƒæœ‰ä¸‰ç±»åŠŸèƒ½ï¼šæ ¡éªŒã€æŸ¥æ‰¾ã€æ›¿æ¢ã€‚</p>
<h4 id="æ ¡éªŒ"><a href="#æ ¡éªŒ" class="headerlink" title="æ ¡éªŒ"></a>æ ¡éªŒ</h4><p>ä¸ºäº†æ ¡éªŒæ–‡æœ¬æ˜¯å¦ä¸æ­£åˆ™è§„åˆ™åŒ¹é…ï¼ŒMatcher æä¾›äº†ä»¥ä¸‹å‡ ä¸ªè¿”å›å€¼ä¸º <code>boolean</code> çš„æ–¹æ³•ã€‚</p>
<table>
<thead>
<tr>
<th><strong>åºå·</strong></th>
<th><strong>æ–¹æ³•åŠè¯´æ˜</strong></th>
</tr>
</thead>
<tbody><tr>
<td>1</td>
<td>**public boolean lookingAt() ** å°è¯•å°†ä»åŒºåŸŸå¼€å¤´å¼€å§‹çš„è¾“å…¥åºåˆ—ä¸è¯¥æ¨¡å¼åŒ¹é…ã€‚</td>
</tr>
<tr>
<td>2</td>
<td>**public boolean find() **å°è¯•æŸ¥æ‰¾ä¸è¯¥æ¨¡å¼åŒ¹é…çš„è¾“å…¥åºåˆ—çš„ä¸‹ä¸€ä¸ªå­åºåˆ—ã€‚</td>
</tr>
<tr>
<td>3</td>
<td><strong>public boolean find(int startï¼‰</strong>é‡ç½®æ­¤åŒ¹é…å™¨ï¼Œç„¶åå°è¯•æŸ¥æ‰¾åŒ¹é…è¯¥æ¨¡å¼ã€ä»æŒ‡å®šç´¢å¼•å¼€å§‹çš„è¾“å…¥åºåˆ—çš„ä¸‹ä¸€ä¸ªå­åºåˆ—ã€‚</td>
</tr>
<tr>
<td>4</td>
<td>**public boolean matches() **å°è¯•å°†æ•´ä¸ªåŒºåŸŸä¸æ¨¡å¼åŒ¹é…ã€‚</td>
</tr>
</tbody></table>
<p>å¦‚æœä½ å‚»å‚»åˆ†ä¸æ¸…ä¸Šé¢çš„æŸ¥æ‰¾æ–¹æ³•æœ‰ä»€ä¹ˆåŒºåˆ«ï¼Œé‚£ä¹ˆä¸‹é¢ä¸€ä¸ªä¾‹å­å°±å¯ä»¥è®©ä½ ç§’æ‡‚ã€‚</p>
<p>ã€ç¤ºä¾‹ã€‘lookingAtã€findã€matches</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">	checkLookingAt(<span class="string">&quot;hello&quot;</span>, <span class="string">&quot;helloworld&quot;</span>);</span><br><span class="line">	checkLookingAt(<span class="string">&quot;world&quot;</span>, <span class="string">&quot;helloworld&quot;</span>);</span><br><span class="line"></span><br><span class="line">	checkFind(<span class="string">&quot;hello&quot;</span>, <span class="string">&quot;helloworld&quot;</span>);</span><br><span class="line">	checkFind(<span class="string">&quot;world&quot;</span>, <span class="string">&quot;helloworld&quot;</span>);</span><br><span class="line"></span><br><span class="line">	checkMatches(<span class="string">&quot;hello&quot;</span>, <span class="string">&quot;helloworld&quot;</span>);</span><br><span class="line">	checkMatches(<span class="string">&quot;world&quot;</span>, <span class="string">&quot;helloworld&quot;</span>);</span><br><span class="line">	checkMatches(<span class="string">&quot;helloworld&quot;</span>, <span class="string">&quot;helloworld&quot;</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">checkLookingAt</span><span class="params">(String regex, String content)</span> &#123;</span><br><span class="line">	<span class="type">Pattern</span> <span class="variable">p</span> <span class="operator">=</span> Pattern.compile(regex);</span><br><span class="line">	<span class="type">Matcher</span> <span class="variable">m</span> <span class="operator">=</span> p.matcher(content);</span><br><span class="line">	<span class="keyword">if</span> (m.lookingAt()) &#123;</span><br><span class="line">		System.out.println(content + <span class="string">&quot;\tlookingAtï¼š &quot;</span> + regex);</span><br><span class="line">	&#125; <span class="keyword">else</span> &#123;</span><br><span class="line">		System.out.println(content + <span class="string">&quot;\tnot lookingAtï¼š &quot;</span> + regex);</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">checkFind</span><span class="params">(String regex, String content)</span> &#123;</span><br><span class="line">	<span class="type">Pattern</span> <span class="variable">p</span> <span class="operator">=</span> Pattern.compile(regex);</span><br><span class="line">	<span class="type">Matcher</span> <span class="variable">m</span> <span class="operator">=</span> p.matcher(content);</span><br><span class="line">	<span class="keyword">if</span> (m.find()) &#123;</span><br><span class="line">		System.out.println(content + <span class="string">&quot;\tfindï¼š &quot;</span> + regex);</span><br><span class="line">	&#125; <span class="keyword">else</span> &#123;</span><br><span class="line">		System.out.println(content + <span class="string">&quot;\tnot findï¼š &quot;</span> + regex);</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">checkMatches</span><span class="params">(String regex, String content)</span> &#123;</span><br><span class="line">	<span class="type">Pattern</span> <span class="variable">p</span> <span class="operator">=</span> Pattern.compile(regex);</span><br><span class="line">	<span class="type">Matcher</span> <span class="variable">m</span> <span class="operator">=</span> p.matcher(content);</span><br><span class="line">	<span class="keyword">if</span> (m.matches()) &#123;</span><br><span class="line">		System.out.println(content + <span class="string">&quot;\tmatchesï¼š &quot;</span> + regex);</span><br><span class="line">	&#125; <span class="keyword">else</span> &#123;</span><br><span class="line">		System.out.println(content + <span class="string">&quot;\tnot matchesï¼š &quot;</span> + regex);</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>è¾“å‡ºï¼š</p>
<figure class="highlight xquery"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">helloworld	lookingAtï¼š hello</span><br><span class="line">helloworld<span class="built_in">	not</span> lookingAtï¼š world</span><br><span class="line">helloworld	findï¼š hello</span><br><span class="line">helloworld	findï¼š world</span><br><span class="line">helloworld<span class="built_in">	not</span><span class="built_in"> matches</span>ï¼š hello</span><br><span class="line">helloworld<span class="built_in">	not</span><span class="built_in"> matches</span>ï¼š world</span><br><span class="line">helloworld<span class="built_in">	matches</span>ï¼š helloworld</span><br></pre></td></tr></table></figure>

<p><strong>è¯´æ˜</strong></p>
<p><code>regex = &quot;world&quot;</code> è¡¨ç¤ºçš„æ­£åˆ™è§„åˆ™æ˜¯ä»¥ world å¼€å¤´çš„å­—ç¬¦ä¸²ï¼Œ<code>regex = &quot;hello&quot;</code> å’Œ <code>regex = &quot;helloworld&quot;</code> ä¹Ÿæ˜¯åŒç†ã€‚</p>
<ul>
<li><code>lookingAt</code>æ–¹æ³•ä»å¤´éƒ¨å¼€å§‹ï¼Œæ£€æŸ¥ content å­—ç¬¦ä¸²æ˜¯å¦æœ‰å­å­—ç¬¦ä¸²äºæ­£åˆ™è§„åˆ™åŒ¹é…ã€‚</li>
<li><code>find</code>æ–¹æ³•æ£€æŸ¥ content å­—ç¬¦ä¸²æ˜¯å¦æœ‰å­å­—ç¬¦ä¸²äºæ­£åˆ™è§„åˆ™åŒ¹é…ï¼Œä¸ç®¡å­—ç¬¦ä¸²æ‰€åœ¨ä½ç½®ã€‚</li>
<li><code>matches</code>æ–¹æ³•æ£€æŸ¥ content å­—ç¬¦ä¸²æ•´ä½“æ˜¯å¦ä¸æ­£åˆ™è§„åˆ™åŒ¹é…ã€‚</li>
</ul>
<h4 id="æŸ¥æ‰¾"><a href="#æŸ¥æ‰¾" class="headerlink" title="æŸ¥æ‰¾"></a>æŸ¥æ‰¾</h4><p>ä¸ºäº†æŸ¥æ‰¾æ–‡æœ¬åŒ¹é…æ­£åˆ™è§„åˆ™çš„ä½ç½®ï¼Œ<code>Matcher</code>æä¾›äº†ä»¥ä¸‹æ–¹æ³•ï¼š</p>
<table>
<thead>
<tr>
<th><strong>åºå·</strong></th>
<th><strong>æ–¹æ³•åŠè¯´æ˜</strong></th>
</tr>
</thead>
<tbody><tr>
<td>1</td>
<td>**public int start() **è¿”å›ä»¥å‰åŒ¹é…çš„åˆå§‹ç´¢å¼•ã€‚</td>
</tr>
<tr>
<td>2</td>
<td><strong>public int start(int group)</strong> è¿”å›åœ¨ä»¥å‰çš„åŒ¹é…æ“ä½œæœŸé—´ï¼Œç”±ç»™å®šç»„æ‰€æ•è·çš„å­åºåˆ—çš„åˆå§‹ç´¢å¼•</td>
</tr>
<tr>
<td>3</td>
<td>**public int end()**è¿”å›æœ€ååŒ¹é…å­—ç¬¦ä¹‹åçš„åç§»é‡ã€‚</td>
</tr>
<tr>
<td>4</td>
<td>**public int end(int group)**è¿”å›åœ¨ä»¥å‰çš„åŒ¹é…æ“ä½œæœŸé—´ï¼Œç”±ç»™å®šç»„æ‰€æ•è·å­åºåˆ—çš„æœ€åå­—ç¬¦ä¹‹åçš„åç§»é‡ã€‚</td>
</tr>
<tr>
<td>5</td>
<td>**public String group()**è¿”å›å‰ä¸€ä¸ªç¬¦åˆåŒ¹é…æ¡ä»¶çš„å­åºåˆ—ã€‚</td>
</tr>
<tr>
<td>6</td>
<td>**public String group(int group)**è¿”å›æŒ‡å®šçš„ç¬¦åˆåŒ¹é…æ¡ä»¶çš„å­åºåˆ—ã€‚</td>
</tr>
</tbody></table>
<p>ã€ç¤ºä¾‹ã€‘ä½¿ç”¨ start()ã€end()ã€group() æŸ¥æ‰¾æ‰€æœ‰åŒ¹é…æ­£åˆ™æ¡ä»¶çš„å­åºåˆ—</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">	<span class="keyword">final</span> <span class="type">String</span> <span class="variable">regex</span> <span class="operator">=</span> <span class="string">&quot;world&quot;</span>;</span><br><span class="line">	<span class="keyword">final</span> <span class="type">String</span> <span class="variable">content</span> <span class="operator">=</span> <span class="string">&quot;helloworld helloworld&quot;</span>;</span><br><span class="line">	<span class="type">Pattern</span> <span class="variable">p</span> <span class="operator">=</span> Pattern.compile(regex);</span><br><span class="line">	<span class="type">Matcher</span> <span class="variable">m</span> <span class="operator">=</span> p.matcher(content);</span><br><span class="line">	System.out.println(<span class="string">&quot;content: &quot;</span> + content);</span><br><span class="line"></span><br><span class="line">	<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>;</span><br><span class="line">	<span class="keyword">while</span> (m.find()) &#123;</span><br><span class="line">		i++;</span><br><span class="line">		System.out.println(<span class="string">&quot;[&quot;</span> + i + <span class="string">&quot;th] found&quot;</span>);</span><br><span class="line">		System.out.print(<span class="string">&quot;start: &quot;</span> + m.start() + <span class="string">&quot;, &quot;</span>);</span><br><span class="line">		System.out.print(<span class="string">&quot;end: &quot;</span> + m.end() + <span class="string">&quot;, &quot;</span>);</span><br><span class="line">		System.out.print(<span class="string">&quot;group: &quot;</span> + m.group() + <span class="string">&quot;\n&quot;</span>);</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><strong>è¾“å‡º</strong></p>
<figure class="highlight pgsql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">content: helloworld helloworld</span><br><span class="line">[<span class="number">1</span>th] <span class="built_in">found</span></span><br><span class="line"><span class="keyword">start</span>: <span class="number">5</span>, <span class="keyword">end</span>: <span class="number">10</span>, <span class="keyword">group</span>: world</span><br><span class="line">[<span class="number">2</span>th] <span class="built_in">found</span></span><br><span class="line"><span class="keyword">start</span>: <span class="number">16</span>, <span class="keyword">end</span>: <span class="number">21</span>, <span class="keyword">group</span>: world</span><br></pre></td></tr></table></figure>

<p><strong>è¯´æ˜</strong></p>
<p>ä¾‹å­å¾ˆç›´ç™½ï¼Œä¸è¨€è‡ªæ˜äº†å§ã€‚</p>
<h4 id="æ›¿æ¢"><a href="#æ›¿æ¢" class="headerlink" title="æ›¿æ¢"></a>æ›¿æ¢</h4><p>æ›¿æ¢æ–¹æ³•æ˜¯æ›¿æ¢è¾“å…¥å­—ç¬¦ä¸²é‡Œæ–‡æœ¬çš„æ–¹æ³•ï¼š</p>
<table>
<thead>
<tr>
<th><strong>åºå·</strong></th>
<th><strong>æ–¹æ³•åŠè¯´æ˜</strong></th>
</tr>
</thead>
<tbody><tr>
<td>1</td>
<td>**public Matcher appendReplacement(StringBuffer sb, String replacement)**å®ç°éç»ˆç«¯æ·»åŠ å’Œæ›¿æ¢æ­¥éª¤ã€‚</td>
</tr>
<tr>
<td>2</td>
<td>**public StringBuffer appendTail(StringBuffer sb)**å®ç°ç»ˆç«¯æ·»åŠ å’Œæ›¿æ¢æ­¥éª¤ã€‚</td>
</tr>
<tr>
<td>3</td>
<td>**public String replaceAll(String replacement) ** æ›¿æ¢æ¨¡å¼ä¸ç»™å®šæ›¿æ¢å­—ç¬¦ä¸²ç›¸åŒ¹é…çš„è¾“å…¥åºåˆ—çš„æ¯ä¸ªå­åºåˆ—ã€‚</td>
</tr>
<tr>
<td>4</td>
<td><strong>public String replaceFirst(String replacement)</strong> æ›¿æ¢æ¨¡å¼ä¸ç»™å®šæ›¿æ¢å­—ç¬¦ä¸²åŒ¹é…çš„è¾“å…¥åºåˆ—çš„ç¬¬ä¸€ä¸ªå­åºåˆ—ã€‚</td>
</tr>
<tr>
<td>5</td>
<td>**public static String quoteReplacement(String s)**è¿”å›æŒ‡å®šå­—ç¬¦ä¸²çš„å­—é¢æ›¿æ¢å­—ç¬¦ä¸²ã€‚è¿™ä¸ªæ–¹æ³•è¿”å›ä¸€ä¸ªå­—ç¬¦ä¸²ï¼Œå°±åƒä¼ é€’ç»™ Matcher ç±»çš„ appendReplacement æ–¹æ³•ä¸€ä¸ªå­—é¢å­—ç¬¦ä¸²ä¸€æ ·å·¥ä½œã€‚</td>
</tr>
</tbody></table>
<p>ã€ç¤ºä¾‹ã€‘replaceFirst å’Œ replaceAll</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">	<span class="type">String</span> <span class="variable">regex</span> <span class="operator">=</span> <span class="string">&quot;can&quot;</span>;</span><br><span class="line">	<span class="type">String</span> <span class="variable">replace</span> <span class="operator">=</span> <span class="string">&quot;can not&quot;</span>;</span><br><span class="line">	<span class="type">String</span> <span class="variable">content</span> <span class="operator">=</span> <span class="string">&quot;I can because I think I can.&quot;</span>;</span><br><span class="line"></span><br><span class="line">	<span class="type">Pattern</span> <span class="variable">p</span> <span class="operator">=</span> Pattern.compile(regex);</span><br><span class="line">	<span class="type">Matcher</span> <span class="variable">m</span> <span class="operator">=</span> p.matcher(content);</span><br><span class="line"></span><br><span class="line">	System.out.println(<span class="string">&quot;content: &quot;</span> + content);</span><br><span class="line">	System.out.println(<span class="string">&quot;replaceFirst: &quot;</span> + m.replaceFirst(replace));</span><br><span class="line">	System.out.println(<span class="string">&quot;replaceAll: &quot;</span> + m.replaceAll(replace));</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><strong>è¾“å‡º</strong></p>
<figure class="highlight mathematica"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable">content</span><span class="operator">:</span> <span class="built_in">I</span> <span class="variable">can</span> <span class="variable">because</span> <span class="built_in">I</span> <span class="variable">think</span> <span class="built_in">I</span> <span class="variable">can</span><span class="operator">.</span></span><br><span class="line"><span class="variable">replaceFirst</span><span class="operator">:</span> <span class="built_in">I</span> <span class="variable">can</span> <span class="variable">not</span> <span class="variable">because</span> <span class="built_in">I</span> <span class="variable">think</span> <span class="built_in">I</span> <span class="variable">can</span><span class="operator">.</span></span><br><span class="line"><span class="variable">replaceAll</span><span class="operator">:</span> <span class="built_in">I</span> <span class="variable">can</span> <span class="variable">not</span> <span class="variable">because</span> <span class="built_in">I</span> <span class="variable">think</span> <span class="built_in">I</span> <span class="variable">can</span> <span class="variable">not</span><span class="operator">.</span></span><br></pre></td></tr></table></figure>

<p><strong>è¯´æ˜</strong></p>
<p>replaceFirstï¼šæ›¿æ¢ç¬¬ä¸€ä¸ªåŒ¹é…æ­£åˆ™è§„åˆ™çš„å­åºåˆ—ã€‚</p>
<p>replaceAllï¼šæ›¿æ¢æ‰€æœ‰åŒ¹é…æ­£åˆ™è§„åˆ™çš„å­åºåˆ—ã€‚</p>
<p>ã€ç¤ºä¾‹ã€‘appendReplacementã€appendTail å’Œ replaceAll</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">	<span class="type">String</span> <span class="variable">regex</span> <span class="operator">=</span> <span class="string">&quot;can&quot;</span>;</span><br><span class="line">	<span class="type">String</span> <span class="variable">replace</span> <span class="operator">=</span> <span class="string">&quot;can not&quot;</span>;</span><br><span class="line">	<span class="type">String</span> <span class="variable">content</span> <span class="operator">=</span> <span class="string">&quot;I can because I think I can.&quot;</span>;</span><br><span class="line">	<span class="type">StringBuffer</span> <span class="variable">sb</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">StringBuffer</span>();</span><br><span class="line">	<span class="type">StringBuffer</span> <span class="variable">sb2</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">StringBuffer</span>();</span><br><span class="line"></span><br><span class="line">	System.out.println(<span class="string">&quot;content: &quot;</span> + content);</span><br><span class="line">	<span class="type">Pattern</span> <span class="variable">p</span> <span class="operator">=</span> Pattern.compile(regex);</span><br><span class="line">	<span class="type">Matcher</span> <span class="variable">m</span> <span class="operator">=</span> p.matcher(content);</span><br><span class="line">	<span class="keyword">while</span> (m.find()) &#123;</span><br><span class="line">		m.appendReplacement(sb, replace);</span><br><span class="line">	&#125;</span><br><span class="line">	System.out.println(<span class="string">&quot;appendReplacement: &quot;</span> + sb);</span><br><span class="line">	m.appendTail(sb);</span><br><span class="line">	System.out.println(<span class="string">&quot;appendTail: &quot;</span> + sb);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><strong>è¾“å‡º</strong></p>
<figure class="highlight mathematica"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable">content</span><span class="operator">:</span> <span class="built_in">I</span> <span class="variable">can</span> <span class="variable">because</span> <span class="built_in">I</span> <span class="variable">think</span> <span class="built_in">I</span> <span class="variable">can</span><span class="operator">.</span></span><br><span class="line"><span class="variable">appendReplacement</span><span class="operator">:</span> <span class="built_in">I</span> <span class="variable">can</span> <span class="variable">not</span> <span class="variable">because</span> <span class="built_in">I</span> <span class="variable">think</span> <span class="built_in">I</span> <span class="variable">can</span> <span class="variable">not</span></span><br><span class="line"><span class="variable">appendTail</span><span class="operator">:</span> <span class="built_in">I</span> <span class="variable">can</span> <span class="variable">not</span> <span class="variable">because</span> <span class="built_in">I</span> <span class="variable">think</span> <span class="built_in">I</span> <span class="variable">can</span> <span class="variable">not</span><span class="operator">.</span></span><br></pre></td></tr></table></figure>

<p><strong>è¯´æ˜</strong></p>
<p>ä»è¾“å‡ºç»“æœå¯ä»¥çœ‹å‡ºï¼Œ<code>appendReplacement</code>å’Œ<code>appendTail</code>æ–¹æ³•ç»„åˆèµ·æ¥ç”¨ï¼ŒåŠŸèƒ½å’Œ<code>replaceAll</code>æ˜¯ä¸€æ ·çš„ã€‚</p>
<p>å¦‚æœä½ æŸ¥çœ‹<code>replaceAll</code>çš„æºç ï¼Œä¼šå‘ç°å…¶å†…éƒ¨å°±æ˜¯ä½¿ç”¨<code>appendReplacement</code>å’Œ<code>appendTail</code>æ–¹æ³•ç»„åˆæ¥å®ç°çš„ã€‚</p>
<p>ã€ç¤ºä¾‹ã€‘quoteReplacement å’Œ replaceAllï¼Œè§£å†³ç‰¹æ®Šå­—ç¬¦æ›¿æ¢é—®é¢˜</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">	<span class="type">String</span> <span class="variable">regex</span> <span class="operator">=</span> <span class="string">&quot;\\$\\&#123;.*?\\&#125;&quot;</span>;</span><br><span class="line">	<span class="type">String</span> <span class="variable">replace</span> <span class="operator">=</span> <span class="string">&quot;$&#123;product&#125;&quot;</span>;</span><br><span class="line">	<span class="type">String</span> <span class="variable">content</span> <span class="operator">=</span> <span class="string">&quot;product is $&#123;productName&#125;.&quot;</span>;</span><br><span class="line"></span><br><span class="line">	<span class="type">Pattern</span> <span class="variable">p</span> <span class="operator">=</span> Pattern.compile(regex);</span><br><span class="line">	<span class="type">Matcher</span> <span class="variable">m</span> <span class="operator">=</span> p.matcher(content);</span><br><span class="line">	<span class="type">String</span> <span class="variable">replaceAll</span> <span class="operator">=</span> m.replaceAll(replace);</span><br><span class="line"></span><br><span class="line">	System.out.println(<span class="string">&quot;content: &quot;</span> + content);</span><br><span class="line">	System.out.println(<span class="string">&quot;replaceAll: &quot;</span> + replaceAll);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><strong>è¾“å‡º</strong></p>
<figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">Exception <span class="keyword">in</span> thread <span class="string">&quot;main&quot;</span> java<span class="selector-class">.lang</span><span class="selector-class">.IllegalArgumentException</span>: No group with name &#123;product&#125;</span><br><span class="line">	at java<span class="selector-class">.util</span><span class="selector-class">.regex</span><span class="selector-class">.Matcher</span><span class="selector-class">.appendReplacement</span>(Matcher<span class="selector-class">.java</span>:<span class="number">849</span>)</span><br><span class="line">	at java<span class="selector-class">.util</span><span class="selector-class">.regex</span><span class="selector-class">.Matcher</span><span class="selector-class">.replaceAll</span>(Matcher<span class="selector-class">.java</span>:<span class="number">955</span>)</span><br><span class="line">	at org<span class="selector-class">.zp</span><span class="selector-class">.notes</span><span class="selector-class">.javase</span><span class="selector-class">.regex</span><span class="selector-class">.RegexDemo</span><span class="selector-class">.wrongMethod</span>(RegexDemo<span class="selector-class">.java</span>:<span class="number">42</span>)</span><br><span class="line">	at org<span class="selector-class">.zp</span><span class="selector-class">.notes</span><span class="selector-class">.javase</span><span class="selector-class">.regex</span><span class="selector-class">.RegexDemo</span><span class="selector-class">.main</span>(RegexDemo<span class="selector-class">.java</span>:<span class="number">18</span>)</span><br><span class="line">	at sun<span class="selector-class">.reflect</span><span class="selector-class">.NativeMethodAccessorImpl</span><span class="selector-class">.invoke0</span>(Native Method)</span><br><span class="line">	at sun<span class="selector-class">.reflect</span><span class="selector-class">.NativeMethodAccessorImpl</span><span class="selector-class">.invoke</span>(NativeMethodAccessorImpl<span class="selector-class">.java</span>:<span class="number">62</span>)</span><br><span class="line">	at sun<span class="selector-class">.reflect</span><span class="selector-class">.DelegatingMethodAccessorImpl</span><span class="selector-class">.invoke</span>(DelegatingMethodAccessorImpl<span class="selector-class">.java</span>:<span class="number">43</span>)</span><br><span class="line">	at java<span class="selector-class">.lang</span><span class="selector-class">.reflect</span><span class="selector-class">.Method</span><span class="selector-class">.invoke</span>(Method<span class="selector-class">.java</span>:<span class="number">498</span>)</span><br><span class="line">	at com<span class="selector-class">.intellij</span><span class="selector-class">.rt</span><span class="selector-class">.execution</span><span class="selector-class">.application</span><span class="selector-class">.AppMain</span><span class="selector-class">.main</span>(AppMain<span class="selector-class">.java</span>:<span class="number">147</span>)</span><br></pre></td></tr></table></figure>

<p><strong>è¯´æ˜</strong></p>
<p><code>String regex = &quot;\\$\\&#123;.*?\\&#125;&quot;;</code>è¡¨ç¤ºåŒ¹é…ç±»ä¼¼<code>$&#123;name&#125;</code>è¿™æ ·çš„å­—ç¬¦ä¸²ã€‚ç”±äº<code>$</code>ã€<code>&#123;</code> ã€<code>&#125;</code>éƒ½æ˜¯ç‰¹æ®Šå­—ç¬¦ï¼Œéœ€è¦ç”¨åä¹‰å­—ç¬¦<code>\</code>æ¥ä¿®é¥°æ‰èƒ½è¢«å½“åšä¸€ä¸ªå­—ç¬¦ä¸²å­—ç¬¦æ¥å¤„ç†ã€‚</p>
<p>ä¸Šé¢çš„ä¾‹å­æ˜¯æƒ³å°† <code>$&#123;productName&#125;</code> æ›¿æ¢ä¸º <code>$&#123;product&#125;</code> ï¼Œç„¶è€Œ<code>replaceAll</code>æ–¹æ³•å´å°†ä¼ å…¥çš„å­—ç¬¦ä¸²ä¸­çš„<code>$</code>å½“åšç‰¹æ®Šå­—ç¬¦æ¥å¤„ç†äº†ã€‚ç»“æœäº§ç”Ÿå¼‚å¸¸ã€‚</p>
<p>å¦‚ä½•è§£å†³è¿™ä¸ªé—®é¢˜?</p>
<p>JDK1.5 å¼•å…¥äº†<code>quoteReplacement</code>æ–¹æ³•ã€‚å®ƒå¯ä»¥ç”¨æ¥è½¬æ¢ç‰¹æ®Šå­—ç¬¦ã€‚å…¶å®æºç éå¸¸ç®€å•ï¼Œå°±æ˜¯åˆ¤æ–­å­—ç¬¦ä¸²ä¸­å¦‚æœæœ‰<code>\</code>æˆ–<code>$</code>ï¼Œå°±ä¸ºå®ƒåŠ ä¸€ä¸ªè½¬ä¹‰å­—ç¬¦<code>\</code></p>
<p>æˆ‘ä»¬å¯¹ä¸Šé¢çš„ä»£ç ç•¥ä½œè°ƒæ•´ï¼š</p>
<p><code>m.replaceAll(replace)</code>æ”¹ä¸º<code>m.replaceAll(Matcher.quoteReplacement(replace))</code>ï¼Œæ–°ä»£ç å¦‚ä¸‹ï¼š</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">	<span class="type">String</span> <span class="variable">regex</span> <span class="operator">=</span> <span class="string">&quot;\\$\\&#123;.*?\\&#125;&quot;</span>;</span><br><span class="line">	<span class="type">String</span> <span class="variable">replace</span> <span class="operator">=</span> <span class="string">&quot;$&#123;product&#125;&quot;</span>;</span><br><span class="line">	<span class="type">String</span> <span class="variable">content</span> <span class="operator">=</span> <span class="string">&quot;product is $&#123;productName&#125;.&quot;</span>;</span><br><span class="line"></span><br><span class="line">	<span class="type">Pattern</span> <span class="variable">p</span> <span class="operator">=</span> Pattern.compile(regex);</span><br><span class="line">	<span class="type">Matcher</span> <span class="variable">m</span> <span class="operator">=</span> p.matcher(content);</span><br><span class="line">	<span class="type">String</span> <span class="variable">replaceAll</span> <span class="operator">=</span> m.replaceAll(Matcher.quoteReplacement(replace));</span><br><span class="line"></span><br><span class="line">	System.out.println(<span class="string">&quot;content: &quot;</span> + content);</span><br><span class="line">	System.out.println(<span class="string">&quot;replaceAll: &quot;</span> + replaceAll);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><strong>è¾“å‡º</strong></p>
<figure class="highlight maxima"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">content</span>: <span class="built_in">product</span> <span class="built_in">is</span> $&#123;productName&#125;.</span><br><span class="line">replaceAll: <span class="built_in">product</span> <span class="built_in">is</span> $&#123;<span class="built_in">product</span>&#125;.</span><br></pre></td></tr></table></figure>

<p><strong>è¯´æ˜</strong></p>
<p>å­—ç¬¦ä¸²ä¸­å¦‚æœæœ‰<code>\</code>æˆ–<code>$</code>ï¼Œä¸èƒ½è¢«æ­£å¸¸è§£æçš„é—®é¢˜è§£å†³ã€‚</p>
<h2 id="å…ƒå­—ç¬¦"><a href="#å…ƒå­—ç¬¦" class="headerlink" title="å…ƒå­—ç¬¦"></a>å…ƒå­—ç¬¦</h2><p>å…ƒå­—ç¬¦(metacharacters)å°±æ˜¯æ­£åˆ™è¡¨è¾¾å¼ä¸­å…·æœ‰ç‰¹æ®Šæ„ä¹‰çš„ä¸“ç”¨å­—ç¬¦ã€‚</p>
<h3 id="åŸºæœ¬å…ƒå­—ç¬¦"><a href="#åŸºæœ¬å…ƒå­—ç¬¦" class="headerlink" title="åŸºæœ¬å…ƒå­—ç¬¦"></a>åŸºæœ¬å…ƒå­—ç¬¦</h3><p>æ­£åˆ™è¡¨è¾¾å¼çš„å…ƒå­—ç¬¦éš¾ä»¥è®°å¿†ï¼Œå¾ˆå¤§ç¨‹åº¦ä¸Šæ˜¯å› ä¸ºæœ‰å¾ˆå¤šä¸ºäº†ç®€åŒ–è¡¨è¾¾è€Œå‡ºç°çš„ç­‰ä»·å­—ç¬¦ã€‚è€Œå®é™…ä¸Šæœ€åŸºæœ¬çš„å…ƒå­—ç¬¦ï¼Œå¹¶æ²¡æœ‰é‚£ä¹ˆå¤šã€‚å¯¹äºå¤§éƒ¨åˆ†çš„åœºæ™¯ï¼ŒåŸºæœ¬å…ƒå­—ç¬¦éƒ½å¯ä»¥æå®šã€‚è®©æˆ‘ä»¬ä»ä¸€ä¸ªä¸ªå®ä¾‹å‡ºå‘ï¼Œç”±æµ…å…¥æ·±çš„å»ä½“ä¼šæ­£åˆ™çš„å¥¥å¦™ã€‚</p>
<h4 id="å¤šé€‰ï¼ˆ-ï¼‰"><a href="#å¤šé€‰ï¼ˆ-ï¼‰" class="headerlink" title="å¤šé€‰ï¼ˆ|ï¼‰"></a>å¤šé€‰ï¼ˆ<code>|</code>ï¼‰</h4><p>ã€ç¤ºä¾‹ã€‘åŒ¹é…ä¸€ä¸ªç¡®å®šçš„å­—ç¬¦ä¸²</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">checkMatches(<span class="string">&quot;abc&quot;</span>, <span class="string">&quot;abc&quot;</span>);</span><br></pre></td></tr></table></figure>

<p>å¦‚æœè¦åŒ¹é…ä¸€ä¸ªç¡®å®šçš„å­—ç¬¦ä¸²ï¼Œéå¸¸ç®€å•ï¼Œå¦‚ä¾‹ 1 æ‰€ç¤ºã€‚ä½†æ˜¯ï¼Œå¦‚æœä½ ä¸ç¡®å®šè¦åŒ¹é…çš„å­—ç¬¦ä¸²ï¼Œå¸Œæœ›æœ‰å¤šä¸ªé€‰æ‹©ï¼Œæ€ä¹ˆåŠï¼Ÿç­”æ¡ˆæ˜¯ï¼šä½¿ç”¨å…ƒå­—ç¬¦<code>|</code> ï¼Œå®ƒçš„å«ä¹‰æ˜¯æˆ–ã€‚</p>
<p>ã€ç¤ºä¾‹ã€‘åŒ¹é…å¤šä¸ªå¯é€‰çš„å­—ç¬¦ä¸²</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// æµ‹è¯•æ­£åˆ™è¡¨è¾¾å¼å­—ç¬¦ï¼š|</span></span><br><span class="line">Assert.assertTrue(checkMatches(<span class="string">&quot;yes|no&quot;</span>, <span class="string">&quot;yes&quot;</span>));</span><br><span class="line">Assert.assertTrue(checkMatches(<span class="string">&quot;yes|no&quot;</span>, <span class="string">&quot;no&quot;</span>));</span><br><span class="line">Assert.assertFalse(checkMatches(<span class="string">&quot;yes|no&quot;</span>, <span class="string">&quot;right&quot;</span>));</span><br><span class="line"></span><br><span class="line"><span class="comment">// è¾“å‡º</span></span><br><span class="line"><span class="comment">// yes	matchesï¼š yes|no</span></span><br><span class="line"><span class="comment">// no	matchesï¼š yes|no</span></span><br><span class="line"><span class="comment">// right	not matchesï¼š yes|no</span></span><br></pre></td></tr></table></figure>

<h4 id="åˆ†ç»„ï¼ˆ-ï¼‰"><a href="#åˆ†ç»„ï¼ˆ-ï¼‰" class="headerlink" title="åˆ†ç»„ï¼ˆ()ï¼‰"></a>åˆ†ç»„ï¼ˆ<code>()</code>ï¼‰</h4><p>å¦‚æœä½ å¸Œæœ›è¡¨è¾¾å¼ç”±å¤šä¸ªå­è¡¨è¾¾å¼ç»„æˆï¼Œä½ å¯ä»¥ä½¿ç”¨ <code>()</code>ã€‚</p>
<p>ã€ç¤ºä¾‹ã€‘åŒ¹é…ç»„åˆå­—ç¬¦ä¸²</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">Assert.assertTrue(checkMatches(<span class="string">&quot;(play|end)(ing|ed)&quot;</span>, <span class="string">&quot;ended&quot;</span>));</span><br><span class="line">Assert.assertTrue(checkMatches(<span class="string">&quot;(play|end)(ing|ed)&quot;</span>, <span class="string">&quot;ending&quot;</span>));</span><br><span class="line">Assert.assertTrue(checkMatches(<span class="string">&quot;(play|end)(ing|ed)&quot;</span>, <span class="string">&quot;playing&quot;</span>));</span><br><span class="line">Assert.assertTrue(checkMatches(<span class="string">&quot;(play|end)(ing|ed)&quot;</span>, <span class="string">&quot;played&quot;</span>));</span><br><span class="line"></span><br><span class="line"><span class="comment">// è¾“å‡º</span></span><br><span class="line"><span class="comment">// ended	matchesï¼š (play|end)(ing|ed)</span></span><br><span class="line"><span class="comment">// ending	matchesï¼š (play|end)(ing|ed)</span></span><br><span class="line"><span class="comment">// playing	matchesï¼š (play|end)(ing|ed)</span></span><br><span class="line"><span class="comment">// played	matchesï¼š (play|end)(ing|ed)</span></span><br></pre></td></tr></table></figure>

<h4 id="æŒ‡å®šå•å­—ç¬¦æœ‰æ•ˆèŒƒå›´ï¼ˆ-ï¼‰"><a href="#æŒ‡å®šå•å­—ç¬¦æœ‰æ•ˆèŒƒå›´ï¼ˆ-ï¼‰" class="headerlink" title="æŒ‡å®šå•å­—ç¬¦æœ‰æ•ˆèŒƒå›´ï¼ˆ[]ï¼‰"></a>æŒ‡å®šå•å­—ç¬¦æœ‰æ•ˆèŒƒå›´ï¼ˆ<code>[]</code>ï¼‰</h4><p>å‰é¢å±•ç¤ºäº†å¦‚ä½•åŒ¹é…å­—ç¬¦ä¸²ï¼Œä½†æ˜¯å¾ˆå¤šæ—¶å€™ä½ éœ€è¦ç²¾ç¡®çš„åŒ¹é…ä¸€ä¸ªå­—ç¬¦ï¼Œè¿™æ—¶å¯ä»¥ä½¿ç”¨<code>[]</code> ã€‚</p>
<p>ã€ç¤ºä¾‹ã€‘å­—ç¬¦åœ¨æŒ‡å®šèŒƒå›´</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// æµ‹è¯•æ­£åˆ™è¡¨è¾¾å¼å­—ç¬¦ï¼š[]</span></span><br><span class="line">Assert.assertTrue(checkMatches(<span class="string">&quot;[abc]&quot;</span>, <span class="string">&quot;b&quot;</span>));  <span class="comment">// å­—ç¬¦åªèƒ½æ˜¯aã€bã€c</span></span><br><span class="line">Assert.assertTrue(checkMatches(<span class="string">&quot;[a-z]&quot;</span>, <span class="string">&quot;m&quot;</span>)); <span class="comment">// å­—ç¬¦åªèƒ½æ˜¯a - z</span></span><br><span class="line">Assert.assertTrue(checkMatches(<span class="string">&quot;[A-Z]&quot;</span>, <span class="string">&quot;O&quot;</span>)); <span class="comment">// å­—ç¬¦åªèƒ½æ˜¯A - Z</span></span><br><span class="line">Assert.assertTrue(checkMatches(<span class="string">&quot;[a-zA-Z]&quot;</span>, <span class="string">&quot;K&quot;</span>)); <span class="comment">// å­—ç¬¦åªèƒ½æ˜¯a - zå’ŒA - Z</span></span><br><span class="line">Assert.assertTrue(checkMatches(<span class="string">&quot;[a-zA-Z]&quot;</span>, <span class="string">&quot;k&quot;</span>));</span><br><span class="line">Assert.assertTrue(checkMatches(<span class="string">&quot;[0-9]&quot;</span>, <span class="string">&quot;5&quot;</span>)); <span class="comment">// å­—ç¬¦åªèƒ½æ˜¯0 - 9</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// è¾“å‡º</span></span><br><span class="line"><span class="comment">// b	matchesï¼š [abc]</span></span><br><span class="line"><span class="comment">// m	matchesï¼š [a-z]</span></span><br><span class="line"><span class="comment">// O	matchesï¼š [A-Z]</span></span><br><span class="line"><span class="comment">// K	matchesï¼š [a-zA-Z]</span></span><br><span class="line"><span class="comment">// k	matchesï¼š [a-zA-Z]</span></span><br><span class="line"><span class="comment">// 5	matchesï¼š [0-9]</span></span><br></pre></td></tr></table></figure>

<h4 id="æŒ‡å®šå•å­—ç¬¦æ— æ•ˆèŒƒå›´ï¼ˆ-ï¼‰"><a href="#æŒ‡å®šå•å­—ç¬¦æ— æ•ˆèŒƒå›´ï¼ˆ-ï¼‰" class="headerlink" title="æŒ‡å®šå•å­—ç¬¦æ— æ•ˆèŒƒå›´ï¼ˆ [^]ï¼‰"></a>æŒ‡å®šå•å­—ç¬¦æ— æ•ˆèŒƒå›´ï¼ˆ <code>[^]</code>ï¼‰</h4><p>ã€ç¤ºä¾‹ã€‘å­—ç¬¦ä¸èƒ½åœ¨æŒ‡å®šèŒƒå›´</p>
<p>å¦‚æœéœ€è¦åŒ¹é…ä¸€ä¸ªå­—ç¬¦çš„é€†æ“ä½œï¼Œå³å­—ç¬¦ä¸èƒ½åœ¨æŒ‡å®šèŒƒå›´ï¼Œå¯ä»¥ä½¿ç”¨<code>[^]</code>ã€‚</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// æµ‹è¯•æ­£åˆ™è¡¨è¾¾å¼å­—ç¬¦ï¼š[^]</span></span><br><span class="line">Assert.assertFalse(checkMatches(<span class="string">&quot;[^abc]&quot;</span>, <span class="string">&quot;b&quot;</span>)); <span class="comment">// å­—ç¬¦ä¸èƒ½æ˜¯aã€bã€c</span></span><br><span class="line">Assert.assertFalse(checkMatches(<span class="string">&quot;[^a-z]&quot;</span>, <span class="string">&quot;m&quot;</span>)); <span class="comment">// å­—ç¬¦ä¸èƒ½æ˜¯a - z</span></span><br><span class="line">Assert.assertFalse(checkMatches(<span class="string">&quot;[^A-Z]&quot;</span>, <span class="string">&quot;O&quot;</span>)); <span class="comment">// å­—ç¬¦ä¸èƒ½æ˜¯A - Z</span></span><br><span class="line">Assert.assertFalse(checkMatches(<span class="string">&quot;[^a-zA-Z]&quot;</span>, <span class="string">&quot;K&quot;</span>)); <span class="comment">// å­—ç¬¦ä¸èƒ½æ˜¯a - zå’ŒA - Z</span></span><br><span class="line">Assert.assertFalse(checkMatches(<span class="string">&quot;[^a-zA-Z]&quot;</span>, <span class="string">&quot;k&quot;</span>));</span><br><span class="line">Assert.assertFalse(checkMatches(<span class="string">&quot;[^0-9]&quot;</span>, <span class="string">&quot;5&quot;</span>)); <span class="comment">// å­—ç¬¦ä¸èƒ½æ˜¯0 - 9</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// è¾“å‡º</span></span><br><span class="line"><span class="comment">// b	not matchesï¼š [^abc]</span></span><br><span class="line"><span class="comment">// m	not matchesï¼š [^a-z]</span></span><br><span class="line"><span class="comment">// O	not matchesï¼š [^A-Z]</span></span><br><span class="line"><span class="comment">// K	not matchesï¼š [^a-zA-Z]</span></span><br><span class="line"><span class="comment">// k	not matchesï¼š [^a-zA-Z]</span></span><br><span class="line"><span class="comment">// 5	not matchesï¼š [^0-9]</span></span><br></pre></td></tr></table></figure>

<h4 id="é™åˆ¶å­—ç¬¦æ•°é‡ï¼ˆ-ï¼‰"><a href="#é™åˆ¶å­—ç¬¦æ•°é‡ï¼ˆ-ï¼‰" class="headerlink" title="é™åˆ¶å­—ç¬¦æ•°é‡ï¼ˆ{}ï¼‰"></a>é™åˆ¶å­—ç¬¦æ•°é‡ï¼ˆ<code>&#123;&#125;</code>ï¼‰</h4><p>å¦‚æœæƒ³è¦æ§åˆ¶å­—ç¬¦å‡ºç°çš„æ¬¡æ•°ï¼Œå¯ä»¥ä½¿ç”¨ <code>&#123;&#125;</code>ã€‚</p>
<table>
<thead>
<tr>
<th>å­—ç¬¦</th>
<th>æè¿°</th>
</tr>
</thead>
<tbody><tr>
<td><code>&#123;n&#125;</code></td>
<td>n æ˜¯ä¸€ä¸ªéè´Ÿæ•´æ•°ã€‚åŒ¹é…ç¡®å®šçš„ n æ¬¡ã€‚</td>
</tr>
<tr>
<td><code>&#123;n,&#125;</code></td>
<td>n æ˜¯ä¸€ä¸ªéè´Ÿæ•´æ•°ã€‚è‡³å°‘åŒ¹é… n æ¬¡ã€‚</td>
</tr>
<tr>
<td><code>&#123;n,m&#125;</code></td>
<td>m å’Œ n å‡ä¸ºéè´Ÿæ•´æ•°ï¼Œå…¶ä¸­ n &lt;&#x3D; mã€‚æœ€å°‘åŒ¹é… n æ¬¡ä¸”æœ€å¤šåŒ¹é… m æ¬¡ã€‚</td>
</tr>
</tbody></table>
<p>ã€ç¤ºä¾‹ã€‘é™åˆ¶å­—ç¬¦å‡ºç°æ¬¡æ•°</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// &#123;n&#125;: n æ˜¯ä¸€ä¸ªéè´Ÿæ•´æ•°ã€‚åŒ¹é…ç¡®å®šçš„ n æ¬¡ã€‚</span></span><br><span class="line">checkMatches(<span class="string">&quot;ap&#123;1&#125;&quot;</span>, <span class="string">&quot;a&quot;</span>);</span><br><span class="line">checkMatches(<span class="string">&quot;ap&#123;1&#125;&quot;</span>, <span class="string">&quot;ap&quot;</span>);</span><br><span class="line">checkMatches(<span class="string">&quot;ap&#123;1&#125;&quot;</span>, <span class="string">&quot;app&quot;</span>);</span><br><span class="line">checkMatches(<span class="string">&quot;ap&#123;1&#125;&quot;</span>, <span class="string">&quot;apppppppppp&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">// &#123;n,&#125;: n æ˜¯ä¸€ä¸ªéè´Ÿæ•´æ•°ã€‚è‡³å°‘åŒ¹é… n æ¬¡ã€‚</span></span><br><span class="line">checkMatches(<span class="string">&quot;ap&#123;1,&#125;&quot;</span>, <span class="string">&quot;a&quot;</span>);</span><br><span class="line">checkMatches(<span class="string">&quot;ap&#123;1,&#125;&quot;</span>, <span class="string">&quot;ap&quot;</span>);</span><br><span class="line">checkMatches(<span class="string">&quot;ap&#123;1,&#125;&quot;</span>, <span class="string">&quot;app&quot;</span>);</span><br><span class="line">checkMatches(<span class="string">&quot;ap&#123;1,&#125;&quot;</span>, <span class="string">&quot;apppppppppp&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">// &#123;n,m&#125;: m å’Œ n å‡ä¸ºéè´Ÿæ•´æ•°ï¼Œå…¶ä¸­ n &lt;= mã€‚æœ€å°‘åŒ¹é… n æ¬¡ä¸”æœ€å¤šåŒ¹é… m æ¬¡ã€‚</span></span><br><span class="line">checkMatches(<span class="string">&quot;ap&#123;2,5&#125;&quot;</span>, <span class="string">&quot;a&quot;</span>);</span><br><span class="line">checkMatches(<span class="string">&quot;ap&#123;2,5&#125;&quot;</span>, <span class="string">&quot;ap&quot;</span>);</span><br><span class="line">checkMatches(<span class="string">&quot;ap&#123;2,5&#125;&quot;</span>, <span class="string">&quot;app&quot;</span>);</span><br><span class="line">checkMatches(<span class="string">&quot;ap&#123;2,5&#125;&quot;</span>, <span class="string">&quot;apppppppppp&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">// è¾“å‡º</span></span><br><span class="line"><span class="comment">// a	not matchesï¼š ap&#123;1&#125;</span></span><br><span class="line"><span class="comment">// ap	matchesï¼š ap&#123;1&#125;</span></span><br><span class="line"><span class="comment">// app	not matchesï¼š ap&#123;1&#125;</span></span><br><span class="line"><span class="comment">// apppppppppp	not matchesï¼š ap&#123;1&#125;</span></span><br><span class="line"><span class="comment">// a	not matchesï¼š ap&#123;1,&#125;</span></span><br><span class="line"><span class="comment">// ap	matchesï¼š ap&#123;1,&#125;</span></span><br><span class="line"><span class="comment">// app	matchesï¼š ap&#123;1,&#125;</span></span><br><span class="line"><span class="comment">// apppppppppp	matchesï¼š ap&#123;1,&#125;</span></span><br><span class="line"><span class="comment">// a	not matchesï¼š ap&#123;2,5&#125;</span></span><br><span class="line"><span class="comment">// ap	not matchesï¼š ap&#123;2,5&#125;</span></span><br><span class="line"><span class="comment">// app	matchesï¼š ap&#123;2,5&#125;</span></span><br><span class="line"><span class="comment">// apppppppppp	not matchesï¼š ap&#123;2,5&#125;</span></span><br></pre></td></tr></table></figure>

<h4 id="è½¬ä¹‰å­—ç¬¦ï¼ˆ-ï¼‰"><a href="#è½¬ä¹‰å­—ç¬¦ï¼ˆ-ï¼‰" class="headerlink" title="è½¬ä¹‰å­—ç¬¦ï¼ˆ/ï¼‰"></a>è½¬ä¹‰å­—ç¬¦ï¼ˆ<code>/</code>ï¼‰</h4><p>å¦‚æœæƒ³è¦æŸ¥æ‰¾å…ƒå­—ç¬¦æœ¬èº«ï¼Œä½ éœ€è¦ä½¿ç”¨è½¬ä¹‰ç¬¦ï¼Œä½¿å¾—æ­£åˆ™å¼•æ“å°†å…¶è§†ä½œä¸€ä¸ªæ™®é€šå­—ç¬¦ï¼Œè€Œä¸æ˜¯ä¸€ä¸ªå…ƒå­—ç¬¦å»å¤„ç†ã€‚</p>
<figure class="highlight livescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">* çš„è½¬ä¹‰å­—ç¬¦ï¼š<span class="string">\*</span></span><br><span class="line">+ çš„è½¬ä¹‰å­—ç¬¦ï¼š<span class="string">\+</span></span><br><span class="line">? çš„è½¬ä¹‰å­—ç¬¦ï¼š<span class="string">\?</span></span><br><span class="line">^ çš„è½¬ä¹‰å­—ç¬¦ï¼š<span class="string">\^</span></span><br><span class="line">$ çš„è½¬ä¹‰å­—ç¬¦ï¼š<span class="string">\$</span></span><br><span class="line">. çš„è½¬ä¹‰å­—ç¬¦ï¼š<span class="string">\.</span></span><br></pre></td></tr></table></figure>

<p>å¦‚æœæ˜¯è½¬ä¹‰ç¬¦ <code>\</code> æœ¬èº«ï¼Œä½ éœ€è¦ä½¿ç”¨ <code>\\</code> ã€‚</p>
<h4 id="æŒ‡å®šè¡¨è¾¾å¼å­—ç¬¦ä¸²çš„å¼€å§‹ï¼ˆ-ï¼‰å’Œç»“å°¾ï¼ˆ-ï¼‰"><a href="#æŒ‡å®šè¡¨è¾¾å¼å­—ç¬¦ä¸²çš„å¼€å§‹ï¼ˆ-ï¼‰å’Œç»“å°¾ï¼ˆ-ï¼‰" class="headerlink" title="æŒ‡å®šè¡¨è¾¾å¼å­—ç¬¦ä¸²çš„å¼€å§‹ï¼ˆ^ï¼‰å’Œç»“å°¾ï¼ˆ$ï¼‰"></a>æŒ‡å®šè¡¨è¾¾å¼å­—ç¬¦ä¸²çš„å¼€å§‹ï¼ˆ<code>^</code>ï¼‰å’Œç»“å°¾ï¼ˆ<code>$</code>ï¼‰</h4><p>å¦‚æœå¸Œæœ›åŒ¹é…çš„å­—ç¬¦ä¸²å¿…é¡»ä»¥ç‰¹å®šå­—ç¬¦ä¸²å¼€å¤´ï¼Œå¯ä»¥ä½¿ç”¨ <code>^</code> ã€‚</p>
<blockquote>
<p>æ³¨æ„ï¼šè¯·ç‰¹åˆ«ç•™æ„ï¼Œè¿™é‡Œçš„ <code>^</code> ä¸€å®šè¦å’Œ <code>[^]</code> ä¸­çš„ <code>^</code> åŒºåˆ†ã€‚</p>
</blockquote>
<p>ã€ç¤ºä¾‹ã€‘é™åˆ¶å­—ç¬¦ä¸²å¤´éƒ¨</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">Assert.assertTrue(checkMatches(<span class="string">&quot;^app[a-z]&#123;0,&#125;&quot;</span>, <span class="string">&quot;apple&quot;</span>)); <span class="comment">// å­—ç¬¦ä¸²å¿…é¡»ä»¥appå¼€å¤´</span></span><br><span class="line">Assert.assertFalse(checkMatches(<span class="string">&quot;^app[a-z]&#123;0,&#125;&quot;</span>, <span class="string">&quot;aplause&quot;</span>));</span><br><span class="line"></span><br><span class="line"><span class="comment">// è¾“å‡º</span></span><br><span class="line"><span class="comment">// apple	matchesï¼š ^app[a-z]&#123;0,&#125;</span></span><br><span class="line"><span class="comment">// aplause	not matchesï¼š ^app[a-z]&#123;0,&#125;</span></span><br></pre></td></tr></table></figure>

<p>å¦‚æœå¸Œæœ›åŒ¹é…çš„å­—ç¬¦ä¸²å¿…é¡»ä»¥ç‰¹å®šå­—ç¬¦ä¸²ç»“å°¾ï¼Œå¯ä»¥ä½¿ç”¨ <code>$</code> ã€‚</p>
<p>ã€ç¤ºä¾‹ã€‘é™åˆ¶å­—ç¬¦ä¸²å°¾éƒ¨</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">Assert.assertTrue(checkMatches(<span class="string">&quot;[a-z]&#123;0,&#125;ing$&quot;</span>, <span class="string">&quot;playing&quot;</span>)); <span class="comment">// å­—ç¬¦ä¸²å¿…é¡»ä»¥ingç»“å°¾</span></span><br><span class="line">Assert.assertFalse(checkMatches(<span class="string">&quot;[a-z]&#123;0,&#125;ing$&quot;</span>, <span class="string">&quot;long&quot;</span>));</span><br><span class="line"></span><br><span class="line"><span class="comment">// è¾“å‡º</span></span><br><span class="line"><span class="comment">// playing	matchesï¼š [a-z]&#123;0,&#125;ing$</span></span><br><span class="line"><span class="comment">// long	not matchesï¼š [a-z]&#123;0,&#125;ing$</span></span><br></pre></td></tr></table></figure>

<h3 id="ç­‰ä»·å­—ç¬¦"><a href="#ç­‰ä»·å­—ç¬¦" class="headerlink" title="ç­‰ä»·å­—ç¬¦"></a>ç­‰ä»·å­—ç¬¦</h3><p>ç­‰ä»·å­—ç¬¦ï¼Œé¡¾åæ€ä¹‰ï¼Œå°±æ˜¯å¯¹äºåŸºæœ¬å…ƒå­—ç¬¦è¡¨è¾¾çš„ä¸€ç§ç®€åŒ–ï¼ˆç­‰ä»·å­—ç¬¦çš„åŠŸèƒ½éƒ½å¯ä»¥é€šè¿‡åŸºæœ¬å…ƒå­—ç¬¦æ¥å®ç°ï¼‰ã€‚</p>
<p>åœ¨æ²¡æœ‰æŒæ¡åŸºæœ¬å…ƒå­—ç¬¦ä¹‹å‰ï¼Œå¯ä»¥å…ˆä¸ç”¨ç†ä¼šï¼Œå› ä¸ºå¾ˆå®¹æ˜“æŠŠäººç»•æ™•ã€‚</p>
<p>ç­‰ä»·å­—ç¬¦çš„å¥½å¤„åœ¨äºç®€åŒ–äº†åŸºæœ¬å…ƒå­—ç¬¦çš„å†™æ³•ã€‚</p>
<h4 id="è¡¨ç¤ºæŸä¸€ç±»å‹å­—ç¬¦çš„ç­‰ä»·å­—ç¬¦"><a href="#è¡¨ç¤ºæŸä¸€ç±»å‹å­—ç¬¦çš„ç­‰ä»·å­—ç¬¦" class="headerlink" title="è¡¨ç¤ºæŸä¸€ç±»å‹å­—ç¬¦çš„ç­‰ä»·å­—ç¬¦"></a>è¡¨ç¤ºæŸä¸€ç±»å‹å­—ç¬¦çš„ç­‰ä»·å­—ç¬¦</h4><p>ä¸‹è¡¨ä¸­çš„ç­‰ä»·å­—ç¬¦éƒ½è¡¨ç¤ºæŸä¸€ç±»å‹çš„å­—ç¬¦ã€‚</p>
<table>
<thead>
<tr>
<th>å­—ç¬¦</th>
<th>æè¿°</th>
</tr>
</thead>
<tbody><tr>
<td><strong><code>.</code></strong></td>
<td>åŒ¹é…é™¤â€œ\nâ€ä¹‹å¤–çš„ä»»ä½•å•ä¸ªå­—ç¬¦ã€‚</td>
</tr>
<tr>
<td><strong><code>\d</code></strong></td>
<td>åŒ¹é…ä¸€ä¸ªæ•°å­—å­—ç¬¦ã€‚ç­‰ä»·äº[0-9]ã€‚</td>
</tr>
<tr>
<td><strong><code>\D</code></strong></td>
<td>åŒ¹é…ä¸€ä¸ªéæ•°å­—å­—ç¬¦ã€‚ç­‰ä»·äº[^0-9]ã€‚</td>
</tr>
<tr>
<td><strong><code>\w</code></strong></td>
<td>åŒ¹é…åŒ…æ‹¬ä¸‹åˆ’çº¿çš„ä»»ä½•å•è¯å­—ç¬¦ã€‚ç±»ä¼¼ä½†ä¸ç­‰ä»·äºâ€œ[A-Za-z0-9_]â€ï¼Œè¿™é‡Œçš„å•è¯å­—ç¬¦æŒ‡çš„æ˜¯ Unicode å­—ç¬¦é›†ã€‚</td>
</tr>
<tr>
<td><strong><code>\W</code></strong></td>
<td>åŒ¹é…ä»»ä½•éå•è¯å­—ç¬¦ã€‚</td>
</tr>
<tr>
<td><strong><code>\s</code></strong></td>
<td>åŒ¹é…ä»»ä½•ä¸å¯è§å­—ç¬¦ï¼ŒåŒ…æ‹¬ç©ºæ ¼ã€åˆ¶è¡¨ç¬¦ã€æ¢é¡µç¬¦ç­‰ç­‰ã€‚ç­‰ä»·äº[ \f\n\r\t\v]ã€‚</td>
</tr>
<tr>
<td><strong><code>\S</code></strong></td>
<td>åŒ¹é…ä»»ä½•å¯è§å­—ç¬¦ã€‚ç­‰ä»·äº[ \f\n\r\t\v]ã€‚</td>
</tr>
</tbody></table>
<p>ã€ç¤ºä¾‹ã€‘åŸºæœ¬ç­‰ä»·å­—ç¬¦çš„ç”¨æ³•</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// åŒ¹é…é™¤â€œ\nâ€ä¹‹å¤–çš„ä»»ä½•å•ä¸ªå­—ç¬¦</span></span><br><span class="line">Assert.assertTrue(checkMatches(<span class="string">&quot;.&#123;1,&#125;&quot;</span>, <span class="string">&quot;ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789_&quot;</span>));</span><br><span class="line">Assert.assertTrue(checkMatches(<span class="string">&quot;.&#123;1,&#125;&quot;</span>, <span class="string">&quot;~!@#$%^&amp;*()+`-=[]&#123;&#125;;:&lt;&gt;,./?|\\&quot;</span>));</span><br><span class="line">Assert.assertFalse(checkMatches(<span class="string">&quot;.&quot;</span>, <span class="string">&quot;\n&quot;</span>));</span><br><span class="line">Assert.assertFalse(checkMatches(<span class="string">&quot;[^\n]&quot;</span>, <span class="string">&quot;\n&quot;</span>));</span><br><span class="line"></span><br><span class="line"><span class="comment">// åŒ¹é…ä¸€ä¸ªæ•°å­—å­—ç¬¦ã€‚ç­‰ä»·äº[0-9]</span></span><br><span class="line">Assert.assertTrue(checkMatches(<span class="string">&quot;\\d&#123;1,&#125;&quot;</span>, <span class="string">&quot;0123456789&quot;</span>));</span><br><span class="line"><span class="comment">// åŒ¹é…ä¸€ä¸ªéæ•°å­—å­—ç¬¦ã€‚ç­‰ä»·äº[^0-9]</span></span><br><span class="line">Assert.assertFalse(checkMatches(<span class="string">&quot;\\D&#123;1,&#125;&quot;</span>, <span class="string">&quot;0123456789&quot;</span>));</span><br><span class="line"></span><br><span class="line"><span class="comment">// åŒ¹é…åŒ…æ‹¬ä¸‹åˆ’çº¿çš„ä»»ä½•å•è¯å­—ç¬¦ã€‚ç±»ä¼¼ä½†ä¸ç­‰ä»·äºâ€œ[A-Za-z0-9_]â€ï¼Œè¿™é‡Œçš„å•è¯å­—ç¬¦æŒ‡çš„æ˜¯Unicodeå­—ç¬¦é›†</span></span><br><span class="line">Assert.assertTrue(checkMatches(<span class="string">&quot;\\w&#123;1,&#125;&quot;</span>, <span class="string">&quot;ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789_&quot;</span>));</span><br><span class="line">Assert.assertFalse(checkMatches(<span class="string">&quot;\\w&#123;1,&#125;&quot;</span>, <span class="string">&quot;~!@#$%^&amp;*()+`-=[]&#123;&#125;;:&lt;&gt;,./?|\\&quot;</span>));</span><br><span class="line"><span class="comment">// åŒ¹é…ä»»ä½•éå•è¯å­—ç¬¦</span></span><br><span class="line">Assert.assertFalse(checkMatches(<span class="string">&quot;\\W&#123;1,&#125;&quot;</span>, <span class="string">&quot;ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789_&quot;</span>));</span><br><span class="line">Assert.assertTrue(checkMatches(<span class="string">&quot;\\W&#123;1,&#125;&quot;</span>, <span class="string">&quot;~!@#$%^&amp;*()+`-=[]&#123;&#125;;:&lt;&gt;,./?|\\&quot;</span>));</span><br><span class="line"></span><br><span class="line"><span class="comment">// åŒ¹é…ä»»ä½•ä¸å¯è§å­—ç¬¦ï¼ŒåŒ…æ‹¬ç©ºæ ¼ã€åˆ¶è¡¨ç¬¦ã€æ¢é¡µç¬¦ç­‰ç­‰ã€‚ç­‰ä»·äº[ \f\n\r\t\v]</span></span><br><span class="line">Assert.assertTrue(checkMatches(<span class="string">&quot;\\s&#123;1,&#125;&quot;</span>, <span class="string">&quot; \f\r\n\t&quot;</span>));</span><br><span class="line"><span class="comment">// åŒ¹é…ä»»ä½•å¯è§å­—ç¬¦ã€‚ç­‰ä»·äº[^ \f\n\r\t\v]</span></span><br><span class="line">Assert.assertFalse(checkMatches(<span class="string">&quot;\\S&#123;1,&#125;&quot;</span>, <span class="string">&quot; \f\r\n\t&quot;</span>));</span><br><span class="line"></span><br><span class="line"><span class="comment">// è¾“å‡º</span></span><br><span class="line"><span class="comment">// ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789_	matchesï¼š .&#123;1,&#125;</span></span><br><span class="line"><span class="comment">// ~!@#$%^&amp;*()+`-=[]&#123;&#125;;:&lt;&gt;,./?|\\	matchesï¼š .&#123;1,&#125;</span></span><br><span class="line"><span class="comment">// \n	not matchesï¼š .</span></span><br><span class="line"><span class="comment">// \n	not matchesï¼š [^\n]</span></span><br><span class="line"><span class="comment">// 0123456789	matchesï¼š \\d&#123;1,&#125;</span></span><br><span class="line"><span class="comment">// 0123456789	not matchesï¼š \\D&#123;1,&#125;</span></span><br><span class="line"><span class="comment">// ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789_	matchesï¼š \\w&#123;1,&#125;</span></span><br><span class="line"><span class="comment">// ~!@#$%^&amp;*()+`-=[]&#123;&#125;;:&lt;&gt;,./?|\\	not matchesï¼š \\w&#123;1,&#125;</span></span><br><span class="line"><span class="comment">// ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789_	not matchesï¼š \\W&#123;1,&#125;</span></span><br><span class="line"><span class="comment">// ~!@#$%^&amp;*()+`-=[]&#123;&#125;;:&lt;&gt;,./?|\\	matchesï¼š \\W&#123;1,&#125;</span></span><br><span class="line"><span class="comment">// \f\r\n\t	matchesï¼š \\s&#123;1,&#125;</span></span><br><span class="line"><span class="comment">// \f\r\n\t	not matchesï¼š \\S&#123;1,&#125;</span></span><br></pre></td></tr></table></figure>

<h4 id="é™åˆ¶å­—ç¬¦æ•°é‡çš„ç­‰ä»·å­—ç¬¦"><a href="#é™åˆ¶å­—ç¬¦æ•°é‡çš„ç­‰ä»·å­—ç¬¦" class="headerlink" title="é™åˆ¶å­—ç¬¦æ•°é‡çš„ç­‰ä»·å­—ç¬¦"></a>é™åˆ¶å­—ç¬¦æ•°é‡çš„ç­‰ä»·å­—ç¬¦</h4><p>åœ¨åŸºæœ¬å…ƒå­—ç¬¦ç« èŠ‚ä¸­ï¼Œå·²ç»ä»‹ç»äº†é™åˆ¶å­—ç¬¦æ•°é‡çš„åŸºæœ¬å…ƒå­—ç¬¦ - <code>&#123;&#125;</code> ã€‚</p>
<p>æ­¤å¤–ï¼Œè¿˜æœ‰ <code>*</code>ã€<code>+</code>ã€<code>?</code> è¿™ä¸ªä¸‰ä¸ªä¸ºäº†ç®€åŒ–å†™æ³•è€Œå‡ºç°çš„ç­‰ä»·å­—ç¬¦ï¼Œæˆ‘ä»¬æ¥è®¤è¯†ä¸€ä¸‹ã€‚</p>
<table>
<thead>
<tr>
<th>å­—ç¬¦</th>
<th>æè¿°</th>
</tr>
</thead>
<tbody><tr>
<td><code>*</code></td>
<td>åŒ¹é…å‰é¢çš„å­è¡¨è¾¾å¼é›¶æ¬¡æˆ–å¤šæ¬¡ã€‚ç­‰ä»·äº{0,}ã€‚</td>
</tr>
<tr>
<td><code>+</code></td>
<td>åŒ¹é…å‰é¢çš„å­è¡¨è¾¾å¼ä¸€æ¬¡æˆ–å¤šæ¬¡ã€‚ç­‰ä»·äº{1,}ã€‚</td>
</tr>
<tr>
<td><code>?</code></td>
<td>åŒ¹é…å‰é¢çš„å­è¡¨è¾¾å¼é›¶æ¬¡æˆ–ä¸€æ¬¡ã€‚ç­‰ä»·äº {0,1}ã€‚</td>
</tr>
</tbody></table>
<p><strong>æ¡ˆä¾‹ é™åˆ¶å­—ç¬¦æ•°é‡çš„ç­‰ä»·å­—ç¬¦</strong></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// *: åŒ¹é…å‰é¢çš„å­è¡¨è¾¾å¼é›¶æ¬¡æˆ–å¤šæ¬¡ã€‚* ç­‰ä»·äº&#123;0,&#125;ã€‚</span></span><br><span class="line">checkMatches(<span class="string">&quot;ap*&quot;</span>, <span class="string">&quot;a&quot;</span>);</span><br><span class="line">checkMatches(<span class="string">&quot;ap*&quot;</span>, <span class="string">&quot;ap&quot;</span>);</span><br><span class="line">checkMatches(<span class="string">&quot;ap*&quot;</span>, <span class="string">&quot;app&quot;</span>);</span><br><span class="line">checkMatches(<span class="string">&quot;ap*&quot;</span>, <span class="string">&quot;apppppppppp&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">// +: åŒ¹é…å‰é¢çš„å­è¡¨è¾¾å¼ä¸€æ¬¡æˆ–å¤šæ¬¡ã€‚+ ç­‰ä»·äº &#123;1,&#125;ã€‚</span></span><br><span class="line">checkMatches(<span class="string">&quot;ap+&quot;</span>, <span class="string">&quot;a&quot;</span>);</span><br><span class="line">checkMatches(<span class="string">&quot;ap+&quot;</span>, <span class="string">&quot;ap&quot;</span>);</span><br><span class="line">checkMatches(<span class="string">&quot;ap+&quot;</span>, <span class="string">&quot;app&quot;</span>);</span><br><span class="line">checkMatches(<span class="string">&quot;ap+&quot;</span>, <span class="string">&quot;apppppppppp&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">// ?: åŒ¹é…å‰é¢çš„å­è¡¨è¾¾å¼é›¶æ¬¡æˆ–ä¸€æ¬¡ã€‚? ç­‰ä»·äº &#123;0,1&#125;ã€‚</span></span><br><span class="line">checkMatches(<span class="string">&quot;ap?&quot;</span>, <span class="string">&quot;a&quot;</span>);</span><br><span class="line">checkMatches(<span class="string">&quot;ap?&quot;</span>, <span class="string">&quot;ap&quot;</span>);</span><br><span class="line">checkMatches(<span class="string">&quot;ap?&quot;</span>, <span class="string">&quot;app&quot;</span>);</span><br><span class="line">checkMatches(<span class="string">&quot;ap?&quot;</span>, <span class="string">&quot;apppppppppp&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">// è¾“å‡º</span></span><br><span class="line"><span class="comment">// a	matchesï¼š ap*</span></span><br><span class="line"><span class="comment">// ap	matchesï¼š ap*</span></span><br><span class="line"><span class="comment">// app	matchesï¼š ap*</span></span><br><span class="line"><span class="comment">// apppppppppp	matchesï¼š ap*</span></span><br><span class="line"><span class="comment">// a	not matchesï¼š ap+</span></span><br><span class="line"><span class="comment">// ap	matchesï¼š ap+</span></span><br><span class="line"><span class="comment">// app	matchesï¼š ap+</span></span><br><span class="line"><span class="comment">// apppppppppp	matchesï¼š ap+</span></span><br><span class="line"><span class="comment">// a	matchesï¼š ap?</span></span><br><span class="line"><span class="comment">// ap	matchesï¼š ap?</span></span><br><span class="line"><span class="comment">// app	not matchesï¼š ap?</span></span><br><span class="line"><span class="comment">// apppppppppp	not matchesï¼š ap?</span></span><br></pre></td></tr></table></figure>

<h4 id="å…ƒå­—ç¬¦ä¼˜å…ˆçº§é¡ºåº"><a href="#å…ƒå­—ç¬¦ä¼˜å…ˆçº§é¡ºåº" class="headerlink" title="å…ƒå­—ç¬¦ä¼˜å…ˆçº§é¡ºåº"></a>å…ƒå­—ç¬¦ä¼˜å…ˆçº§é¡ºåº</h4><p>æ­£åˆ™è¡¨è¾¾å¼ä»å·¦åˆ°å³è¿›è¡Œè®¡ç®—ï¼Œå¹¶éµå¾ªä¼˜å…ˆçº§é¡ºåºï¼Œè¿™ä¸ç®—æœ¯è¡¨è¾¾å¼éå¸¸ç±»ä¼¼ã€‚</p>
<p>ä¸‹è¡¨ä»æœ€é«˜åˆ°æœ€ä½è¯´æ˜äº†å„ç§æ­£åˆ™è¡¨è¾¾å¼è¿ç®—ç¬¦çš„ä¼˜å…ˆçº§é¡ºåºï¼š</p>
<table>
<thead>
<tr>
<th>è¿ç®—ç¬¦</th>
<th>è¯´æ˜</th>
</tr>
</thead>
<tbody><tr>
<td><code>\</code></td>
<td>è½¬ä¹‰ç¬¦</td>
</tr>
<tr>
<td><code>()</code>ã€<code>(?:)</code>ã€<code>(?=)</code>ã€<code>[]</code></td>
<td>æ‹¬å·å’Œä¸­æ‹¬å·</td>
</tr>
<tr>
<td><code>*</code>ã€<code>+</code>ã€<code>?</code>ã€<code>&#123;n&#125;</code>ã€<code>&#123;n,&#125;</code>ã€<code>&#123;n,m&#125;</code></td>
<td>é™å®šç¬¦</td>
</tr>
<tr>
<td><code>^</code>ã€<code>$</code>ã€<code>*ä»»ä½•å­—ç¬¦</code>ã€<code>ä»»ä½•å­—ç¬¦*</code></td>
<td>å®šä½ç‚¹å’Œåºåˆ—</td>
</tr>
<tr>
<td>&#96;</td>
<td>&#96;</td>
</tr>
</tbody></table>
<p>å­—ç¬¦å…·æœ‰é«˜äºæ›¿æ¢è¿ç®—ç¬¦çš„ä¼˜å…ˆçº§ï¼Œä½¿å¾— <code>m|food</code> åŒ¹é… <code>m</code> æˆ– <code>food</code> ã€‚è‹¥è¦åŒ¹é… <code>mood</code> æˆ– <code>food</code> ï¼Œè¯·ä½¿ç”¨æ‹¬å·åˆ›å»ºå­è¡¨è¾¾å¼ï¼Œä»è€Œäº§ç”Ÿ <code>(m|f)ood</code> ã€‚</p>
<h2 id="åˆ†ç»„æ„é€ "><a href="#åˆ†ç»„æ„é€ " class="headerlink" title="åˆ†ç»„æ„é€ "></a>åˆ†ç»„æ„é€ </h2><p>åœ¨åŸºæœ¬å…ƒå­—ç¬¦ç« èŠ‚ï¼Œæåˆ°äº† <code>()</code> å­—ç¬¦å¯ä»¥ç”¨æ¥å¯¹è¡¨è¾¾å¼åˆ†ç»„ã€‚å®é™…ä¸Šåˆ†ç»„è¿˜æœ‰æ›´å¤šå¤æ‚çš„ç”¨æ³•ã€‚</p>
<p>æ‰€è°“åˆ†ç»„æ„é€ ï¼Œæ˜¯ç”¨æ¥æè¿°æ­£åˆ™è¡¨è¾¾å¼çš„å­è¡¨è¾¾å¼ï¼Œç”¨äºæ•è·å­—ç¬¦ä¸²ä¸­çš„å­å­—ç¬¦ä¸²ã€‚</p>
<h3 id="æ•è·ä¸éæ•è·"><a href="#æ•è·ä¸éæ•è·" class="headerlink" title="æ•è·ä¸éæ•è·"></a>æ•è·ä¸éæ•è·</h3><p>ä¸‹è¡¨ä¸ºåˆ†ç»„æ„é€ ä¸­çš„æ•è·å’Œéæ•è·åˆ†ç±»ã€‚</p>
<table>
<thead>
<tr>
<th>è¡¨è¾¾å¼</th>
<th>æè¿°</th>
<th>æ•è·æˆ–éæ•è·</th>
</tr>
</thead>
<tbody><tr>
<td><code>(exp)</code></td>
<td>åŒ¹é…çš„å­è¡¨è¾¾å¼</td>
<td>æ•è·</td>
</tr>
<tr>
<td><code>(?&lt;name&gt;exp)</code></td>
<td>å‘½åçš„åå‘å¼•ç”¨</td>
<td>æ•è·</td>
</tr>
<tr>
<td><code>(?:exp)</code></td>
<td>éæ•è·ç»„</td>
<td>éæ•è·</td>
</tr>
<tr>
<td><code>(?=exp)</code></td>
<td>é›¶å®½åº¦æ­£é¢„æµ‹å…ˆè¡Œæ–­è¨€</td>
<td>éæ•è·</td>
</tr>
<tr>
<td><code>(?!exp)</code></td>
<td>é›¶å®½åº¦è´Ÿé¢„æµ‹å…ˆè¡Œæ–­è¨€</td>
<td>éæ•è·</td>
</tr>
<tr>
<td><code>(?&lt;=exp)</code></td>
<td>é›¶å®½åº¦æ­£å›é¡¾åå‘æ–­è¨€</td>
<td>éæ•è·</td>
</tr>
<tr>
<td><code>(?&lt;!exp)</code></td>
<td>é›¶å®½åº¦è´Ÿå›é¡¾åå‘æ–­è¨€</td>
<td>éæ•è·</td>
</tr>
</tbody></table>
<blockquote>
<p>æ³¨ï¼šJava æ­£åˆ™å¼•æ“ä¸æ”¯æŒå¹³è¡¡ç»„ã€‚</p>
</blockquote>
<h3 id="åå‘å¼•ç”¨"><a href="#åå‘å¼•ç”¨" class="headerlink" title="åå‘å¼•ç”¨"></a>åå‘å¼•ç”¨</h3><h5 id="å¸¦ç¼–å·çš„åå‘å¼•ç”¨"><a href="#å¸¦ç¼–å·çš„åå‘å¼•ç”¨" class="headerlink" title="å¸¦ç¼–å·çš„åå‘å¼•ç”¨"></a>å¸¦ç¼–å·çš„åå‘å¼•ç”¨</h5><p>å¸¦ç¼–å·çš„åå‘å¼•ç”¨ä½¿ç”¨ä»¥ä¸‹è¯­æ³•ï¼š<code>\number</code></p>
<p>å…¶ä¸­<em>number</em> æ˜¯æ­£åˆ™è¡¨è¾¾å¼ä¸­æ•è·ç»„çš„åºå·ä½ç½®ã€‚ ä¾‹å¦‚ï¼Œ\4 åŒ¹é…ç¬¬å››ä¸ªæ•è·ç»„çš„å†…å®¹ã€‚ å¦‚æœæ­£åˆ™è¡¨è¾¾å¼æ¨¡å¼ä¸­æœªå®šä¹‰<em>number</em>ï¼Œåˆ™å°†å‘ç”Ÿåˆ†æé”™è¯¯</p>
<p><strong>ã€ç¤ºä¾‹ã€‘åŒ¹é…é‡å¤çš„å•è¯å’Œç´§éšæ¯ä¸ªé‡å¤çš„å•è¯çš„å•è¯(ä¸å‘½åå­è¡¨è¾¾å¼)</strong></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// (\w+)\s\1\W(\w+) åŒ¹é…é‡å¤çš„å•è¯å’Œç´§éšæ¯ä¸ªé‡å¤çš„å•è¯çš„å•è¯</span></span><br><span class="line">Assert.assertTrue(findAll(<span class="string">&quot;(\\w+)\\s\\1\\W(\\w+)&quot;</span>,</span><br><span class="line">		<span class="string">&quot;He said that that was the the correct answer.&quot;</span>) &gt; <span class="number">0</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">// è¾“å‡º</span></span><br><span class="line"><span class="comment">// regex = (\w+)\s\1\W(\w+), content: He said that that was the the correct answer.</span></span><br><span class="line"><span class="comment">// [1th] start: 8, end: 21, group: that that was</span></span><br><span class="line"><span class="comment">// [2th] start: 22, end: 37, group: the the correct</span></span><br></pre></td></tr></table></figure>

<p>è¯´æ˜ï¼š</p>
<ul>
<li><code>(\w+)</code>ï¼šåŒ¹é…ä¸€ä¸ªæˆ–å¤šä¸ªå•è¯å­—ç¬¦ã€‚</li>
<li><code>\s</code>ï¼šä¸ç©ºç™½å­—ç¬¦åŒ¹é…ã€‚</li>
<li><code>\1</code>ï¼šåŒ¹é…ç¬¬ä¸€ä¸ªç»„ï¼Œå³(\w+)ã€‚</li>
<li><code>\W</code>ï¼šåŒ¹é…åŒ…æ‹¬ç©ºæ ¼å’Œæ ‡ç‚¹ç¬¦å·çš„ä¸€ä¸ªéå•è¯å­—ç¬¦ã€‚ è¿™æ ·å¯ä»¥é˜²æ­¢æ­£åˆ™è¡¨è¾¾å¼æ¨¡å¼åŒ¹é…ä»ç¬¬ä¸€ä¸ªæ•è·ç»„çš„å•è¯å¼€å¤´çš„å•è¯ã€‚</li>
</ul>
<h4 id="å‘½åçš„åå‘å¼•ç”¨"><a href="#å‘½åçš„åå‘å¼•ç”¨" class="headerlink" title="å‘½åçš„åå‘å¼•ç”¨"></a>å‘½åçš„åå‘å¼•ç”¨</h4><p>å‘½ååå‘å¼•ç”¨é€šè¿‡ä½¿ç”¨ä¸‹é¢çš„è¯­æ³•è¿›è¡Œå®šä¹‰ï¼š<code>\k&lt;name &gt;</code></p>
<p><strong>ã€ç¤ºä¾‹ã€‘åŒ¹é…é‡å¤çš„å•è¯å’Œç´§éšæ¯ä¸ªé‡å¤çš„å•è¯çš„å•è¯(å‘½åå­è¡¨è¾¾å¼)</strong></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// (?&lt;duplicateWord&gt;\w+)\s\k&lt;duplicateWord&gt;\W(?&lt;nextWord&gt;\w+) åŒ¹é…é‡å¤çš„å•è¯å’Œç´§éšæ¯ä¸ªé‡å¤çš„å•è¯çš„å•è¯</span></span><br><span class="line">Assert.assertTrue(findAll(<span class="string">&quot;(?&lt;duplicateWord&gt;\\w+)\\s\\k&lt;duplicateWord&gt;\\W(?&lt;nextWord&gt;\\w+)&quot;</span>,</span><br><span class="line">		<span class="string">&quot;He said that that was the the correct answer.&quot;</span>) &gt; <span class="number">0</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">// è¾“å‡º</span></span><br><span class="line"><span class="comment">// regex = (?&lt;duplicateWord&gt;\w+)\s\k&lt;duplicateWord&gt;\W(?&lt;nextWord&gt;\w+), content: He said that that was the the correct answer.</span></span><br><span class="line"><span class="comment">// [1th] start: 8, end: 21, group: that that was</span></span><br><span class="line"><span class="comment">// [2th] start: 22, end: 37, group: the the correct</span></span><br></pre></td></tr></table></figure>

<p>è¯´æ˜ï¼š</p>
<ul>
<li><code>(?&lt;duplicateWord&gt;\w+)</code>ï¼šåŒ¹é…ä¸€ä¸ªæˆ–å¤šä¸ªå•è¯å­—ç¬¦ã€‚ å‘½åæ­¤æ•è·ç»„ duplicateWordã€‚</li>
<li><code>\s</code>: ä¸ç©ºç™½å­—ç¬¦åŒ¹é…ã€‚</li>
<li><code>\k&lt;duplicateWord&gt;</code>ï¼šåŒ¹é…åä¸º duplicateWord çš„æ•è·çš„ç»„ã€‚</li>
<li><code>\W</code>ï¼šåŒ¹é…åŒ…æ‹¬ç©ºæ ¼å’Œæ ‡ç‚¹ç¬¦å·çš„ä¸€ä¸ªéå•è¯å­—ç¬¦ã€‚ è¿™æ ·å¯ä»¥é˜²æ­¢æ­£åˆ™è¡¨è¾¾å¼æ¨¡å¼åŒ¹é…ä»ç¬¬ä¸€ä¸ªæ•è·ç»„çš„å•è¯å¼€å¤´çš„å•è¯ã€‚</li>
<li><code>(?&lt;nextWord&gt;\w+)</code>ï¼šåŒ¹é…ä¸€ä¸ªæˆ–å¤šä¸ªå•è¯å­—ç¬¦ã€‚ å‘½åæ­¤æ•è·ç»„ nextWordã€‚</li>
</ul>
<h3 id="éæ•è·ç»„"><a href="#éæ•è·ç»„" class="headerlink" title="éæ•è·ç»„"></a>éæ•è·ç»„</h3><p><code>(?:exp)</code> è¡¨ç¤ºå½“ä¸€ä¸ªé™å®šç¬¦åº”ç”¨åˆ°ä¸€ä¸ªç»„ï¼Œä½†ç»„æ•è·çš„å­å­—ç¬¦ä¸²å¹¶éæ‰€éœ€æ—¶ï¼Œé€šå¸¸ä¼šä½¿ç”¨éæ•è·ç»„æ„é€ ã€‚</p>
<p><strong>ã€ç¤ºä¾‹ã€‘åŒ¹é…ä»¥.ç»“æŸçš„è¯­å¥ã€‚</strong></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// åŒ¹é…ç”±å¥å·ç»ˆæ­¢çš„è¯­å¥ã€‚</span></span><br><span class="line">Assert.assertTrue(findAll(<span class="string">&quot;(?:\\b(?:\\w+)\\W*)+\\.&quot;</span>, <span class="string">&quot;This is a short sentence. Never end&quot;</span>) &gt; <span class="number">0</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">// è¾“å‡º</span></span><br><span class="line"><span class="comment">// regex = (?:\b(?:\w+)\W*)+\., content: This is a short sentence. Never end</span></span><br><span class="line"><span class="comment">// [1th] start: 0, end: 25, group: This is a short sentence.</span></span><br></pre></td></tr></table></figure>

<h3 id="é›¶å®½æ–­è¨€"><a href="#é›¶å®½æ–­è¨€" class="headerlink" title="é›¶å®½æ–­è¨€"></a>é›¶å®½æ–­è¨€</h3><p>ç”¨äºæŸ¥æ‰¾åœ¨æŸäº›å†…å®¹(ä½†å¹¶ä¸åŒ…æ‹¬è¿™äº›å†…å®¹)ä¹‹å‰æˆ–ä¹‹åçš„ä¸œè¥¿ï¼Œä¹Ÿå°±æ˜¯è¯´å®ƒä»¬åƒ\b,^,$é‚£æ ·ç”¨äºæŒ‡å®šä¸€ä¸ªä½ç½®ï¼Œè¿™ä¸ªä½ç½®åº”è¯¥æ»¡è¶³ä¸€å®šçš„æ¡ä»¶(å³æ–­è¨€)ï¼Œå› æ­¤å®ƒä»¬ä¹Ÿè¢«ç§°ä¸ºé›¶å®½æ–­è¨€ã€‚</p>
<table>
<thead>
<tr>
<th>è¡¨è¾¾å¼</th>
<th>æè¿°</th>
</tr>
</thead>
<tbody><tr>
<td><code>(?=exp)</code></td>
<td>åŒ¹é… exp å‰é¢çš„ä½ç½®</td>
</tr>
<tr>
<td><code>(?&lt;=exp)</code></td>
<td>åŒ¹é… exp åé¢çš„ä½ç½®</td>
</tr>
<tr>
<td><code>(?!exp)</code></td>
<td>åŒ¹é…åé¢è·Ÿçš„ä¸æ˜¯ exp çš„ä½ç½®</td>
</tr>
<tr>
<td><code>(?&lt;!exp)</code></td>
<td>åŒ¹é…å‰é¢ä¸æ˜¯ exp çš„ä½ç½®</td>
</tr>
</tbody></table>
<h4 id="åŒ¹é…-exp-å‰é¢çš„ä½ç½®"><a href="#åŒ¹é…-exp-å‰é¢çš„ä½ç½®" class="headerlink" title="åŒ¹é… exp å‰é¢çš„ä½ç½®"></a>åŒ¹é… exp å‰é¢çš„ä½ç½®</h4><p><code>(?=exp)</code> è¡¨ç¤ºè¾“å…¥å­—ç¬¦ä¸²å¿…é¡»åŒ¹é…<em>å­è¡¨è¾¾å¼</em>ä¸­çš„æ­£åˆ™è¡¨è¾¾å¼æ¨¡å¼ï¼Œå°½ç®¡åŒ¹é…çš„å­å­—ç¬¦ä¸²æœªåŒ…å«åœ¨åŒ¹é…ç»“æœä¸­ã€‚</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// \b\w+(?=\sis\b) è¡¨ç¤ºè¦æ•è·isä¹‹å‰çš„å•è¯</span></span><br><span class="line">Assert.assertTrue(findAll(<span class="string">&quot;\\b\\w+(?=\\sis\\b)&quot;</span>, <span class="string">&quot;The dog is a Malamute.&quot;</span>) &gt; <span class="number">0</span>);</span><br><span class="line">Assert.assertFalse(findAll(<span class="string">&quot;\\b\\w+(?=\\sis\\b)&quot;</span>, <span class="string">&quot;The island has beautiful birds.&quot;</span>) &gt; <span class="number">0</span>);</span><br><span class="line">Assert.assertFalse(findAll(<span class="string">&quot;\\b\\w+(?=\\sis\\b)&quot;</span>, <span class="string">&quot;The pitch missed home plate.&quot;</span>) &gt; <span class="number">0</span>);</span><br><span class="line">Assert.assertTrue(findAll(<span class="string">&quot;\\b\\w+(?=\\sis\\b)&quot;</span>, <span class="string">&quot;Sunday is a weekend day.&quot;</span>) &gt; <span class="number">0</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">// è¾“å‡º</span></span><br><span class="line"><span class="comment">// regex = \b\w+(?=\sis\b), content: The dog is a Malamute.</span></span><br><span class="line"><span class="comment">// [1th] start: 4, end: 7, group: dog</span></span><br><span class="line"><span class="comment">// regex = \b\w+(?=\sis\b), content: The island has beautiful birds.</span></span><br><span class="line"><span class="comment">// not found</span></span><br><span class="line"><span class="comment">// regex = \b\w+(?=\sis\b), content: The pitch missed home plate.</span></span><br><span class="line"><span class="comment">// not found</span></span><br><span class="line"><span class="comment">// regex = \b\w+(?=\sis\b), content: Sunday is a weekend day.</span></span><br><span class="line"><span class="comment">// [1th] start: 0, end: 6, group: Sunday</span></span><br></pre></td></tr></table></figure>

<p>è¯´æ˜ï¼š</p>
<ul>
<li><code>\b</code>ï¼šåœ¨å•è¯è¾¹ç•Œå¤„å¼€å§‹åŒ¹é…ã€‚</li>
<li><code>\w+</code>ï¼šåŒ¹é…ä¸€ä¸ªæˆ–å¤šä¸ªå•è¯å­—ç¬¦ã€‚</li>
<li><code>(?=\sis\b)</code>ï¼šç¡®å®šå•è¯å­—ç¬¦æ˜¯å¦åæ¥ç©ºç™½å­—ç¬¦å’Œå­—ç¬¦ä¸²â€œisâ€ï¼Œå…¶åœ¨å•è¯è¾¹ç•Œå¤„ç»“æŸã€‚ å¦‚æœå¦‚æ­¤ï¼Œåˆ™åŒ¹é…æˆåŠŸã€‚</li>
</ul>
<h4 id="åŒ¹é…-exp-åé¢çš„ä½ç½®"><a href="#åŒ¹é…-exp-åé¢çš„ä½ç½®" class="headerlink" title="åŒ¹é… exp åé¢çš„ä½ç½®"></a>åŒ¹é… exp åé¢çš„ä½ç½®</h4><p><code>(?&lt;=exp)</code> è¡¨ç¤ºå­è¡¨è¾¾å¼ä¸å¾—åœ¨è¾“å…¥å­—ç¬¦ä¸²å½“å‰ä½ç½®å·¦ä¾§å‡ºç°ï¼Œå°½ç®¡å­è¡¨è¾¾å¼æœªåŒ…å«åœ¨åŒ¹é…ç»“æœä¸­ã€‚é›¶å®½åº¦æ­£å›é¡¾åå‘æ–­è¨€ä¸ä¼šå›æº¯ã€‚</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// (?&lt;=\b20)\d&#123;2&#125;\b è¡¨ç¤ºè¦æ•è·ä»¥20å¼€å¤´çš„æ•°å­—çš„åé¢éƒ¨åˆ†</span></span><br><span class="line">Assert.assertTrue(findAll(<span class="string">&quot;(?&lt;=\\b20)\\d&#123;2&#125;\\b&quot;</span>, <span class="string">&quot;2010 1999 1861 2140 2009&quot;</span>) &gt; <span class="number">0</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">// è¾“å‡º</span></span><br><span class="line"><span class="comment">// regex = (?&lt;=\b20)\d&#123;2&#125;\b, content: 2010 1999 1861 2140 2009</span></span><br><span class="line"><span class="comment">// [1th] start: 2, end: 4, group: 10</span></span><br><span class="line"><span class="comment">// [2th] start: 22, end: 24, group: 09</span></span><br></pre></td></tr></table></figure>

<p>è¯´æ˜ï¼š</p>
<ul>
<li><code>\d&#123;2&#125;</code>ï¼šåŒ¹é…ä¸¤ä¸ªåè¿›åˆ¶æ•°å­—ã€‚</li>
<li><code>&#123;?&lt;=\b20)</code>ï¼šå¦‚æœä¸¤ä¸ªåè¿›åˆ¶æ•°å­—çš„å­—è¾¹ç•Œä»¥å°æ•°ä½æ•°â€œ20â€å¼€å¤´ï¼Œåˆ™ç»§ç»­åŒ¹é…ã€‚</li>
<li><code>\b</code>ï¼šåœ¨å•è¯è¾¹ç•Œå¤„ç»“æŸåŒ¹é…ã€‚</li>
</ul>
<h4 id="åŒ¹é…åé¢è·Ÿçš„ä¸æ˜¯-exp-çš„ä½ç½®"><a href="#åŒ¹é…åé¢è·Ÿçš„ä¸æ˜¯-exp-çš„ä½ç½®" class="headerlink" title="åŒ¹é…åé¢è·Ÿçš„ä¸æ˜¯ exp çš„ä½ç½®"></a>åŒ¹é…åé¢è·Ÿçš„ä¸æ˜¯ exp çš„ä½ç½®</h4><p><code>(?!exp)</code> è¡¨ç¤ºè¾“å…¥å­—ç¬¦ä¸²ä¸å¾—åŒ¹é…<em>å­è¡¨è¾¾å¼</em>ä¸­çš„æ­£åˆ™è¡¨è¾¾å¼æ¨¡å¼ï¼Œå°½ç®¡åŒ¹é…çš„å­å­—ç¬¦ä¸²æœªåŒ…å«åœ¨åŒ¹é…ç»“æœä¸­ã€‚</p>
<p>ã€ç¤ºä¾‹ã€‘æ•è·æœªä»¥â€œunâ€å¼€å¤´çš„å•è¯</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// \b(?!un)\w+\b è¡¨ç¤ºè¦æ•è·æœªä»¥â€œunâ€å¼€å¤´çš„å•è¯</span></span><br><span class="line">Assert.assertTrue(findAll(<span class="string">&quot;\\b(?!un)\\w+\\b&quot;</span>, <span class="string">&quot;unite one unethical ethics use untie ultimate&quot;</span>) &gt; <span class="number">0</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">// è¾“å‡º</span></span><br><span class="line"><span class="comment">// regex = \b(?!un)\w+\b, content: unite one unethical ethics use untie ultimate</span></span><br><span class="line"><span class="comment">// [1th] start: 6, end: 9, group: one</span></span><br><span class="line"><span class="comment">// [2th] start: 20, end: 26, group: ethics</span></span><br><span class="line"><span class="comment">// [3th] start: 27, end: 30, group: use</span></span><br><span class="line"><span class="comment">// [4th] start: 37, end: 45, group: ultimate</span></span><br></pre></td></tr></table></figure>

<p>è¯´æ˜ï¼š</p>
<ul>
<li><code>\b</code>ï¼šåœ¨å•è¯è¾¹ç•Œå¤„å¼€å§‹åŒ¹é…ã€‚</li>
<li><code>(?!un)</code>ï¼šç¡®å®šæ¥ä¸‹æ¥çš„ä¸¤ä¸ªçš„å­—ç¬¦æ˜¯å¦ä¸ºâ€œunâ€ã€‚ å¦‚æœæ²¡æœ‰ï¼Œåˆ™å¯èƒ½åŒ¹é…ã€‚</li>
<li><code>\w+</code>ï¼šåŒ¹é…ä¸€ä¸ªæˆ–å¤šä¸ªå•è¯å­—ç¬¦ã€‚</li>
<li><code>\b</code>ï¼šåœ¨å•è¯è¾¹ç•Œå¤„ç»“æŸåŒ¹é…ã€‚</li>
</ul>
<h4 id="åŒ¹é…å‰é¢ä¸æ˜¯-exp-çš„ä½ç½®"><a href="#åŒ¹é…å‰é¢ä¸æ˜¯-exp-çš„ä½ç½®" class="headerlink" title="åŒ¹é…å‰é¢ä¸æ˜¯ exp çš„ä½ç½®"></a>åŒ¹é…å‰é¢ä¸æ˜¯ exp çš„ä½ç½®</h4><p><code>(?&lt;!exp)</code> è¡¨ç¤ºå­è¡¨è¾¾å¼ä¸å¾—åœ¨è¾“å…¥å­—ç¬¦ä¸²å½“å‰ä½ç½®çš„å·¦ä¾§å‡ºç°ã€‚ ä½†æ˜¯ï¼Œä»»ä½•ä¸åŒ¹é…å­è¡¨è¾¾å¼ çš„å­å­—ç¬¦ä¸²ä¸åŒ…å«åœ¨åŒ¹é…ç»“æœä¸­ã€‚</p>
<p>ã€ç¤ºä¾‹ã€‘æ•è·ä»»æ„å·¥ä½œæ—¥</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// (?&lt;!(Saturday|Sunday) )\b\w+ \d&#123;1,2&#125;, \d&#123;4&#125;\b è¡¨ç¤ºè¦æ•è·ä»»æ„å·¥ä½œæ—¥ï¼ˆå³å‘¨ä¸€åˆ°å‘¨äº”ï¼‰</span></span><br><span class="line">Assert.assertTrue(findAll(<span class="string">&quot;(?&lt;!(Saturday|Sunday) )\\b\\w+ \\d&#123;1,2&#125;, \\d&#123;4&#125;\\b&quot;</span>, <span class="string">&quot;Monday February 1, 2010&quot;</span>) &gt; <span class="number">0</span>);</span><br><span class="line">Assert.assertTrue(findAll(<span class="string">&quot;(?&lt;!(Saturday|Sunday) )\\b\\w+ \\d&#123;1,2&#125;, \\d&#123;4&#125;\\b&quot;</span>, <span class="string">&quot;Wednesday February 3, 2010&quot;</span>) &gt; <span class="number">0</span>);</span><br><span class="line">Assert.assertFalse(findAll(<span class="string">&quot;(?&lt;!(Saturday|Sunday) )\\b\\w+ \\d&#123;1,2&#125;, \\d&#123;4&#125;\\b&quot;</span>, <span class="string">&quot;Saturday February 6, 2010&quot;</span>) &gt; <span class="number">0</span>);</span><br><span class="line">Assert.assertFalse(findAll(<span class="string">&quot;(?&lt;!(Saturday|Sunday) )\\b\\w+ \\d&#123;1,2&#125;, \\d&#123;4&#125;\\b&quot;</span>, <span class="string">&quot;Sunday February 7, 2010&quot;</span>) &gt; <span class="number">0</span>);</span><br><span class="line">Assert.assertTrue(findAll(<span class="string">&quot;(?&lt;!(Saturday|Sunday) )\\b\\w+ \\d&#123;1,2&#125;, \\d&#123;4&#125;\\b&quot;</span>, <span class="string">&quot;Monday, February 8, 2010&quot;</span>) &gt; <span class="number">0</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">// è¾“å‡º</span></span><br><span class="line"><span class="comment">// regex = (?&lt;!(Saturday|Sunday) )\b\w+ \d&#123;1,2&#125;, \d&#123;4&#125;\b, content: Monday February 1, 2010</span></span><br><span class="line"><span class="comment">// [1th] start: 7, end: 23, group: February 1, 2010</span></span><br><span class="line"><span class="comment">// regex = (?&lt;!(Saturday|Sunday) )\b\w+ \d&#123;1,2&#125;, \d&#123;4&#125;\b, content: Wednesday February 3, 2010</span></span><br><span class="line"><span class="comment">// [1th] start: 10, end: 26, group: February 3, 2010</span></span><br><span class="line"><span class="comment">// regex = (?&lt;!(Saturday|Sunday) )\b\w+ \d&#123;1,2&#125;, \d&#123;4&#125;\b, content: Saturday February 6, 2010</span></span><br><span class="line"><span class="comment">// not found</span></span><br><span class="line"><span class="comment">// regex = (?&lt;!(Saturday|Sunday) )\b\w+ \d&#123;1,2&#125;, \d&#123;4&#125;\b, content: Sunday February 7, 2010</span></span><br><span class="line"><span class="comment">// not found</span></span><br><span class="line"><span class="comment">// regex = (?&lt;!(Saturday|Sunday) )\b\w+ \d&#123;1,2&#125;, \d&#123;4&#125;\b, content: Monday, February 8, 2010</span></span><br><span class="line"><span class="comment">// [1th] start: 8, end: 24, group: February 8, 2010</span></span><br></pre></td></tr></table></figure>

<h2 id="è´ªå©ªä¸æ‡’æƒ°"><a href="#è´ªå©ªä¸æ‡’æƒ°" class="headerlink" title="è´ªå©ªä¸æ‡’æƒ°"></a>è´ªå©ªä¸æ‡’æƒ°</h2><p>å½“æ­£åˆ™è¡¨è¾¾å¼ä¸­åŒ…å«èƒ½æ¥å—é‡å¤çš„é™å®šç¬¦æ—¶ï¼Œé€šå¸¸çš„è¡Œä¸ºæ˜¯ï¼ˆåœ¨ä½¿æ•´ä¸ªè¡¨è¾¾å¼èƒ½å¾—åˆ°åŒ¹é…çš„å‰æä¸‹ï¼‰åŒ¹é…<strong>å°½å¯èƒ½å¤š</strong>çš„å­—ç¬¦ã€‚ä»¥è¿™ä¸ªè¡¨è¾¾å¼ä¸ºä¾‹ï¼ša.*bï¼Œå®ƒå°†ä¼šåŒ¹é…æœ€é•¿çš„ä»¥ a å¼€å§‹ï¼Œä»¥ b ç»“æŸçš„å­—ç¬¦ä¸²ã€‚å¦‚æœç”¨å®ƒæ¥æœç´¢ aabab çš„è¯ï¼Œå®ƒä¼šåŒ¹é…æ•´ä¸ªå­—ç¬¦ä¸² aababã€‚è¿™è¢«ç§°ä¸ºè´ªå©ªåŒ¹é…ã€‚</p>
<p>æœ‰æ—¶ï¼Œæˆ‘ä»¬æ›´éœ€è¦æ‡’æƒ°åŒ¹é…ï¼Œä¹Ÿå°±æ˜¯åŒ¹é…<strong>å°½å¯èƒ½å°‘</strong>çš„å­—ç¬¦ã€‚å‰é¢ç»™å‡ºçš„é™å®šç¬¦éƒ½å¯ä»¥è¢«è½¬åŒ–ä¸ºæ‡’æƒ°åŒ¹é…æ¨¡å¼ï¼Œåªè¦åœ¨å®ƒåé¢åŠ ä¸Šä¸€ä¸ªé—®å·?ã€‚è¿™æ ·.*?å°±æ„å‘³ç€åŒ¹é…ä»»æ„æ•°é‡çš„é‡å¤ï¼Œä½†æ˜¯åœ¨èƒ½ä½¿æ•´ä¸ªåŒ¹é…æˆåŠŸçš„å‰æä¸‹ä½¿ç”¨æœ€å°‘çš„é‡å¤ã€‚</p>
<table>
<thead>
<tr>
<th>è¡¨è¾¾å¼</th>
<th>æè¿°</th>
</tr>
</thead>
<tbody><tr>
<td><code>*?</code></td>
<td>é‡å¤ä»»æ„æ¬¡ï¼Œä½†å°½å¯èƒ½å°‘é‡å¤</td>
</tr>
<tr>
<td><code>+?</code></td>
<td>é‡å¤ 1 æ¬¡æˆ–æ›´å¤šæ¬¡ï¼Œä½†å°½å¯èƒ½å°‘é‡å¤</td>
</tr>
<tr>
<td><code>??</code></td>
<td>é‡å¤ 0 æ¬¡æˆ– 1 æ¬¡ï¼Œä½†å°½å¯èƒ½å°‘é‡å¤</td>
</tr>
<tr>
<td><code>&#123;n,m&#125;?</code></td>
<td>é‡å¤ n åˆ° m æ¬¡ï¼Œä½†å°½å¯èƒ½å°‘é‡å¤</td>
</tr>
<tr>
<td><code>&#123;n,&#125;?</code></td>
<td>é‡å¤ n æ¬¡ä»¥ä¸Šï¼Œä½†å°½å¯èƒ½å°‘é‡å¤</td>
</tr>
</tbody></table>
<p>ã€ç¤ºä¾‹ã€‘Java æ­£åˆ™ä¸­è´ªå©ªä¸æ‡’æƒ°çš„ç¤ºä¾‹</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// è´ªå©ªåŒ¹é…</span></span><br><span class="line">Assert.assertTrue(findAll(<span class="string">&quot;a\\w*b&quot;</span>, <span class="string">&quot;abaabaaabaaaab&quot;</span>) &gt; <span class="number">0</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">// æ‡’æƒ°åŒ¹é…</span></span><br><span class="line">Assert.assertTrue(findAll(<span class="string">&quot;a\\w*?b&quot;</span>, <span class="string">&quot;abaabaaabaaaab&quot;</span>) &gt; <span class="number">0</span>);</span><br><span class="line">Assert.assertTrue(findAll(<span class="string">&quot;a\\w+?b&quot;</span>, <span class="string">&quot;abaabaaabaaaab&quot;</span>) &gt; <span class="number">0</span>);</span><br><span class="line">Assert.assertTrue(findAll(<span class="string">&quot;a\\w??b&quot;</span>, <span class="string">&quot;abaabaaabaaaab&quot;</span>) &gt; <span class="number">0</span>);</span><br><span class="line">Assert.assertTrue(findAll(<span class="string">&quot;a\\w&#123;0,4&#125;?b&quot;</span>, <span class="string">&quot;abaabaaabaaaab&quot;</span>) &gt; <span class="number">0</span>);</span><br><span class="line">Assert.assertTrue(findAll(<span class="string">&quot;a\\w&#123;3,&#125;?b&quot;</span>, <span class="string">&quot;abaabaaabaaaab&quot;</span>) &gt; <span class="number">0</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">// è¾“å‡º</span></span><br><span class="line"><span class="comment">// regex = a\w*b, content: abaabaaabaaaab</span></span><br><span class="line"><span class="comment">// [1th] start: 0, end: 14, group: abaabaaabaaaab</span></span><br><span class="line"><span class="comment">// regex = a\w*?b, content: abaabaaabaaaab</span></span><br><span class="line"><span class="comment">// [1th] start: 0, end: 2, group: ab</span></span><br><span class="line"><span class="comment">// [2th] start: 2, end: 5, group: aab</span></span><br><span class="line"><span class="comment">// [3th] start: 5, end: 9, group: aaab</span></span><br><span class="line"><span class="comment">// [4th] start: 9, end: 14, group: aaaab</span></span><br><span class="line"><span class="comment">// regex = a\w+?b, content: abaabaaabaaaab</span></span><br><span class="line"><span class="comment">// [1th] start: 0, end: 5, group: abaab</span></span><br><span class="line"><span class="comment">// [2th] start: 5, end: 9, group: aaab</span></span><br><span class="line"><span class="comment">// [3th] start: 9, end: 14, group: aaaab</span></span><br><span class="line"><span class="comment">// regex = a\w??b, content: abaabaaabaaaab</span></span><br><span class="line"><span class="comment">// [1th] start: 0, end: 2, group: ab</span></span><br><span class="line"><span class="comment">// [2th] start: 2, end: 5, group: aab</span></span><br><span class="line"><span class="comment">// [3th] start: 6, end: 9, group: aab</span></span><br><span class="line"><span class="comment">// [4th] start: 11, end: 14, group: aab</span></span><br><span class="line"><span class="comment">// regex = a\w&#123;0,4&#125;?b, content: abaabaaabaaaab</span></span><br><span class="line"><span class="comment">// [1th] start: 0, end: 2, group: ab</span></span><br><span class="line"><span class="comment">// [2th] start: 2, end: 5, group: aab</span></span><br><span class="line"><span class="comment">// [3th] start: 5, end: 9, group: aaab</span></span><br><span class="line"><span class="comment">// [4th] start: 9, end: 14, group: aaaab</span></span><br><span class="line"><span class="comment">// regex = a\w&#123;3,&#125;?b, content: abaabaaabaaaab</span></span><br><span class="line"><span class="comment">// [1th] start: 0, end: 5, group: abaab</span></span><br><span class="line"><span class="comment">// [2th] start: 5, end: 14, group: aaabaaaab</span></span><br></pre></td></tr></table></figure>

<p>è¯´æ˜ï¼š</p>
<p>æœ¬ä¾‹ä¸­ä»£ç å±•ç¤ºçš„æ˜¯ä½¿ç”¨ä¸åŒè´ªå©ªæˆ–æ‡’æƒ°ç­–ç•¥å»æŸ¥æ‰¾å­—ç¬¦ä¸² <code>abaabaaabaaaab</code> ä¸­åŒ¹é…<strong>ä»¥ <code>a</code> å¼€å¤´ï¼Œä»¥ <code>b</code> ç»“å°¾çš„æ‰€æœ‰å­å­—ç¬¦ä¸²</strong>ã€‚è¯·ä»è¾“å‡ºç»“æœä¸­ï¼Œç»†ç»†ä½“å‘³ä½¿ç”¨ä¸åŒçš„è´ªå©ªæˆ–æ‡’æƒ°ç­–ç•¥ï¼Œå¯¹äºåŒ¹é…å­å­—ç¬¦ä¸²æœ‰ä»€ä¹ˆå½±å“ã€‚</p>
<h2 id="æ­£åˆ™é™„å½•"><a href="#æ­£åˆ™é™„å½•" class="headerlink" title="æ­£åˆ™é™„å½•"></a>æ­£åˆ™é™„å½•</h2><h3 id="åŒ¹é…æ­£åˆ™å­—ç¬¦ä¸²çš„æ–¹æ³•"><a href="#åŒ¹é…æ­£åˆ™å­—ç¬¦ä¸²çš„æ–¹æ³•" class="headerlink" title="åŒ¹é…æ­£åˆ™å­—ç¬¦ä¸²çš„æ–¹æ³•"></a>åŒ¹é…æ­£åˆ™å­—ç¬¦ä¸²çš„æ–¹æ³•</h3><p>ç”±äºæ­£åˆ™è¡¨è¾¾å¼ä¸­å¾ˆå¤šå…ƒå­—ç¬¦æœ¬èº«å°±æ˜¯è½¬ä¹‰å­—ç¬¦ï¼Œåœ¨ Java å­—ç¬¦ä¸²çš„è§„åˆ™ä¸­ä¸ä¼šè¢«æ˜¾ç¤ºå‡ºæ¥ã€‚</p>
<p>ä¸ºæ­¤ï¼Œå¯ä»¥ä½¿ç”¨ä¸€ä¸ªå·¥å…·ç±»<code>org.apache.commons.lang3.StringEscapeUtils</code>æ¥åšç‰¹æ®Šå¤„ç†ï¼Œä½¿å¾—è½¬ä¹‰å­—ç¬¦å¯ä»¥æ‰“å°ã€‚è¿™ä¸ªå·¥å…·ç±»æä¾›çš„éƒ½æ˜¯é™æ€æ–¹æ³•ï¼Œä»æ–¹æ³•å‘½åå¤§è‡´ä¹Ÿå¯ä»¥çŒœå‡ºç”¨æ³•ï¼Œè¿™é‡Œä¸å¤šåšè¯´æ˜ã€‚</p>
<p>å¦‚æœä½ äº†è§£ mavenï¼Œå¯ä»¥ç›´æ¥å¼•å…¥ä¾èµ–</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.apache.commons<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>commons-lang3<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">version</span>&gt;</span>$&#123;commons-lang3.version&#125;<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>ã€ç¤ºä¾‹ã€‘æœ¬æ–‡ä¸ºäº†å±•ç¤ºæ­£åˆ™åŒ¹é…è§„åˆ™ç”¨åˆ°çš„æ–¹æ³•</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">private</span> <span class="type">boolean</span> <span class="title function_">checkMatches</span><span class="params">(String regex, String content)</span> &#123;</span><br><span class="line">	<span class="type">Pattern</span> <span class="variable">p</span> <span class="operator">=</span> Pattern.compile(regex);</span><br><span class="line">	<span class="type">Matcher</span> <span class="variable">m</span> <span class="operator">=</span> p.matcher(content);</span><br><span class="line">	<span class="type">boolean</span> <span class="variable">flag</span> <span class="operator">=</span> m.matches();</span><br><span class="line">	<span class="keyword">if</span> (m.matches()) &#123;</span><br><span class="line">		System.out.println(StringEscapeUtils.escapeJava(content) + <span class="string">&quot;\tmatchesï¼š &quot;</span> + StringEscapeUtils.escapeJava(regex));</span><br><span class="line">	&#125; <span class="keyword">else</span> &#123;</span><br><span class="line">		System.out.println(StringEscapeUtils.escapeJava(content) + <span class="string">&quot;\tnot matchesï¼š &quot;</span> + StringEscapeUtils.escapeJava(regex));</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">return</span> flag;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="type">int</span> <span class="title function_">findAll</span><span class="params">(String regex, String content)</span> &#123;</span><br><span class="line">	<span class="type">Pattern</span> <span class="variable">p</span> <span class="operator">=</span> Pattern.compile(regex);</span><br><span class="line">	<span class="type">Matcher</span> <span class="variable">m</span> <span class="operator">=</span> p.matcher(content);</span><br><span class="line">	System.out.println(<span class="string">&quot;regex = &quot;</span> + regex + <span class="string">&quot;, content: &quot;</span> + content);</span><br><span class="line"></span><br><span class="line">	<span class="type">int</span> <span class="variable">count</span> <span class="operator">=</span> <span class="number">0</span>;</span><br><span class="line">	<span class="keyword">while</span> (m.find()) &#123;</span><br><span class="line">		count++;</span><br><span class="line">		System.out.println(<span class="string">&quot;[&quot;</span> + count + <span class="string">&quot;th] &quot;</span> + <span class="string">&quot;start: &quot;</span> + m.start() + <span class="string">&quot;, end: &quot;</span> + m.end()</span><br><span class="line">				+ <span class="string">&quot;, group: &quot;</span> + m.group());</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">if</span> (<span class="number">0</span> == count) &#123;</span><br><span class="line">		System.out.println(<span class="string">&quot;not found&quot;</span>);</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">return</span> count;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="é€ŸæŸ¥å…ƒå­—ç¬¦å­—å…¸"><a href="#é€ŸæŸ¥å…ƒå­—ç¬¦å­—å…¸" class="headerlink" title="é€ŸæŸ¥å…ƒå­—ç¬¦å­—å…¸"></a>é€ŸæŸ¥å…ƒå­—ç¬¦å­—å…¸</h3><p>ä¸ºäº†æ–¹ä¾¿å¿«æŸ¥æ­£åˆ™çš„å…ƒå­—ç¬¦å«ä¹‰ï¼Œåœ¨æœ¬èŠ‚æ ¹æ®å…ƒå­—ç¬¦çš„åŠŸèƒ½é›†ä¸­ç½—åˆ—æ­£åˆ™çš„å„ç§å…ƒå­—ç¬¦ã€‚</p>
<h4 id="é™å®šç¬¦"><a href="#é™å®šç¬¦" class="headerlink" title="é™å®šç¬¦"></a>é™å®šç¬¦</h4><table>
<thead>
<tr>
<th>å­—ç¬¦</th>
<th>æè¿°</th>
</tr>
</thead>
<tbody><tr>
<td><code>*</code></td>
<td>åŒ¹é…å‰é¢çš„å­è¡¨è¾¾å¼é›¶æ¬¡æˆ–å¤šæ¬¡ã€‚ä¾‹å¦‚ï¼Œzo* èƒ½åŒ¹é… â€œzâ€ ä»¥åŠ â€œzooâ€ã€‚* ç­‰ä»·äº{0,}ã€‚</td>
</tr>
<tr>
<td><code>+</code></td>
<td>åŒ¹é…å‰é¢çš„å­è¡¨è¾¾å¼ä¸€æ¬¡æˆ–å¤šæ¬¡ã€‚ä¾‹å¦‚ï¼Œâ€™zo+â€™ èƒ½åŒ¹é… â€œzoâ€ ä»¥åŠ â€œzooâ€ï¼Œä½†ä¸èƒ½åŒ¹é… â€œzâ€ã€‚+ ç­‰ä»·äº {1,}ã€‚</td>
</tr>
<tr>
<td><code>?</code></td>
<td>åŒ¹é…å‰é¢çš„å­è¡¨è¾¾å¼é›¶æ¬¡æˆ–ä¸€æ¬¡ã€‚ä¾‹å¦‚ï¼Œâ€do(es)?â€ å¯ä»¥åŒ¹é… â€œdoâ€ æˆ– â€œdoesâ€ ä¸­çš„â€doâ€ ã€‚? ç­‰ä»·äº {0,1}ã€‚</td>
</tr>
<tr>
<td><code>&#123;n&#125;</code></td>
<td>n æ˜¯ä¸€ä¸ªéè´Ÿæ•´æ•°ã€‚åŒ¹é…ç¡®å®šçš„ n æ¬¡ã€‚ä¾‹å¦‚ï¼Œâ€™o{2}â€™ ä¸èƒ½åŒ¹é… â€œBobâ€ ä¸­çš„ â€˜oâ€™ï¼Œä½†æ˜¯èƒ½åŒ¹é… â€œfoodâ€ ä¸­çš„ä¸¤ä¸ª oã€‚</td>
</tr>
<tr>
<td><code>&#123;n,&#125;</code></td>
<td>n æ˜¯ä¸€ä¸ªéè´Ÿæ•´æ•°ã€‚è‡³å°‘åŒ¹é… n æ¬¡ã€‚ä¾‹å¦‚ï¼Œâ€™o{2,}â€™ ä¸èƒ½åŒ¹é… â€œBobâ€ ä¸­çš„ â€˜oâ€™ï¼Œä½†èƒ½åŒ¹é… â€œfooooodâ€ ä¸­çš„æ‰€æœ‰ oã€‚â€™o{1,}â€™ ç­‰ä»·äº â€˜o+â€™ã€‚â€™o{0,}â€™ åˆ™ç­‰ä»·äº â€˜o*â€˜ã€‚</td>
</tr>
<tr>
<td><code>&#123;n,m&#125;</code></td>
<td>m å’Œ n å‡ä¸ºéè´Ÿæ•´æ•°ï¼Œå…¶ä¸­ n &lt;&#x3D; mã€‚æœ€å°‘åŒ¹é… n æ¬¡ä¸”æœ€å¤šåŒ¹é… m æ¬¡ã€‚ä¾‹å¦‚ï¼Œâ€o{1,3}â€ å°†åŒ¹é… â€œfoooooodâ€ ä¸­çš„å‰ä¸‰ä¸ª oã€‚â€™o{0,1}â€™ ç­‰ä»·äº â€˜o?â€™ã€‚è¯·æ³¨æ„åœ¨é€—å·å’Œä¸¤ä¸ªæ•°ä¹‹é—´ä¸èƒ½æœ‰ç©ºæ ¼ã€‚</td>
</tr>
</tbody></table>
<h4 id="å®šä½ç¬¦"><a href="#å®šä½ç¬¦" class="headerlink" title="å®šä½ç¬¦"></a>å®šä½ç¬¦</h4><table>
<thead>
<tr>
<th>å­—ç¬¦</th>
<th>æè¿°</th>
</tr>
</thead>
<tbody><tr>
<td><code>^</code></td>
<td>åŒ¹é…è¾“å…¥å­—ç¬¦ä¸²å¼€å§‹çš„ä½ç½®ã€‚å¦‚æœè®¾ç½®äº† RegExp å¯¹è±¡çš„ Multiline å±æ€§ï¼Œ^ è¿˜ä¼šä¸ \n æˆ– \r ä¹‹åçš„ä½ç½®åŒ¹é…ã€‚</td>
</tr>
<tr>
<td><code>$</code></td>
<td>åŒ¹é…è¾“å…¥å­—ç¬¦ä¸²ç»“å°¾çš„ä½ç½®ã€‚å¦‚æœè®¾ç½®äº† RegExp å¯¹è±¡çš„ Multiline å±æ€§ï¼Œ$ è¿˜ä¼šä¸ \n æˆ– \r ä¹‹å‰çš„ä½ç½®åŒ¹é…ã€‚</td>
</tr>
<tr>
<td><code>\b</code></td>
<td>åŒ¹é…ä¸€ä¸ªå­—è¾¹ç•Œï¼Œå³å­—ä¸ç©ºæ ¼é—´çš„ä½ç½®ã€‚</td>
</tr>
<tr>
<td><code>\B</code></td>
<td>éå­—è¾¹ç•ŒåŒ¹é…ã€‚</td>
</tr>
</tbody></table>
<h4 id="éæ‰“å°å­—ç¬¦"><a href="#éæ‰“å°å­—ç¬¦" class="headerlink" title="éæ‰“å°å­—ç¬¦"></a>éæ‰“å°å­—ç¬¦</h4><table>
<thead>
<tr>
<th>å­—ç¬¦</th>
<th>æè¿°</th>
</tr>
</thead>
<tbody><tr>
<td><code>\cx</code></td>
<td>åŒ¹é…ç”± x æŒ‡æ˜çš„æ§åˆ¶å­—ç¬¦ã€‚ä¾‹å¦‚ï¼Œ \cM åŒ¹é…ä¸€ä¸ª Control-M æˆ–å›è½¦ç¬¦ã€‚x çš„å€¼å¿…é¡»ä¸º A-Z æˆ– a-z ä¹‹ä¸€ã€‚å¦åˆ™ï¼Œå°† c è§†ä¸ºä¸€ä¸ªåŸä¹‰çš„ â€˜câ€™ å­—ç¬¦ã€‚</td>
</tr>
<tr>
<td><code>\f</code></td>
<td>åŒ¹é…ä¸€ä¸ªæ¢é¡µç¬¦ã€‚ç­‰ä»·äº \x0c å’Œ \cLã€‚</td>
</tr>
<tr>
<td><code>\n</code></td>
<td>åŒ¹é…ä¸€ä¸ªæ¢è¡Œç¬¦ã€‚ç­‰ä»·äº \x0a å’Œ \cJã€‚</td>
</tr>
<tr>
<td><code>\r</code></td>
<td>åŒ¹é…ä¸€ä¸ªå›è½¦ç¬¦ã€‚ç­‰ä»·äº \x0d å’Œ \cMã€‚</td>
</tr>
<tr>
<td><code>\s</code></td>
<td>åŒ¹é…ä»»ä½•ç©ºç™½å­—ç¬¦ï¼ŒåŒ…æ‹¬ç©ºæ ¼ã€åˆ¶è¡¨ç¬¦ã€æ¢é¡µç¬¦ç­‰ç­‰ã€‚ç­‰ä»·äº [ \f\n\r\t\v]ã€‚</td>
</tr>
<tr>
<td><code>\S</code></td>
<td>åŒ¹é…ä»»ä½•éç©ºç™½å­—ç¬¦ã€‚ç­‰ä»·äº [ \f\n\r\t\v]ã€‚</td>
</tr>
<tr>
<td><code>\t</code></td>
<td>åŒ¹é…ä¸€ä¸ªåˆ¶è¡¨ç¬¦ã€‚ç­‰ä»·äº \x09 å’Œ \cIã€‚</td>
</tr>
<tr>
<td><code>\v</code></td>
<td>åŒ¹é…ä¸€ä¸ªå‚ç›´åˆ¶è¡¨ç¬¦ã€‚ç­‰ä»·äº \x0b å’Œ \cKã€‚</td>
</tr>
</tbody></table>
<h4 id="åˆ†ç»„"><a href="#åˆ†ç»„" class="headerlink" title="åˆ†ç»„"></a>åˆ†ç»„</h4><table>
<thead>
<tr>
<th>è¡¨è¾¾å¼</th>
<th>æè¿°</th>
</tr>
</thead>
<tbody><tr>
<td><code>(exp)</code></td>
<td>åŒ¹é…çš„å­è¡¨è¾¾å¼ã€‚()ä¸­çš„å†…å®¹å°±æ˜¯å­è¡¨è¾¾å¼ã€‚</td>
</tr>
<tr>
<td><code>(?&lt;name&gt;exp)</code></td>
<td>å‘½åçš„å­è¡¨è¾¾å¼ï¼ˆåå‘å¼•ç”¨ï¼‰ã€‚</td>
</tr>
<tr>
<td><code>(?:exp)</code></td>
<td>éæ•è·ç»„ï¼Œè¡¨ç¤ºå½“ä¸€ä¸ªé™å®šç¬¦åº”ç”¨åˆ°ä¸€ä¸ªç»„ï¼Œä½†ç»„æ•è·çš„å­å­—ç¬¦ä¸²å¹¶éæ‰€éœ€æ—¶ï¼Œé€šå¸¸ä¼šä½¿ç”¨éæ•è·ç»„æ„é€ ã€‚</td>
</tr>
<tr>
<td><code>(?=exp)</code></td>
<td>åŒ¹é… exp å‰é¢çš„ä½ç½®ã€‚</td>
</tr>
<tr>
<td><code>(?&lt;=exp)</code></td>
<td>åŒ¹é… exp åé¢çš„ä½ç½®ã€‚</td>
</tr>
<tr>
<td><code>(?!exp)</code></td>
<td>åŒ¹é…åé¢è·Ÿçš„ä¸æ˜¯ exp çš„ä½ç½®ã€‚</td>
</tr>
<tr>
<td><code>(?&lt;!exp)</code></td>
<td>åŒ¹é…å‰é¢ä¸æ˜¯ exp çš„ä½ç½®ã€‚</td>
</tr>
</tbody></table>
<h4 id="ç‰¹æ®Šç¬¦å·"><a href="#ç‰¹æ®Šç¬¦å·" class="headerlink" title="ç‰¹æ®Šç¬¦å·"></a>ç‰¹æ®Šç¬¦å·</h4><table>
<thead>
<tr>
<th>å­—ç¬¦</th>
<th>æè¿°</th>
</tr>
</thead>
<tbody><tr>
<td><code>\</code></td>
<td>å°†ä¸‹ä¸€ä¸ªå­—ç¬¦æ ‡è®°ä¸ºæˆ–ç‰¹æ®Šå­—ç¬¦ã€æˆ–åŸä¹‰å­—ç¬¦ã€æˆ–å‘åå¼•ç”¨ã€æˆ–å…«è¿›åˆ¶è½¬ä¹‰ç¬¦ã€‚ä¾‹å¦‚ï¼Œ â€˜nâ€™ åŒ¹é…å­—ç¬¦ â€˜nâ€™ã€‚â€™\nâ€™ åŒ¹é…æ¢è¡Œç¬¦ã€‚åºåˆ— â€˜\â€˜ åŒ¹é… â€œ&quot;ï¼Œè€Œ â€˜(â€˜ åˆ™åŒ¹é… â€œ(â€œã€‚</td>
</tr>
<tr>
<td><code>|</code></td>
<td>æŒ‡æ˜ä¸¤é¡¹ä¹‹é—´çš„ä¸€ä¸ªé€‰æ‹©ã€‚</td>
</tr>
<tr>
<td><code>[]</code></td>
<td>åŒ¹é…æ–¹æ‹¬å·èŒƒå›´å†…çš„ä»»æ„ä¸€ä¸ªå­—ç¬¦ã€‚å½¢å¼å¦‚ï¼š[xyz]ã€[^xyz]ã€[a-z]ã€[^a-z]ã€[x,y,z]</td>
</tr>
</tbody></table>
<h2 id="æ­£åˆ™å®æˆ˜"><a href="#æ­£åˆ™å®æˆ˜" class="headerlink" title="æ­£åˆ™å®æˆ˜"></a>æ­£åˆ™å®æˆ˜</h2><p>è™½ç„¶æœ¬ç³»åˆ—æ´‹æ´‹æ´’æ´’çš„å¤§è°ˆç‰¹è°ˆæ­£åˆ™è¡¨è¾¾å¼ã€‚ä½†æ˜¯æˆ‘è¿˜æ˜¯è¦åœ¨è¿™é‡Œå»ºè®®ï¼Œå¦‚æœä¸€ä¸ªæ­£åˆ™è¡¨è¾¾å¼æ²¡æœ‰ç»è¿‡å……åˆ†æµ‹è¯•ï¼Œè¿˜æ˜¯è¦è°¨æ…ä½¿ç”¨ã€‚</p>
<p>æ­£åˆ™æ˜¯æŠŠåŒåˆƒå‰‘ï¼Œå®ƒå¯ä»¥ä¸ºä½ èŠ‚çœå¤§é‡çš„ä»£ç è¡Œã€‚ä½†æ˜¯ç”±äºå®ƒä¸æ˜“é˜…è¯»ï¼Œç»´æŠ¤èµ·æ¥å¯æ˜¯å¤´ç–¼çš„å“¦ï¼ˆä½ éœ€è¦ä¸€ä¸ªå­—ç¬¦ä¸€ä¸ªå­—ç¬¦çš„å»ç†è§£ï¼‰ã€‚</p>
<h3 id="æœ€å®ç”¨çš„æ­£åˆ™"><a href="#æœ€å®ç”¨çš„æ­£åˆ™" class="headerlink" title="æœ€å®ç”¨çš„æ­£åˆ™"></a>æœ€å®ç”¨çš„æ­£åˆ™</h3><h4 id="æ ¡éªŒä¸­æ–‡"><a href="#æ ¡éªŒä¸­æ–‡" class="headerlink" title="æ ¡éªŒä¸­æ–‡"></a>æ ¡éªŒä¸­æ–‡</h4><p>æ ¡éªŒå­—ç¬¦ä¸²ä¸­åªèƒ½æœ‰ä¸­æ–‡å­—ç¬¦ï¼ˆä¸åŒ…æ‹¬ä¸­æ–‡æ ‡ç‚¹ç¬¦å·ï¼‰ã€‚ä¸­æ–‡å­—ç¬¦çš„ Unicode ç¼–ç èŒƒå›´æ˜¯ <code>\u4e00</code> åˆ° <code>\u9fa5</code>ã€‚</p>
<blockquote>
<p>å¦‚æœ‰å…´è¶£ï¼Œå¯ä»¥å‚è€ƒ<a target="_blank" rel="noopener" href="http://baike.baidu.com/link?url=3xi0vmvCIGKQLJZdn_BYhQ1IDFsoSJMrya6_eOjCBb7A6cRIW-zhZFLC9Yh8wjxU6A_HCfNuP8FBBXU9CN3Wcq"><strong>ç™¾åº¦ç™¾ç§‘-Unicode</strong></a> ã€‚</p>
</blockquote>
<figure class="highlight taggerscript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">^[<span class="symbol">\u4e00</span>-<span class="symbol">\u9fa5</span>]+$</span><br></pre></td></tr></table></figure>

<ul>
<li><strong>åŒ¹é…ï¼š</strong> æ˜¥çœ ä¸è§‰æ™“</li>
<li><strong>ä¸åŒ¹é…ï¼š</strong>æ˜¥çœ ä¸è§‰æ™“ï¼Œ</li>
</ul>
<h4 id="æ ¡éªŒèº«ä»½è¯å·ç "><a href="#æ ¡éªŒèº«ä»½è¯å·ç " class="headerlink" title="æ ¡éªŒèº«ä»½è¯å·ç "></a>æ ¡éªŒèº«ä»½è¯å·ç </h4><p>èº«ä»½è¯ä¸º 15 ä½æˆ– 18 ä½ã€‚15 ä½æ˜¯ç¬¬ä¸€ä»£èº«ä»½è¯ã€‚ä» 1999 å¹´ 10 æœˆ 1 æ—¥èµ·ï¼Œå…¨å›½å®è¡Œå…¬æ°‘èº«ä»½è¯å·ç åˆ¶åº¦ï¼Œå±…æ°‘èº«ä»½è¯ç¼–å·ç”±åŸ 15 ä½å‡è‡³ 18 ä½ã€‚</p>
<ul>
<li><strong>15 ä½èº«ä»½è¯</strong>ï¼šç”± 15 ä½æ•°å­—ç»„æˆã€‚æ’åˆ—é¡ºåºä»å·¦è‡³å³ä¾æ¬¡ä¸ºï¼šå…­ä½æ•°å­—åœ°åŒºç ï¼›å…­ä½æ•°å­—å‡ºç”Ÿæ—¥æœŸï¼›ä¸‰ä½é¡ºåºå·ï¼Œå…¶ä¸­ 15 ä½ç”·ä¸ºå•æ•°ï¼Œå¥³ä¸ºåŒæ•°ã€‚</li>
<li><strong>18 ä½èº«ä»½è¯</strong>ï¼šç”±åä¸ƒä½æ•°å­—æœ¬ä½“ç å’Œä¸€ä½æ•°å­—æ ¡éªŒç ç»„æˆã€‚æ’åˆ—é¡ºåºä»å·¦è‡³å³ä¾æ¬¡ä¸ºï¼šå…­ä½æ•°å­—åœ°åŒºç ï¼›å…«ä½æ•°å­—å‡ºç”Ÿæ—¥æœŸï¼›ä¸‰ä½æ•°å­—é¡ºåºç å’Œä¸€ä½æ•°å­—æ ¡éªŒç ï¼ˆä¹Ÿå¯èƒ½æ˜¯ Xï¼‰ã€‚</li>
</ul>
<blockquote>
<p>èº«ä»½è¯å·å«ä¹‰è¯¦æƒ…è¯·è§ï¼š<a target="_blank" rel="noopener" href="http://baike.baidu.com/link?url=5mYlYNE0RsSe2D4tydajtiaR8hAm4pPZ0FHSPuQ05N4f6H-i7qPuw7sY5KfNuiOVJWVWZvU4gf3IY-vIcKdP1CU4Fv-9pKmFQB50qGv_hZT2dkGbkd9--8_saY7omV80vEw9ixVeEwda37fHswfmtyU4QSiBG5s3K5K-JnYr1dqNlPu0f3t008UcLh5-wyID"><strong>ç™¾åº¦ç™¾ç§‘-å±…æ°‘èº«ä»½è¯å·ç </strong></a></p>
</blockquote>
<p><strong>åœ°åŒºç ï¼ˆ6 ä½ï¼‰</strong></p>
<figure class="highlight inform7"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">(1<span class="comment">[1-5]</span>|2<span class="comment">[1-3]</span>|3<span class="comment">[1-7]</span>|4<span class="comment">[1-3]</span>|5<span class="comment">[0-4]</span>|6<span class="comment">[1-5]</span>)\d&#123;4&#125;</span><br></pre></td></tr></table></figure>

<p><strong>å‡ºç”Ÿæ—¥æœŸï¼ˆ8 ä½ï¼‰</strong></p>
<p>æ³¨ï¼šä¸‹é¢çš„æ˜¯ 18 ä½èº«ä»½è¯çš„æœ‰æ•ˆå‡ºç”Ÿæ—¥æœŸï¼Œå¦‚æœæ˜¯ 15 ä½èº«ä»½è¯ï¼Œåªè¦å°†ç¬¬ä¸€ä¸ª\d{4}æ”¹ä¸º\d{2}å³å¯ã€‚</p>
<figure class="highlight scheme"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">((\d&#123;<span class="number">4</span>&#125;((<span class="name">0</span>[<span class="name">13578</span>]|<span class="number">1</span>[<span class="name">02</span>])(<span class="name">0</span>[<span class="name">1-9</span>]|[<span class="name">12</span>]\d|<span class="number">3</span>[<span class="name">01</span>])|(<span class="name">0</span>[<span class="name">13456789</span>]|<span class="number">1</span>[<span class="name">012</span>])(<span class="name">0</span>[<span class="name">1-9</span>]|[<span class="name">12</span>]\d|<span class="number">30</span>)|<span class="number">02</span>(<span class="name">0</span>[<span class="name">1-9</span>]|<span class="number">1</span>\d|<span class="number">2</span>[<span class="name">0-8</span>])))|([<span class="name">02468</span>][<span class="name">048</span>]|[<span class="name">13579</span>][<span class="name">26</span>])<span class="number">0229</span>)</span><br></pre></td></tr></table></figure>

<p><strong>15 ä½æœ‰æ•ˆèº«ä»½è¯</strong></p>
<figure class="highlight inform7"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">^((1<span class="comment">[1-5]</span>|2<span class="comment">[1-3]</span>|3<span class="comment">[1-7]</span>|4<span class="comment">[1-3]</span>|5<span class="comment">[0-4]</span>|6<span class="comment">[1-5]</span>)\d&#123;4&#125;)((\d&#123;2&#125;((0<span class="comment">[13578]</span>|1<span class="comment">[02]</span>)(0<span class="comment">[1-9]</span>|<span class="comment">[12]</span>\d|3<span class="comment">[01]</span>)|(0<span class="comment">[13456789]</span>|1<span class="comment">[012]</span>)(0<span class="comment">[1-9]</span>|<span class="comment">[12]</span>\d|30)|02(0<span class="comment">[1-9]</span>|1\d|2<span class="comment">[0-8]</span>)))|(<span class="comment">[02468]</span><span class="comment">[048]</span>|<span class="comment">[13579]</span><span class="comment">[26]</span>)0229)(\d&#123;3&#125;)$</span><br></pre></td></tr></table></figure>

<ul>
<li><p><strong>åŒ¹é…ï¼š</strong>110001700101031</p>
</li>
<li><p><strong>ä¸åŒ¹é…ï¼š</strong>110001701501031</p>
</li>
</ul>
<p><strong>18 ä½æœ‰æ•ˆèº«ä»½è¯</strong></p>
<figure class="highlight inform7"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">^((1<span class="comment">[1-5]</span>|2<span class="comment">[1-3]</span>|3<span class="comment">[1-7]</span>|4<span class="comment">[1-3]</span>|5<span class="comment">[0-4]</span>|6<span class="comment">[1-5]</span>)\d&#123;4&#125;)((\d&#123;4&#125;((0<span class="comment">[13578]</span>|1<span class="comment">[02]</span>)(0<span class="comment">[1-9]</span>|<span class="comment">[12]</span>\d|3<span class="comment">[01]</span>)|(0<span class="comment">[13456789]</span>|1<span class="comment">[012]</span>)(0<span class="comment">[1-9]</span>|<span class="comment">[12]</span>\d|30)|02(0<span class="comment">[1-9]</span>|1\d|2<span class="comment">[0-8]</span>)))|(<span class="comment">[02468]</span><span class="comment">[048]</span>|<span class="comment">[13579]</span><span class="comment">[26]</span>)0229)(\d&#123;3&#125;(\d|X))$</span><br></pre></td></tr></table></figure>

<ul>
<li><p><strong>åŒ¹é…ï¼š</strong>110001199001010310 | 11000019900101015X</p>
</li>
<li><p><strong>ä¸åŒ¹é…ï¼š</strong>990000199001010310 | 110001199013010310</p>
</li>
</ul>
<h4 id="æ ¡éªŒæœ‰æ•ˆç”¨æˆ·åã€å¯†ç "><a href="#æ ¡éªŒæœ‰æ•ˆç”¨æˆ·åã€å¯†ç " class="headerlink" title="æ ¡éªŒæœ‰æ•ˆç”¨æˆ·åã€å¯†ç "></a>æ ¡éªŒæœ‰æ•ˆç”¨æˆ·åã€å¯†ç </h4><p><strong>æè¿°ï¼š</strong>é•¿åº¦ä¸º 6-18 ä¸ªå­—ç¬¦ï¼Œå…è®¸è¾“å…¥å­—æ¯ã€æ•°å­—ã€ä¸‹åˆ’çº¿ï¼Œé¦–å­—ç¬¦å¿…é¡»ä¸ºå­—æ¯ã€‚</p>
<figure class="highlight dust"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="language-xml">^[a-zA-Z]\w</span><span class="template-variable">&#123;5,17&#125;</span><span class="language-xml">$</span></span><br></pre></td></tr></table></figure>

<ul>
<li><p><strong>åŒ¹é…ï¼š</strong><a href="mailto:&#104;&#x65;&#x5f;&#108;&#x6c;&#111;&#x40;&#119;&#111;&#114;&#x6c;&#x2e;&#x64;&#46;&#x63;&#x6f;&#x6d;">&#104;&#x65;&#x5f;&#108;&#x6c;&#111;&#x40;&#119;&#111;&#114;&#x6c;&#x2e;&#x64;&#46;&#x63;&#x6f;&#x6d;</a> | <a href="mailto:&#104;&#x65;&#108;&#46;&#108;&#45;&#x6f;&#64;&#x77;&#111;&#x72;&#x2d;&#x6c;&#x64;&#x2e;&#x6d;&#x75;&#115;&#101;&#x75;&#x6d;">&#104;&#x65;&#108;&#46;&#108;&#45;&#x6f;&#64;&#x77;&#111;&#x72;&#x2d;&#x6c;&#x64;&#x2e;&#x6d;&#x75;&#115;&#101;&#x75;&#x6d;</a> | <a href="mailto:&#x68;&#x31;&#x65;&#x6c;&#x6c;&#x6f;&#64;&#x31;&#50;&#51;&#x2e;&#x63;&#111;&#x6d;">&#x68;&#x31;&#x65;&#x6c;&#x6c;&#x6f;&#64;&#x31;&#50;&#51;&#x2e;&#x63;&#111;&#x6d;</a></p>
</li>
<li><p><strong>ä¸åŒ¹é…ï¼š</strong><a href="mailto:&#104;&#101;&#108;&#108;&#x6f;&#64;&#x77;&#x6f;&#114;&#108;&#x5f;&#100;&#46;&#99;&#111;&#109;">&#104;&#101;&#108;&#108;&#x6f;&#64;&#x77;&#x6f;&#114;&#108;&#x5f;&#100;&#46;&#99;&#111;&#109;</a> | he&amp;<a href="mailto:&#108;&#108;&#x6f;&#x40;&#x77;&#x6f;&#x72;&#108;&#x64;&#x2e;&#99;&#111;&#x31;">&#108;&#108;&#x6f;&#x40;&#x77;&#x6f;&#x72;&#108;&#x64;&#x2e;&#99;&#111;&#x31;</a> | .hello@wor#.co.uk</p>
</li>
</ul>
<h4 id="æ ¡éªŒé‚®ç®±"><a href="#æ ¡éªŒé‚®ç®±" class="headerlink" title="æ ¡éªŒé‚®ç®±"></a>æ ¡éªŒé‚®ç®±</h4><p><strong>æè¿°ï¼š</strong>ä¸å…è®¸ä½¿ç”¨ IP ä½œä¸ºåŸŸåï¼Œå¦‚ : <a href="mailto:&#x68;&#101;&#108;&#108;&#111;&#x40;&#49;&#53;&#x34;&#46;&#49;&#x34;&#x35;&#46;&#x36;&#56;&#46;&#x31;&#50;">&#x68;&#101;&#108;&#108;&#111;&#x40;&#49;&#53;&#x34;&#46;&#49;&#x34;&#x35;&#46;&#x36;&#56;&#46;&#x31;&#50;</a></p>
<p><code>@</code>ç¬¦å·å‰çš„é‚®ç®±ç”¨æˆ·å’Œ<code>.</code>ç¬¦å·å‰çš„åŸŸå(domain)å¿…é¡»æ»¡è¶³ä»¥ä¸‹æ¡ä»¶ï¼š</p>
<ul>
<li>å­—ç¬¦åªèƒ½æ˜¯è‹±æ–‡å­—æ¯ã€æ•°å­—ã€ä¸‹åˆ’çº¿<code>_</code>ã€<code>.</code>ã€<code>-</code> ï¼›</li>
<li>é¦–å­—ç¬¦å¿…é¡»ä¸ºå­—æ¯æˆ–æ•°å­—ï¼›</li>
<li><code>_</code>ã€<code>.</code>ã€<code>-</code> ä¸èƒ½è¿ç»­å‡ºç°ã€‚</li>
</ul>
<p>åŸŸåçš„æ ¹åŸŸåªèƒ½ä¸ºå­—æ¯ï¼Œä¸”è‡³å°‘ä¸ºä¸¤ä¸ªå­—ç¬¦ã€‚</p>
<figure class="highlight inform7"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">^<span class="comment">[A-Za-z0-9]</span>((<span class="comment">[_\.\-]</span>?<span class="comment">[a-zA-Z0-9]</span>+)*)@(<span class="comment">[A-Za-z0-9]</span>+)((<span class="comment">[\.\-]</span>?<span class="comment">[a-zA-Z0-9]</span>+)*)\.(<span class="comment">[A-Za-z]</span>&#123;2,&#125;)$</span><br></pre></td></tr></table></figure>

<ul>
<li><strong>åŒ¹é…ï¼š</strong><a href="mailto:&#x68;&#x65;&#95;&#x6c;&#108;&#x6f;&#64;&#119;&#x6f;&#x72;&#108;&#x2e;&#100;&#x2e;&#x63;&#x6f;&#109;">&#x68;&#x65;&#95;&#x6c;&#108;&#x6f;&#64;&#119;&#x6f;&#x72;&#108;&#x2e;&#100;&#x2e;&#x63;&#x6f;&#109;</a> | <a href="mailto:&#104;&#x65;&#x6c;&#46;&#108;&#45;&#111;&#64;&#119;&#111;&#x72;&#45;&#108;&#x64;&#x2e;&#x6d;&#117;&#115;&#101;&#x75;&#109;">&#104;&#x65;&#x6c;&#46;&#108;&#45;&#111;&#64;&#119;&#111;&#x72;&#45;&#108;&#x64;&#x2e;&#x6d;&#117;&#115;&#101;&#x75;&#109;</a> | <a href="mailto:&#x68;&#49;&#101;&#108;&#108;&#x6f;&#x40;&#49;&#x32;&#51;&#46;&#x63;&#111;&#x6d;">&#x68;&#49;&#101;&#108;&#108;&#x6f;&#x40;&#49;&#x32;&#51;&#46;&#x63;&#111;&#x6d;</a></li>
<li><strong>ä¸åŒ¹é…ï¼š</strong><a href="mailto:&#x68;&#x65;&#108;&#x6c;&#111;&#x40;&#119;&#111;&#114;&#x6c;&#95;&#100;&#46;&#x63;&#111;&#109;">&#x68;&#x65;&#108;&#x6c;&#111;&#x40;&#119;&#111;&#114;&#x6c;&#95;&#100;&#46;&#x63;&#111;&#109;</a> | he&amp;<a href="mailto:&#108;&#108;&#x6f;&#64;&#x77;&#x6f;&#114;&#x6c;&#x64;&#x2e;&#99;&#x6f;&#x31;">&#108;&#108;&#x6f;&#64;&#x77;&#x6f;&#114;&#x6c;&#x64;&#x2e;&#99;&#x6f;&#x31;</a> | .hello@wor#.co.uk</li>
</ul>
<h4 id="æ ¡éªŒ-URL"><a href="#æ ¡éªŒ-URL" class="headerlink" title="æ ¡éªŒ URL"></a>æ ¡éªŒ URL</h4><p><strong>æè¿°ï¼š</strong>æ ¡éªŒ URLã€‚æ”¯æŒ httpã€httpsã€ftpã€ftpsã€‚</p>
<figure class="highlight ruby"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">^(ht|<span class="params">f)(tp</span>|tps)\<span class="symbol">://</span>[a-zA-<span class="variable constant_">Z0</span>-<span class="number">9</span>\-\.]+\.([a-zA-Z]&#123;<span class="number">2</span>,<span class="number">3</span>&#125;)<span class="string">?(</span>/\S*)<span class="string">?$</span></span><br></pre></td></tr></table></figure>

<ul>
<li><p><strong>åŒ¹é…ï¼š</strong><a target="_blank" rel="noopener" href="http://google.com/help/me">http://google.com/help/me</a> | <a target="_blank" rel="noopener" href="http://www.google.com/help/me/">http://www.google.com/help/me/</a> | <a target="_blank" rel="noopener" href="https://www.google.com/help.asp">https://www.google.com/help.asp</a> | <a href="ftp://www.google.com/">ftp://www.google.com</a> | ftps:&#x2F;&#x2F;google.org</p>
</li>
<li><p><strong>ä¸åŒ¹é…ï¼š</strong><a target="_blank" rel="noopener" href="http://un/www.google.com/index.asp">http://un/www.google.com/index.asp</a></p>
</li>
</ul>
<h4 id="æ ¡éªŒæ—¶é—´"><a href="#æ ¡éªŒæ—¶é—´" class="headerlink" title="æ ¡éªŒæ—¶é—´"></a>æ ¡éªŒæ—¶é—´</h4><p><strong>æè¿°ï¼š</strong>æ ¡éªŒæ—¶é—´ã€‚æ—¶ã€åˆ†ã€ç§’å¿…é¡»æ˜¯æœ‰æ•ˆæ•°å­—ï¼Œå¦‚æœæ•°å€¼ä¸æ˜¯ä¸¤ä½æ•°ï¼Œåä½éœ€è¦è¡¥é›¶ã€‚</p>
<figure class="highlight inform7"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">^(<span class="comment">[0-1]</span><span class="comment">[0-9]</span>|<span class="comment">[2]</span><span class="comment">[0-3]</span>):(<span class="comment">[0-5]</span><span class="comment">[0-9]</span>)$</span><br></pre></td></tr></table></figure>

<ul>
<li><p><strong>åŒ¹é…ï¼š</strong>00:00:00 | 23:59:59 | 17:06:30</p>
</li>
<li><p><strong>ä¸åŒ¹é…ï¼š</strong>17:6:30 | 24:16:30</p>
</li>
</ul>
<h4 id="æ ¡éªŒæ—¥æœŸ"><a href="#æ ¡éªŒæ—¥æœŸ" class="headerlink" title="æ ¡éªŒæ—¥æœŸ"></a>æ ¡éªŒæ—¥æœŸ</h4><p><strong>æè¿°ï¼š</strong>æ ¡éªŒæ—¥æœŸã€‚æ—¥æœŸæ»¡è¶³ä»¥ä¸‹æ¡ä»¶ï¼š</p>
<ul>
<li>æ ¼å¼ yyyy-MM-dd æˆ– yyyy-M-d</li>
<li>è¿å­—ç¬¦å¯ä»¥æ²¡æœ‰æˆ–æ˜¯â€œ-â€ã€â€œ&#x2F;â€ã€â€œ.â€ä¹‹ä¸€</li>
<li>é—°å¹´çš„äºŒæœˆå¯ä»¥æœ‰ 29 æ—¥ï¼›è€Œå¹³å¹´ä¸å¯ä»¥ã€‚</li>
<li>ä¸€ã€ä¸‰ã€äº”ã€ä¸ƒã€å…«ã€åã€åäºŒæœˆä¸º 31 æ—¥ã€‚å››ã€å…­ã€ä¹ã€åä¸€æœˆä¸º 30 æ—¥ã€‚</li>
</ul>
<figure class="highlight inform7"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">^(?:(?!0000)<span class="comment">[0-9]</span>&#123;4&#125;(<span class="comment">[-/.]</span>?)(?:(?:0?<span class="comment">[1-9]</span>|1<span class="comment">[0-2]</span>)\1(?:0?<span class="comment">[1-9]</span>|1<span class="comment">[0-9]</span>|2<span class="comment">[0-8]</span>)|(?:0?<span class="comment">[13-9]</span>|1<span class="comment">[0-2]</span>)\1(?:29|30)|(?:0?<span class="comment">[13578]</span>|1<span class="comment">[02]</span>)\1(?:31))|(?:<span class="comment">[0-9]</span>&#123;2&#125;(?:0<span class="comment">[48]</span>|<span class="comment">[2468]</span><span class="comment">[048]</span>|<span class="comment">[13579]</span><span class="comment">[26]</span>)|(?:0<span class="comment">[48]</span>|<span class="comment">[2468]</span><span class="comment">[048]</span>|<span class="comment">[13579]</span><span class="comment">[26]</span>)00)(<span class="comment">[-/.]</span>?)0?2\2(?:29))$</span><br></pre></td></tr></table></figure>

<ul>
<li><strong>åŒ¹é…ï¼š</strong>2016&#x2F;1&#x2F;1 | 2016&#x2F;01&#x2F;01 | 20160101 | 2016-01-01 | 2016.01.01 | 2000-02-29</li>
<li><strong>ä¸åŒ¹é…ï¼š</strong>2001-02-29 | 2016&#x2F;12&#x2F;32 | 2016&#x2F;6&#x2F;31 | 2016&#x2F;13&#x2F;1 | 2016&#x2F;0&#x2F;1</li>
</ul>
<h4 id="æ ¡éªŒä¸­å›½æ‰‹æœºå·ç "><a href="#æ ¡éªŒä¸­å›½æ‰‹æœºå·ç " class="headerlink" title="æ ¡éªŒä¸­å›½æ‰‹æœºå·ç "></a>æ ¡éªŒä¸­å›½æ‰‹æœºå·ç </h4><p><strong>æè¿°ï¼š</strong>ä¸­å›½æ‰‹æœºå·ç æ­£ç¡®æ ¼å¼ï¼š11 ä½æ•°å­—ã€‚</p>
<blockquote>
<p>ç§»åŠ¨æœ‰ 16 ä¸ªå·æ®µï¼š134ã€135ã€136ã€137ã€138ã€139ã€147ã€150ã€151ã€152ã€157ã€158ã€159ã€182ã€187ã€188ã€‚å…¶ä¸­ 147ã€157ã€188 æ˜¯ 3G å·æ®µï¼Œå…¶ä»–éƒ½æ˜¯ 2G å·æ®µã€‚è”é€šæœ‰ 7 ç§å·æ®µï¼š130ã€131ã€132ã€155ã€156ã€185ã€186ã€‚å…¶ä¸­ 186 æ˜¯ 3Gï¼ˆWCDMAï¼‰å·æ®µï¼Œå…¶ä½™ä¸º 2G å·æ®µã€‚ç”µä¿¡æœ‰ 4 ä¸ªå·æ®µï¼š133ã€153ã€180ã€189ã€‚å…¶ä¸­ 189 æ˜¯ 3G å·æ®µï¼ˆCDMA2000ï¼‰ï¼Œ133 å·æ®µä¸»è¦ç”¨ä½œæ— çº¿ç½‘å¡å·ã€‚æ€»ç»“ï¼š13 å¼€å¤´æ‰‹æœºå· 0-9ï¼›15 å¼€å¤´æ‰‹æœºå· 0-3ã€5-9ï¼›18 å¼€å¤´æ‰‹æœºå· 0ã€2ã€5-9ã€‚</p>
<p>æ­¤å¤–ï¼Œä¸­å›½åœ¨å›½é™…ä¸Šçš„åŒºå·ä¸º 86ï¼Œæ‰€ä»¥æ‰‹æœºå·å¼€å¤´æœ‰+86ã€86 ä¹Ÿæ˜¯åˆæ³•çš„ã€‚</p>
<p>ä»¥ä¸Šä¿¡æ¯æ¥æºäº <a target="_blank" rel="noopener" href="http://baike.baidu.com/link?url=Bia2K_f8rGcakOlP4d9m_-DNSgXU5-0NDP0pPavS0ZbhRHQcUFUTbMERjdO4u7cvkpTJaIDeUXq_EXWnMqXMdSuMQDX3NAbZXAlZYl_V18KATWF7y1EFzUyJ62rf3bAN"><strong>ç™¾åº¦ç™¾ç§‘-æ‰‹æœºå·</strong></a></p>
</blockquote>
<figure class="highlight gcode"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">^<span class="comment">((\+)</span>?<span class="number">86</span>\s*)?<span class="comment">((13[0-9])</span>|<span class="comment">(15([0-3]|[5-9])</span>)|<span class="comment">(18[0,2,5-9])</span>)\d&#123;<span class="number">8</span>&#125;$</span><br></pre></td></tr></table></figure>

<ul>
<li><p><strong>åŒ¹é…ï¼š</strong>+86 18012345678 | 86 18012345678 | 15812345678</p>
</li>
<li><p><strong>ä¸åŒ¹é…ï¼š</strong>15412345678 | 12912345678 | 180123456789</p>
</li>
</ul>
<h4 id="æ ¡éªŒä¸­å›½å›ºè¯å·ç "><a href="#æ ¡éªŒä¸­å›½å›ºè¯å·ç " class="headerlink" title="æ ¡éªŒä¸­å›½å›ºè¯å·ç "></a>æ ¡éªŒä¸­å›½å›ºè¯å·ç </h4><p><strong>æè¿°ï¼š</strong>å›ºè¯å·ç ï¼Œå¿…é¡»åŠ åŒºå·ï¼ˆä»¥ 0 å¼€å¤´ï¼‰ã€‚<br>3 ä½æœ‰æ•ˆåŒºå·ï¼š010ã€020~029ï¼Œå›ºè¯ä½æ•°ä¸º 8 ä½ã€‚<br>4 ä½æœ‰æ•ˆåŒºå·ï¼š03xx å¼€å¤´åˆ° 09xxï¼Œå›ºè¯ä½æ•°ä¸º 7ã€‚</p>
<blockquote>
<p>å¦‚æœæƒ³äº†è§£æ›´è¯¦ç»†çš„ä¿¡æ¯ï¼Œè¯·å‚è€ƒ <a target="_blank" rel="noopener" href="http://baike.baidu.com/link?url=sX8JoxK1ja5uM5pDYvQe27_QsyqAZ_78DLSeEvwjqtG_uXqU6p5Oh7CPbImNbnwu1ClOmD8udgDIswZfYzQIw0z3BYZO3eTplvVDzieuowTYqt7yHGDAqyT7o4vvGhg4"><strong>ç™¾åº¦ç™¾ç§‘-ç”µè¯åŒºå·</strong></a> ã€‚</p>
</blockquote>
<figure class="highlight coq"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">^(<span class="number">010</span>|<span class="type">02</span>[<span class="number">0</span><span class="number">-9</span>])(\s|<span class="type">-)\d</span>&#123;<span class="number">8</span>&#125;|<span class="type">(0</span>[<span class="number">3</span><span class="number">-9</span>]\d&#123;<span class="number">2</span>&#125;)(\s|<span class="type">-)\d</span>&#123;<span class="number">7</span>&#125;$</span><br></pre></td></tr></table></figure>

<ul>
<li><p><strong>åŒ¹é…ï¼š</strong>010-12345678 | 010 12345678 | 0512-1234567 | 0512 1234567</p>
</li>
<li><p><strong>ä¸åŒ¹é…ï¼š</strong>1234567 | 12345678</p>
</li>
</ul>
<h4 id="æ ¡éªŒ-IPv4-åœ°å€"><a href="#æ ¡éªŒ-IPv4-åœ°å€" class="headerlink" title="æ ¡éªŒ IPv4 åœ°å€"></a>æ ¡éªŒ IPv4 åœ°å€</h4><p><strong>æè¿°ï¼š</strong>IP åœ°å€æ˜¯ä¸€ä¸ª 32 ä½çš„äºŒè¿›åˆ¶æ•°ï¼Œé€šå¸¸è¢«åˆ†å‰²ä¸º 4 ä¸ªâ€œ8 ä½äºŒè¿›åˆ¶æ•°â€ï¼ˆä¹Ÿå°±æ˜¯ 4 ä¸ªå­—èŠ‚ï¼‰ã€‚IP åœ°å€é€šå¸¸ç”¨â€œç‚¹åˆ†åè¿›åˆ¶â€è¡¨ç¤ºæˆï¼ˆa.b.c.dï¼‰çš„å½¢å¼ï¼Œå…¶ä¸­ï¼Œa,b,c,d éƒ½æ˜¯ 0~255 ä¹‹é—´çš„åè¿›åˆ¶æ•´æ•°ã€‚</p>
<figure class="highlight inform7"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">^(<span class="comment">[01]</span>?\d\d?|2<span class="comment">[0-4]</span>\d|25<span class="comment">[0-5]</span>)\.(<span class="comment">[01]</span>?\d\d?|2<span class="comment">[0-4]</span>\d|25<span class="comment">[0-5]</span>)\.(<span class="comment">[01]</span>?\d\d?|2<span class="comment">[0-4]</span>\d|25<span class="comment">[0-5]</span>)\.(<span class="comment">[01]</span>?\d\d?|2<span class="comment">[0-4]</span>\d|25<span class="comment">[0-5]</span>)$</span><br></pre></td></tr></table></figure>

<ul>
<li><p><strong>åŒ¹é…ï¼š</strong>0.0.0.0 | 255.255.255.255 | 127.0.0.1</p>
</li>
<li><p><strong>ä¸åŒ¹é…ï¼š</strong>10.10.10 | 10.10.10.256</p>
</li>
</ul>
<h4 id="æ ¡éªŒ-IPv6-åœ°å€"><a href="#æ ¡éªŒ-IPv6-åœ°å€" class="headerlink" title="æ ¡éªŒ IPv6 åœ°å€"></a>æ ¡éªŒ IPv6 åœ°å€</h4><p><strong>æè¿°ï¼š</strong>IPv6 çš„ 128 ä½åœ°å€é€šå¸¸å†™æˆ 8 ç»„ï¼Œæ¯ç»„ä¸ºå››ä¸ªåå…­è¿›åˆ¶æ•°çš„å½¢å¼ã€‚</p>
<p>IPv6 åœ°å€å¯ä»¥è¡¨ç¤ºä¸ºä»¥ä¸‹å½¢å¼ï¼š</p>
<ul>
<li>IPv6 åœ°å€</li>
<li>é›¶å‹ç¼© IPv6 åœ°å€(<a target="_blank" rel="noopener" href="https://tools.ietf.org/html/rfc5952#section-2.2">section 2.2 of rfc5952</a>)</li>
<li>å¸¦æœ‰æœ¬åœ°é“¾æ¥åŒºåŸŸç´¢å¼•çš„ IPv6 åœ°å€ (<a target="_blank" rel="noopener" href="https://tools.ietf.org/html/rfc4007#section-11">section 11 of rfc4007</a>)</li>
<li>åµŒå…¥ IPv4 çš„ IPv6 åœ°å€(<a target="_blank" rel="noopener" href="https://tools.ietf.org/html/rfc6052#section-2">section 2 of rfc6052</a></li>
<li>æ˜ å°„ IPv4 çš„ IPv6 åœ°å€ (<a target="_blank" rel="noopener" href="https://tools.ietf.org/html/rfc2765#section-2.1">section 2.1 of rfc2765</a>)</li>
<li>ç¿»è¯‘ IPv4 çš„ IPv6 åœ°å€ (<a target="_blank" rel="noopener" href="https://tools.ietf.org/html/rfc2765#section-2.1">section 2.1 of rfc2765</a>)</li>
</ul>
<blockquote>
<p>æ˜¾ç„¶ï¼ŒIPv6 åœ°å€çš„è¡¨ç¤ºæ–¹å¼å¾ˆå¤æ‚ã€‚ä½ ä¹Ÿå¯ä»¥å‚è€ƒï¼š</p>
<p><a target="_blank" rel="noopener" href="http://baike.baidu.com/link?url=D3nmh0q_G_ZVmxXFG79mjjNfT4hs9fwjqUgygh-tvhq43KYqx88HV27WEXmoT4nA4iGzXwXMm5L-j50C2gSL5q"><strong>ç™¾åº¦ç™¾ç§‘-IPv6</strong></a></p>
<p><a target="_blank" rel="noopener" href="http://stackoverflow.com/questions/53497/regular-expression-that-matches-valid-ipv6-addresses"><strong>Stack overflow ä¸Šçš„ IPv6 æ­£åˆ™è¡¨è¾¾é«˜ç¥¨ç­”æ¡ˆ</strong></a></p>
</blockquote>
<figure class="highlight scheme"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">(([<span class="name">0-9a-fA-F</span>]&#123;<span class="number">1</span>,<span class="number">4</span>&#125;:)&#123;<span class="number">7</span>,<span class="number">7</span>&#125;[<span class="name">0-9a-fA-F</span>]&#123;<span class="number">1</span>,<span class="number">4</span>&#125;|([<span class="name">0-9a-fA-F</span>]&#123;<span class="number">1</span>,<span class="number">4</span>&#125;:)&#123;<span class="number">1</span>,<span class="number">7</span>&#125;:|([<span class="name">0-9a-fA-F</span>]&#123;<span class="number">1</span>,<span class="number">4</span>&#125;:)&#123;<span class="number">1</span>,<span class="number">6</span>&#125;:[<span class="name">0-9a-fA-F</span>]&#123;<span class="number">1</span>,<span class="number">4</span>&#125;|([<span class="name">0-9a-fA-F</span>]&#123;<span class="number">1</span>,<span class="number">4</span>&#125;:)&#123;<span class="number">1</span>,<span class="number">5</span>&#125;(<span class="name">:</span>[<span class="name">0-9a-fA-F</span>]&#123;<span class="number">1</span>,<span class="number">4</span>&#125;)&#123;<span class="number">1</span>,<span class="number">2</span>&#125;|([<span class="name">0-9a-fA-F</span>]&#123;<span class="number">1</span>,<span class="number">4</span>&#125;:)&#123;<span class="number">1</span>,<span class="number">4</span>&#125;(<span class="name">:</span>[<span class="name">0-9a-fA-F</span>]&#123;<span class="number">1</span>,<span class="number">4</span>&#125;)&#123;<span class="number">1</span>,<span class="number">3</span>&#125;|([<span class="name">0-9a-fA-F</span>]&#123;<span class="number">1</span>,<span class="number">4</span>&#125;:)&#123;<span class="number">1</span>,<span class="number">3</span>&#125;(<span class="name">:</span>[<span class="name">0-9a-fA-F</span>]&#123;<span class="number">1</span>,<span class="number">4</span>&#125;)&#123;<span class="number">1</span>,<span class="number">4</span>&#125;|([<span class="name">0-9a-fA-F</span>]&#123;<span class="number">1</span>,<span class="number">4</span>&#125;:)&#123;<span class="number">1</span>,<span class="number">2</span>&#125;(<span class="name">:</span>[<span class="name">0-9a-fA-F</span>]&#123;<span class="number">1</span>,<span class="number">4</span>&#125;)&#123;<span class="number">1</span>,<span class="number">5</span>&#125;|[<span class="name">0-9a-fA-F</span>]&#123;<span class="number">1</span>,<span class="number">4</span>&#125;:((<span class="name">:</span>[<span class="name">0-9a-fA-F</span>]&#123;<span class="number">1</span>,<span class="number">4</span>&#125;)&#123;<span class="number">1</span>,<span class="number">6</span>&#125;)|:((<span class="name">:</span>[<span class="name">0-9a-fA-F</span>]&#123;<span class="number">1</span>,<span class="number">4</span>&#125;)&#123;<span class="number">1</span>,<span class="number">7</span>&#125;|:)|fe80:(<span class="name">:</span>[<span class="name">0-9a-fA-F</span>]&#123;<span class="number">0</span>,<span class="number">4</span>&#125;)&#123;<span class="number">0</span>,<span class="number">4</span>&#125;%[<span class="name">0-9a-zA-Z</span>]&#123;<span class="number">1</span>,&#125;|::(<span class="name">ffff</span>(<span class="name">:0</span>&#123;<span class="number">1</span>,<span class="number">4</span>&#125;)&#123;<span class="number">0</span>,<span class="number">1</span>&#125;:)&#123;<span class="number">0</span>,<span class="number">1</span>&#125;((<span class="name">25</span>[<span class="name">0-5</span>]|(<span class="name">2</span>[<span class="name">0-4</span>]|<span class="number">1</span>&#123;<span class="number">0</span>,<span class="number">1</span>&#125;[<span class="name">0-9</span>])&#123;<span class="number">0</span>,<span class="number">1</span>&#125;[<span class="name">0-9</span>])\.)&#123;<span class="number">3</span>,<span class="number">3</span>&#125;(<span class="name">25</span>[<span class="name">0-5</span>]|(<span class="name">2</span>[<span class="name">0-4</span>]|<span class="number">1</span>&#123;<span class="number">0</span>,<span class="number">1</span>&#125;[<span class="name">0-9</span>])&#123;<span class="number">0</span>,<span class="number">1</span>&#125;[<span class="name">0-9</span>])|([<span class="name">0-9a-fA-F</span>]&#123;<span class="number">1</span>,<span class="number">4</span>&#125;:)&#123;<span class="number">1</span>,<span class="number">4</span>&#125;:((<span class="name">25</span>[<span class="name">0-5</span>]|(<span class="name">2</span>[<span class="name">0-4</span>]|<span class="number">1</span>&#123;<span class="number">0</span>,<span class="number">1</span>&#125;[<span class="name">0-9</span>])&#123;<span class="number">0</span>,<span class="number">1</span>&#125;[<span class="name">0-9</span>])\.)&#123;<span class="number">3</span>,<span class="number">3</span>&#125;(<span class="name">25</span>[<span class="name">0-5</span>]|(<span class="name">2</span>[<span class="name">0-4</span>]|<span class="number">1</span>&#123;<span class="number">0</span>,<span class="number">1</span>&#125;[<span class="name">0-9</span>])&#123;<span class="number">0</span>,<span class="number">1</span>&#125;[<span class="name">0-9</span>]))</span><br></pre></td></tr></table></figure>

<ul>
<li><p><strong>åŒ¹é…ï¼š</strong>1:2:3:4:5:6:7:8 | 1:: | 1::8 | 1::6:7:8 | 1::5:6:7:8 | 1::4:5:6:7:8 | 1::3:4:5:6:7:8 | ::2:3:4:5:6:7:8 | 1:2:3:4:5:6:7:: | 1:2:3:4:5:6::8 | 1:2:3:4:5::8 | 1:2:3:4::8 | 1:2:3::8 | 1:2::8 | 1::8 | ::8 | fe80::7:8%1 | ::255.255.255.255 | 2001:db8:3:4::192.0.2.33 | 64:ff9b::192.0.2.33</p>
</li>
<li><p><strong>ä¸åŒ¹é…ï¼š</strong>1.2.3.4.5.6.7.8 | 1::2::3</p>
</li>
</ul>
<h3 id="ç‰¹å®šå­—ç¬¦"><a href="#ç‰¹å®šå­—ç¬¦" class="headerlink" title="ç‰¹å®šå­—ç¬¦"></a>ç‰¹å®šå­—ç¬¦</h3><ul>
<li>åŒ¹é…é•¿åº¦ä¸º 3 çš„å­—ç¬¦ä¸²ï¼š<code>^.&#123;3&#125;$</code>ã€‚</li>
<li>åŒ¹é…ç”± 26 ä¸ªè‹±æ–‡å­—æ¯ç»„æˆçš„å­—ç¬¦ä¸²ï¼š<code>^[A-Za-z]+$</code>ã€‚</li>
<li>åŒ¹é…ç”± 26 ä¸ªå¤§å†™è‹±æ–‡å­—æ¯ç»„æˆçš„å­—ç¬¦ä¸²ï¼š<code>^[A-Z]+$</code>ã€‚</li>
<li>åŒ¹é…ç”± 26 ä¸ªå°å†™è‹±æ–‡å­—æ¯ç»„æˆçš„å­—ç¬¦ä¸²ï¼š<code>^[a-z]+$</code>ã€‚</li>
<li>åŒ¹é…ç”±æ•°å­—å’Œ 26 ä¸ªè‹±æ–‡å­—æ¯ç»„æˆçš„å­—ç¬¦ä¸²ï¼š<code>^[A-Za-z0-9]+$</code>ã€‚</li>
<li>åŒ¹é…ç”±æ•°å­—ã€26 ä¸ªè‹±æ–‡å­—æ¯æˆ–è€…ä¸‹åˆ’çº¿ç»„æˆçš„å­—ç¬¦ä¸²ï¼š<code>^\w+$</code>ã€‚</li>
</ul>
<h3 id="ç‰¹å®šæ•°å­—"><a href="#ç‰¹å®šæ•°å­—" class="headerlink" title="ç‰¹å®šæ•°å­—"></a>ç‰¹å®šæ•°å­—</h3><ul>
<li>åŒ¹é…æ­£æ•´æ•°ï¼š<code>^[1-9]\d*$</code></li>
<li>åŒ¹é…è´Ÿæ•´æ•°ï¼š<code>^-[1-9]\d*$</code></li>
<li>åŒ¹é…æ•´æ•°ï¼š<code>^(-?[1-9]\d*)|0$</code></li>
<li>åŒ¹é…æ­£æµ®ç‚¹æ•°ï¼š<code>^[1-9]\d*\.\d+|0\.\d+$</code></li>
<li>åŒ¹é…è´Ÿæµ®ç‚¹æ•°ï¼š<code>^-([1-9]\d*\.\d*|0\.\d*[1-9]\d*)$</code></li>
<li>åŒ¹é…æµ®ç‚¹æ•°ï¼š<code>^-?([1-9]\d*\.\d*|0\.\d*[1-9]\d*|0?\.0+|0)$</code></li>
</ul>
<h2 id="æ­£åˆ™è¡¨è¾¾å¼çš„æ€§èƒ½"><a href="#æ­£åˆ™è¡¨è¾¾å¼çš„æ€§èƒ½" class="headerlink" title="æ­£åˆ™è¡¨è¾¾å¼çš„æ€§èƒ½"></a>æ­£åˆ™è¡¨è¾¾å¼çš„æ€§èƒ½</h2><p>ç›®å‰å®ç°æ­£åˆ™è¡¨è¾¾å¼å¼•æ“çš„æ–¹å¼æœ‰ä¸¤ç§ï¼šDFA è‡ªåŠ¨æœºï¼ˆDeterministic Final Automata ç¡®å®šæœ‰é™çŠ¶æ€è‡ªåŠ¨æœºï¼‰å’Œ NFA è‡ªåŠ¨æœºï¼ˆNon deterministic Finite Automaton éç¡®å®šæœ‰é™çŠ¶æ€è‡ªåŠ¨æœºï¼‰ã€‚å¯¹æ¯”æ¥çœ‹ï¼Œæ„é€  DFA è‡ªåŠ¨æœºçš„ä»£ä»·è¿œå¤§äº NFA è‡ªåŠ¨æœºï¼Œä½† DFA è‡ªåŠ¨æœºçš„æ‰§è¡Œæ•ˆç‡é«˜äº NFA è‡ªåŠ¨æœºã€‚</p>
<p>å‡è®¾ä¸€ä¸ªå­—ç¬¦ä¸²çš„é•¿åº¦æ˜¯ nï¼Œå¦‚æœç”¨ DFA è‡ªåŠ¨æœºä½œä¸ºæ­£åˆ™è¡¨è¾¾å¼å¼•æ“ï¼Œåˆ™åŒ¹é…çš„æ—¶é—´å¤æ‚åº¦ä¸º O(n)ï¼›å¦‚æœç”¨ NFA è‡ªåŠ¨æœºä½œä¸ºæ­£åˆ™è¡¨è¾¾å¼å¼•æ“ï¼Œç”±äº NFA è‡ªåŠ¨æœºåœ¨åŒ¹é…è¿‡ç¨‹ä¸­å­˜åœ¨å¤§é‡çš„åˆ†æ”¯å’Œå›æº¯ï¼Œå‡è®¾ NFA çš„çŠ¶æ€æ•°ä¸º sï¼Œåˆ™è¯¥åŒ¹é…ç®—æ³•çš„æ—¶é—´å¤æ‚åº¦ä¸º Oï¼ˆnsï¼‰ã€‚</p>
<p>NFA è‡ªåŠ¨æœºçš„ä¼˜åŠ¿æ˜¯æ”¯æŒæ›´å¤šåŠŸèƒ½ã€‚ä¾‹å¦‚ï¼Œæ•è· groupã€ç¯è§†ã€å æœ‰ä¼˜å…ˆé‡è¯ç­‰é«˜çº§åŠŸèƒ½ã€‚è¿™äº›åŠŸèƒ½éƒ½æ˜¯åŸºäºå­è¡¨è¾¾å¼ç‹¬ç«‹è¿›è¡ŒåŒ¹é…ï¼Œå› æ­¤åœ¨ç¼–ç¨‹è¯­è¨€é‡Œï¼Œä½¿ç”¨çš„æ­£åˆ™è¡¨è¾¾å¼åº“éƒ½æ˜¯åŸºäº NFA å®ç°çš„ã€‚</p>
<h3 id="NFA-è‡ªåŠ¨æœºçš„å›æº¯"><a href="#NFA-è‡ªåŠ¨æœºçš„å›æº¯" class="headerlink" title="NFA è‡ªåŠ¨æœºçš„å›æº¯"></a>NFA è‡ªåŠ¨æœºçš„å›æº¯</h3><p>ç”¨ NFA è‡ªåŠ¨æœºå®ç°çš„æ¯”è¾ƒå¤æ‚çš„æ­£åˆ™è¡¨è¾¾å¼ï¼Œåœ¨åŒ¹é…è¿‡ç¨‹ä¸­ç»å¸¸ä¼šå¼•èµ·å›æº¯é—®é¢˜ã€‚å¤§é‡çš„å›æº¯ä¼šé•¿æ—¶é—´åœ°å ç”¨ CPUï¼Œä»è€Œå¸¦æ¥ç³»ç»Ÿæ€§èƒ½å¼€é”€ã€‚</p>
<figure class="highlight ini"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">text</span>=â€œabbcâ€</span><br><span class="line"><span class="attr">regex</span>=â€œab&#123;<span class="number">1</span>,<span class="number">3</span>&#125;câ€</span><br></pre></td></tr></table></figure>

<p>è¿™ä¸ªä¾‹å­åŒ¹é…ç›®çš„æ˜¯ï¼šåŒ¹é…ä»¥ a å¼€å¤´ï¼Œä»¥ c ç»“å°¾ï¼Œä¸­é—´æœ‰ 1-3 ä¸ª b å­—ç¬¦çš„å­—ç¬¦ä¸²ã€‚NFA è‡ªåŠ¨æœºå¯¹å…¶è§£æçš„è¿‡ç¨‹æ˜¯è¿™æ ·çš„ï¼š</p>
<ul>
<li>è¯»å–æ­£åˆ™è¡¨è¾¾å¼ç¬¬ä¸€ä¸ªåŒ¹é…ç¬¦ a å’Œå­—ç¬¦ä¸²ç¬¬ä¸€ä¸ªå­—ç¬¦ a è¿›è¡Œæ¯”è¾ƒï¼Œa å¯¹ aï¼ŒåŒ¹é…ã€‚</li>
<li>ç„¶åï¼Œè¯»å–æ­£åˆ™è¡¨è¾¾å¼ç¬¬äºŒä¸ªåŒ¹é…ç¬¦ <code>b&#123;1,3&#125;</code> å’Œå­—ç¬¦ä¸²çš„ç¬¬äºŒä¸ªå­—ç¬¦ b è¿›è¡Œæ¯”è¾ƒï¼ŒåŒ¹é…ã€‚ä½†å› ä¸º <code>b&#123;1,3&#125;</code> è¡¨ç¤º 1-3 ä¸ª b å­—ç¬¦ä¸²ï¼ŒNFA è‡ªåŠ¨æœºåˆå…·æœ‰è´ªå©ªç‰¹æ€§ï¼Œæ‰€ä»¥æ­¤æ—¶ä¸ä¼šç»§ç»­è¯»å–æ­£åˆ™è¡¨è¾¾å¼çš„ä¸‹ä¸€ä¸ªåŒ¹é…ç¬¦ï¼Œè€Œæ˜¯ä¾æ—§ä½¿ç”¨ <code>b&#123;1,3&#125;</code> å’Œå­—ç¬¦ä¸²çš„ç¬¬ä¸‰ä¸ªå­—ç¬¦ b è¿›è¡Œæ¯”è¾ƒï¼Œç»“æœè¿˜æ˜¯åŒ¹é…ã€‚</li>
<li>æ¥ç€ç»§ç»­ä½¿ç”¨ <code>b&#123;1,3&#125;</code> å’Œå­—ç¬¦ä¸²çš„ç¬¬å››ä¸ªå­—ç¬¦ c è¿›è¡Œæ¯”è¾ƒï¼Œå‘ç°ä¸åŒ¹é…äº†ï¼Œæ­¤æ—¶å°±ä¼šå‘ç”Ÿå›æº¯ï¼Œå·²ç»è¯»å–çš„å­—ç¬¦ä¸²ç¬¬å››ä¸ªå­—ç¬¦ c å°†è¢«åå‡ºå»ï¼ŒæŒ‡é’ˆå›åˆ°ç¬¬ä¸‰ä¸ªå­—ç¬¦ b çš„ä½ç½®ã€‚</li>
<li>é‚£ä¹ˆå‘ç”Ÿå›æº¯ä»¥åï¼ŒåŒ¹é…è¿‡ç¨‹æ€ä¹ˆç»§ç»­å‘¢ï¼Ÿç¨‹åºä¼šè¯»å–æ­£åˆ™è¡¨è¾¾å¼çš„ä¸‹ä¸€ä¸ªåŒ¹é…ç¬¦ cï¼Œå’Œå­—ç¬¦ä¸²ä¸­çš„ç¬¬å››ä¸ªå­—ç¬¦ c è¿›è¡Œæ¯”è¾ƒï¼Œç»“æœåŒ¹é…ï¼Œç»“æŸã€‚</li>
</ul>
<h3 id="å¦‚ä½•é¿å…å›æº¯"><a href="#å¦‚ä½•é¿å…å›æº¯" class="headerlink" title="å¦‚ä½•é¿å…å›æº¯"></a>å¦‚ä½•é¿å…å›æº¯</h3><h4 id="è´ªå©ªæ¨¡å¼ï¼ˆGreedyï¼‰"><a href="#è´ªå©ªæ¨¡å¼ï¼ˆGreedyï¼‰" class="headerlink" title="è´ªå©ªæ¨¡å¼ï¼ˆGreedyï¼‰"></a>è´ªå©ªæ¨¡å¼ï¼ˆGreedyï¼‰</h4><p>é¡¾åæ€ä¹‰ï¼Œå°±æ˜¯åœ¨æ•°é‡åŒ¹é…ä¸­ï¼Œå¦‚æœå•ç‹¬ä½¿ç”¨ +ã€ ? ã€* æˆ–{min,max} ç­‰é‡è¯ï¼Œæ­£åˆ™è¡¨è¾¾å¼ä¼šåŒ¹é…å°½å¯èƒ½å¤šçš„å†…å®¹ã€‚</p>
<p>ä¾‹å¦‚ï¼Œä¸Šè¾¹é‚£ä¸ªä¾‹å­ï¼š</p>
<figure class="highlight ini"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">text</span>=â€œabbcâ€</span><br><span class="line"><span class="attr">regex</span>=â€œab&#123;<span class="number">1</span>,<span class="number">3</span>&#125;câ€</span><br></pre></td></tr></table></figure>

<p>å°±æ˜¯åœ¨è´ªå©ªæ¨¡å¼ä¸‹ï¼ŒNFA è‡ªåŠ¨æœºè¯»å–äº†æœ€å¤§çš„åŒ¹é…èŒƒå›´ï¼Œå³åŒ¹é… 3 ä¸ª b å­—ç¬¦ã€‚åŒ¹é…å‘ç”Ÿäº†ä¸€æ¬¡å¤±è´¥ï¼Œå°±å¼•èµ·äº†ä¸€æ¬¡å›æº¯ã€‚å¦‚æœåŒ¹é…ç»“æœæ˜¯â€œabbbcâ€ï¼Œå°±ä¼šåŒ¹é…æˆåŠŸã€‚</p>
<figure class="highlight ini"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">text</span>=â€œabbbcâ€</span><br><span class="line"><span class="attr">regex</span>=â€œab&#123;<span class="number">1</span>,<span class="number">3</span>&#125;câ€</span><br></pre></td></tr></table></figure>

<h4 id="æ‡’æƒ°æ¨¡å¼ï¼ˆReluctantï¼‰"><a href="#æ‡’æƒ°æ¨¡å¼ï¼ˆReluctantï¼‰" class="headerlink" title="æ‡’æƒ°æ¨¡å¼ï¼ˆReluctantï¼‰"></a>æ‡’æƒ°æ¨¡å¼ï¼ˆReluctantï¼‰</h4><p>åœ¨è¯¥æ¨¡å¼ä¸‹ï¼Œæ­£åˆ™è¡¨è¾¾å¼ä¼šå°½å¯èƒ½å°‘åœ°é‡å¤åŒ¹é…å­—ç¬¦ã€‚å¦‚æœåŒ¹é…æˆåŠŸï¼Œå®ƒä¼šç»§ç»­åŒ¹é…å‰©ä½™çš„å­—ç¬¦ä¸²ã€‚</p>
<p>ä¾‹å¦‚ï¼Œåœ¨ä¸Šé¢ä¾‹å­çš„å­—ç¬¦åé¢åŠ ä¸€ä¸ªâ€œï¼Ÿâ€ï¼Œå°±å¯ä»¥å¼€å¯æ‡’æƒ°æ¨¡å¼ã€‚</p>
<figure class="highlight ini"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">text</span>=â€œabcâ€</span><br><span class="line"><span class="attr">regex</span>=â€œab&#123;<span class="number">1</span>,<span class="number">3</span>&#125;?câ€</span><br></pre></td></tr></table></figure>

<p>åŒ¹é…ç»“æœæ˜¯â€œabcâ€ï¼Œè¯¥æ¨¡å¼ä¸‹ NFA è‡ªåŠ¨æœºé¦–å…ˆé€‰æ‹©æœ€å°çš„åŒ¹é…èŒƒå›´ï¼Œå³åŒ¹é… 1 ä¸ª b å­—ç¬¦ï¼Œå› æ­¤å°±é¿å…äº†å›æº¯é—®é¢˜ã€‚</p>
<h4 id="ç‹¬å æ¨¡å¼ï¼ˆPossessiveï¼‰"><a href="#ç‹¬å æ¨¡å¼ï¼ˆPossessiveï¼‰" class="headerlink" title="ç‹¬å æ¨¡å¼ï¼ˆPossessiveï¼‰"></a>ç‹¬å æ¨¡å¼ï¼ˆPossessiveï¼‰</h4><p>åŒè´ªå©ªæ¨¡å¼ä¸€æ ·ï¼Œç‹¬å æ¨¡å¼ä¸€æ ·ä¼šæœ€å¤§é™åº¦åœ°åŒ¹é…æ›´å¤šå†…å®¹ï¼›ä¸åŒçš„æ˜¯ï¼Œåœ¨ç‹¬å æ¨¡å¼ä¸‹ï¼ŒåŒ¹é…å¤±è´¥å°±ä¼šç»“æŸåŒ¹é…ï¼Œä¸ä¼šå‘ç”Ÿå›æº¯é—®é¢˜ã€‚</p>
<p>è¿˜æ˜¯ä¸Šè¾¹çš„ä¾‹å­ï¼Œåœ¨å­—ç¬¦åé¢åŠ ä¸€ä¸ªâ€œ+â€ï¼Œå°±å¯ä»¥å¼€å¯ç‹¬å æ¨¡å¼ã€‚</p>
<figure class="highlight ini"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">text</span>=â€œabbcâ€</span><br><span class="line"><span class="attr">regex</span>=â€œab&#123;<span class="number">1</span>,<span class="number">3</span>&#125;+bcâ€</span><br></pre></td></tr></table></figure>

<p>ç»“æœæ˜¯ä¸åŒ¹é…ï¼Œç»“æŸåŒ¹é…ï¼Œä¸ä¼šå‘ç”Ÿå›æº¯é—®é¢˜ã€‚</p>
<blockquote>
<p>è®²åˆ°è¿™é‡Œï¼Œä½ åº”è¯¥éå¸¸æ¸…æ¥šäº†ï¼Œ<strong>é¿å…å›æº¯çš„æ–¹æ³•å°±æ˜¯ï¼šä½¿ç”¨æ‡’æƒ°æ¨¡å¼å’Œç‹¬å æ¨¡å¼ã€‚</strong></p>
</blockquote>
<h3 id="æ­£åˆ™è¡¨è¾¾å¼çš„ä¼˜åŒ–"><a href="#æ­£åˆ™è¡¨è¾¾å¼çš„ä¼˜åŒ–" class="headerlink" title="æ­£åˆ™è¡¨è¾¾å¼çš„ä¼˜åŒ–"></a>æ­£åˆ™è¡¨è¾¾å¼çš„ä¼˜åŒ–</h3><h4 id="å°‘ç”¨è´ªå©ªæ¨¡å¼ï¼Œå¤šç”¨ç‹¬å æ¨¡å¼"><a href="#å°‘ç”¨è´ªå©ªæ¨¡å¼ï¼Œå¤šç”¨ç‹¬å æ¨¡å¼" class="headerlink" title="å°‘ç”¨è´ªå©ªæ¨¡å¼ï¼Œå¤šç”¨ç‹¬å æ¨¡å¼"></a>å°‘ç”¨è´ªå©ªæ¨¡å¼ï¼Œå¤šç”¨ç‹¬å æ¨¡å¼</h4><p>è´ªå©ªæ¨¡å¼ä¼šå¼•èµ·å›æº¯é—®é¢˜ï¼Œå¯ä»¥ä½¿ç”¨ç‹¬å æ¨¡å¼æ¥é¿å…å›æº¯ã€‚</p>
<h4 id="å‡å°‘åˆ†æ”¯é€‰æ‹©"><a href="#å‡å°‘åˆ†æ”¯é€‰æ‹©" class="headerlink" title="å‡å°‘åˆ†æ”¯é€‰æ‹©"></a>å‡å°‘åˆ†æ”¯é€‰æ‹©</h4><p>åˆ†æ”¯é€‰æ‹©ç±»å‹ <code>(X|Y|Z)</code> çš„æ­£åˆ™è¡¨è¾¾å¼ä¼šé™ä½æ€§èƒ½ï¼Œæˆ‘ä»¬åœ¨å¼€å‘çš„æ—¶å€™è¦å°½é‡å‡å°‘ä½¿ç”¨ã€‚å¦‚æœä¸€å®šè¦ç”¨ï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡ä»¥ä¸‹å‡ ç§æ–¹å¼æ¥ä¼˜åŒ–ï¼š</p>
<ul>
<li>é¦–å…ˆï¼Œæˆ‘ä»¬éœ€è¦è€ƒè™‘é€‰æ‹©çš„é¡ºåºï¼Œå°†æ¯”è¾ƒå¸¸ç”¨çš„é€‰æ‹©é¡¹æ”¾åœ¨å‰é¢ï¼Œä½¿å®ƒä»¬å¯ä»¥è¾ƒå¿«åœ°è¢«åŒ¹é…ï¼›</li>
<li>å…¶æ¬¡ï¼Œæˆ‘ä»¬å¯ä»¥å°è¯•æå–å…±ç”¨æ¨¡å¼ï¼Œä¾‹å¦‚ï¼Œå°† <code>(abcd|abef)</code> æ›¿æ¢ä¸º <code>ab(cd|ef)</code>ï¼Œåè€…åŒ¹é…é€Ÿåº¦è¾ƒå¿«ï¼Œå› ä¸º NFA è‡ªåŠ¨æœºä¼šå°è¯•åŒ¹é… abï¼Œå¦‚æœæ²¡æœ‰æ‰¾åˆ°ï¼Œå°±ä¸ä¼šå†å°è¯•ä»»ä½•é€‰é¡¹ï¼›</li>
<li>æœ€åï¼Œå¦‚æœæ˜¯ç®€å•çš„åˆ†æ”¯é€‰æ‹©ç±»å‹ï¼Œæˆ‘ä»¬å¯ä»¥ç”¨ä¸‰æ¬¡ index ä»£æ›¿ <code>(X|Y|Z)</code>ï¼Œå¦‚æœæµ‹è¯•çš„è¯ï¼Œä½ å°±ä¼šå‘ç°ä¸‰æ¬¡ index çš„æ•ˆç‡è¦æ¯” <code>(X|Y|Z)</code> é«˜å‡ºä¸€äº›ã€‚</li>
</ul>
<h4 id="å‡å°‘æ•è·åµŒå¥—"><a href="#å‡å°‘æ•è·åµŒå¥—" class="headerlink" title="å‡å°‘æ•è·åµŒå¥—"></a>å‡å°‘æ•è·åµŒå¥—</h4><ul>
<li>æ•è·ç»„æ˜¯æŒ‡æŠŠæ­£åˆ™è¡¨è¾¾å¼ä¸­ï¼Œå­è¡¨è¾¾å¼åŒ¹é…çš„å†…å®¹ä¿å­˜åˆ°ä»¥æ•°å­—ç¼–å·æˆ–æ˜¾å¼å‘½åçš„æ•°ç»„ä¸­ï¼Œæ–¹ä¾¿åé¢å¼•ç”¨ã€‚ä¸€èˆ¬ä¸€ä¸ª () å°±æ˜¯ä¸€ä¸ªæ•è·ç»„ï¼Œæ•è·ç»„å¯ä»¥è¿›è¡ŒåµŒå¥—ã€‚</li>
<li>éæ•è·ç»„åˆ™æ˜¯æŒ‡å‚ä¸åŒ¹é…å´ä¸è¿›è¡Œåˆ†ç»„ç¼–å·çš„æ•è·ç»„ï¼Œå…¶è¡¨è¾¾å¼ä¸€èˆ¬ç”± <code>(?:exp)</code> ç»„æˆã€‚</li>
</ul>
<p>åœ¨æ­£åˆ™è¡¨è¾¾å¼ä¸­ï¼Œæ¯ä¸ªæ•è·ç»„éƒ½æœ‰ä¸€ä¸ªç¼–å·ï¼Œç¼–å· 0 ä»£è¡¨æ•´ä¸ªåŒ¹é…åˆ°çš„å†…å®¹ã€‚æˆ‘ä»¬å¯ä»¥çœ‹ä¸‹é¢çš„ä¾‹å­ï¼š</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">	<span class="type">String</span> <span class="variable">text</span> <span class="operator">=</span> <span class="string">&quot;&lt;input high=\&quot;20\&quot; weight=\&quot;70\&quot;&gt;test&lt;/input&gt;&quot;</span>;</span><br><span class="line">	String reg=<span class="string">&quot;(&lt;input.*?&gt;)(.*?)(&lt;/input&gt;)&quot;</span>;</span><br><span class="line">	<span class="type">Pattern</span> <span class="variable">p</span> <span class="operator">=</span> Pattern.compile(reg);</span><br><span class="line">	<span class="type">Matcher</span> <span class="variable">m</span> <span class="operator">=</span> p.matcher(text);</span><br><span class="line">	<span class="keyword">while</span>(m.find()) &#123;</span><br><span class="line">		System.out.println(m.group(<span class="number">0</span>));<span class="comment">// æ•´ä¸ªåŒ¹é…åˆ°çš„å†…å®¹</span></span><br><span class="line">		System.out.println(m.group(<span class="number">1</span>));<span class="comment">//(&lt;input.*?&gt;)</span></span><br><span class="line">		System.out.println(m.group(<span class="number">2</span>));<span class="comment">//(.*?)</span></span><br><span class="line">		System.out.println(m.group(<span class="number">3</span>));<span class="comment">//(&lt;/input&gt;)</span></span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>è¿è¡Œç»“æœï¼š</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">&lt;input high=\&quot;20\&quot; weight=\&quot;70\&quot;&gt;<span class="built_in">test</span>&lt;/input&gt;</span><br><span class="line">&lt;input high=\&quot;20\&quot; weight=\&quot;70\&quot;&gt;</span><br><span class="line"><span class="built_in">test</span></span><br><span class="line">&lt;/input&gt;</span><br></pre></td></tr></table></figure>

<p>å¦‚æœä½ å¹¶ä¸éœ€è¦è·å–æŸä¸€ä¸ªåˆ†ç»„å†…çš„æ–‡æœ¬ï¼Œé‚£ä¹ˆå°±ä½¿ç”¨éæ•è·åˆ†ç»„ã€‚ä¾‹å¦‚ï¼Œä½¿ç”¨â€œ(?:X)â€ä»£æ›¿â€œ(X)â€ï¼Œæˆ‘ä»¬å†çœ‹ä¸‹é¢çš„ä¾‹å­ï¼š</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">	<span class="type">String</span> <span class="variable">text</span> <span class="operator">=</span> <span class="string">&quot;&lt;input high=\&quot;20\&quot; weight=\&quot;70\&quot;&gt;test&lt;/input&gt;&quot;</span>;</span><br><span class="line">	String reg=<span class="string">&quot;(?:&lt;input.*?&gt;)(.*?)(?:&lt;/input&gt;)&quot;</span>;</span><br><span class="line">	<span class="type">Pattern</span> <span class="variable">p</span> <span class="operator">=</span> Pattern.compile(reg);</span><br><span class="line">	<span class="type">Matcher</span> <span class="variable">m</span> <span class="operator">=</span> p.matcher(text);</span><br><span class="line">	<span class="keyword">while</span>(m.find()) &#123;</span><br><span class="line">		System.out.println(m.group(<span class="number">0</span>));<span class="comment">// æ•´ä¸ªåŒ¹é…åˆ°çš„å†…å®¹</span></span><br><span class="line">		System.out.println(m.group(<span class="number">1</span>));<span class="comment">//(.*?)</span></span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>è¿è¡Œç»“æœï¼š</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">&lt;input high=\&quot;20\&quot; weight=\&quot;70\&quot;&gt;<span class="built_in">test</span>&lt;/input&gt;</span><br><span class="line"><span class="built_in">test</span></span><br></pre></td></tr></table></figure>

<p>ç»¼ä¸Šå¯çŸ¥ï¼šå‡å°‘ä¸éœ€è¦è·å–çš„åˆ†ç»„ï¼Œå¯ä»¥æé«˜æ­£åˆ™è¡¨è¾¾å¼çš„æ€§èƒ½ã€‚</p>
<h2 id="å‚è€ƒèµ„æ–™"><a href="#å‚è€ƒèµ„æ–™" class="headerlink" title="å‚è€ƒèµ„æ–™"></a>å‚è€ƒèµ„æ–™</h2><ul>
<li><a target="_blank" rel="noopener" href="http://deerchao.net/tutorials/regex/regex.htm">æ­£åˆ™è¡¨è¾¾å¼ 30 åˆ†é’Ÿå…¥é—¨æ•™ç¨‹</a></li>
<li><a target="_blank" rel="noopener" href="https://msdn.microsoft.com/zh-cn/library/d9eze55x(v=vs.80).aspx">msdn æ­£åˆ™è¡¨è¾¾å¼æ•™ç¨‹</a></li>
<li><a target="_blank" rel="noopener" href="http://blog.csdn.net/lxcnn/article/details/4362500">æ­£åˆ™åº”ç”¨ä¹‹â€”â€”æ—¥æœŸæ­£åˆ™è¡¨è¾¾å¼</a></li>
<li><a target="_blank" rel="noopener" href="http://www.regexlib.com/">http://www.regexlib.com/</a></li>
<li><a target="_blank" rel="noopener" href="https://time.geekbang.org/column/intro/100028001">ã€ŠJava æ€§èƒ½è°ƒä¼˜å®æˆ˜ã€‹</a></li>
</ul>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="https://dunwu.github.io/blog/pages/d4e06f/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/blog/uploads/avatar.gif">
      <meta itemprop="name" content="é’æ‚Ÿ â—¾ Dunwu">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Dunwu Blog">
      <meta itemprop="description" content="é’æ‚Ÿçš„ä¸ªäººåšå®¢">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="undefined | Dunwu Blog">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/blog/pages/d4e06f/" class="post-title-link" itemprop="url">Javaå†…å­˜æ¨¡å‹</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">å‘è¡¨äº</span>

      <time title="åˆ›å»ºæ—¶é—´ï¼š2020-12-25 18:43:11" itemprop="dateCreated datePublished" datetime="2020-12-25T18:43:11+08:00">2020-12-25</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar-check"></i>
      </span>
      <span class="post-meta-item-text">æ›´æ–°äº</span>
      <time title="ä¿®æ”¹æ—¶é—´ï¼š2022-12-23 12:01:44" itemprop="dateModified" datetime="2022-12-23T12:01:44+08:00">2022-12-23</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">åˆ†ç±»äº</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/blog/categories/Java/" itemprop="url" rel="index"><span itemprop="name">Java</span></a>
        </span>
          ï¼Œ
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/blog/categories/Java/JavaSE/" itemprop="url" rel="index"><span itemprop="name">JavaSE</span></a>
        </span>
          ï¼Œ
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/blog/categories/Java/JavaSE/%E5%B9%B6%E5%8F%91/" itemprop="url" rel="index"><span itemprop="name">å¹¶å‘</span></a>
        </span>
    </span>

  
    <span class="post-meta-break"></span>
    <span class="post-meta-item" title="æœ¬æ–‡å­—æ•°">
      <span class="post-meta-item-icon">
        <i class="far fa-file-word"></i>
      </span>
      <span class="post-meta-item-text">æœ¬æ–‡å­—æ•°ï¼š</span>
      <span>8.6k</span>
    </span>
    <span class="post-meta-item" title="é˜…è¯»æ—¶é•¿">
      <span class="post-meta-item-icon">
        <i class="far fa-clock"></i>
      </span>
      <span class="post-meta-item-text">é˜…è¯»æ—¶é•¿ &asymp;</span>
      <span>8 åˆ†é’Ÿ</span>
    </span>
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <h1 id="Java-å†…å­˜æ¨¡å‹"><a href="#Java-å†…å­˜æ¨¡å‹" class="headerlink" title="Java å†…å­˜æ¨¡å‹"></a>Java å†…å­˜æ¨¡å‹</h1><blockquote>
<p><strong>å…³é”®è¯</strong>ï¼š<code>JMM</code>ã€<code>volatile</code>ã€<code>synchronized</code>ã€<code>final</code>ã€<code>Happens-Before</code>ã€<code>å†…å­˜å±éšœ</code></p>
<p><strong>æ‘˜è¦</strong>ï¼šJava å†…å­˜æ¨¡å‹ï¼ˆJava Memory Modelï¼‰ï¼Œç®€ç§° <strong>JMM</strong>ã€‚Java å†…å­˜æ¨¡å‹çš„ç›®æ ‡æ˜¯ä¸ºäº†è§£å†³ç”±å¯è§æ€§å’Œæœ‰åºæ€§å¯¼è‡´çš„å¹¶å‘å®‰å…¨é—®é¢˜ã€‚Java å†…å­˜æ¨¡å‹é€šè¿‡ <strong>å±è”½å„ç§ç¡¬ä»¶å’Œæ“ä½œç³»ç»Ÿçš„å†…å­˜è®¿é—®å·®å¼‚ï¼Œä»¥å®ç°è®© Java ç¨‹åºåœ¨å„ç§å¹³å°ä¸‹éƒ½èƒ½è¾¾åˆ°ä¸€è‡´çš„å†…å­˜è®¿é—®æ•ˆæœ</strong>ã€‚</p>
</blockquote>
<h2 id="ç‰©ç†å†…å­˜æ¨¡å‹"><a href="#ç‰©ç†å†…å­˜æ¨¡å‹" class="headerlink" title="ç‰©ç†å†…å­˜æ¨¡å‹"></a>ç‰©ç†å†…å­˜æ¨¡å‹</h2><p>ç‰©ç†æœºé‡åˆ°çš„å¹¶å‘é—®é¢˜ä¸è™šæ‹Ÿæœºä¸­çš„æƒ…å†µæœ‰ä¸å°‘ç›¸ä¼¼ä¹‹å¤„ï¼Œç‰©ç†æœºå¯¹å¹¶å‘çš„å¤„ç†æ–¹æ¡ˆå¯¹äºè™šæ‹Ÿæœºçš„å®ç°ä¹Ÿæœ‰ç›¸å½“å¤§çš„å‚è€ƒæ„ä¹‰ã€‚</p>
<h3 id="ç¡¬ä»¶å¤„ç†æ•ˆç‡"><a href="#ç¡¬ä»¶å¤„ç†æ•ˆç‡" class="headerlink" title="ç¡¬ä»¶å¤„ç†æ•ˆç‡"></a>ç¡¬ä»¶å¤„ç†æ•ˆç‡</h3><p>ç‰©ç†å†…å­˜çš„ç¬¬ä¸€ä¸ªé—®é¢˜æ˜¯ï¼šç¡¬ä»¶å¤„ç†æ•ˆç‡ã€‚</p>
<ul>
<li>ç»å¤§å¤šæ•°çš„è¿ç®—ä»»åŠ¡éƒ½ä¸å¯èƒ½åªé å¤„ç†å™¨â€œè®¡ç®—â€å°±èƒ½å®Œæˆï¼Œå¤„ç†å™¨è‡³å°‘éœ€è¦ä¸<strong>å†…å­˜äº¤äº’</strong>ï¼Œå¦‚è¯»å–è¿ç®—æ•°æ®ã€å­˜å‚¨è¿ç®—ç»“æœï¼Œè¿™ä¸ª I&#x2F;O æ“ä½œæ˜¯å¾ˆéš¾æ¶ˆé™¤çš„ï¼ˆæ— æ³•ä»…é å¯„å­˜å™¨å®Œæˆæ‰€æœ‰è¿ç®—ä»»åŠ¡ï¼‰ã€‚</li>
<li><strong>ç”±äºè®¡ç®—æœºçš„å­˜å‚¨è®¾å¤‡ä¸å¤„ç†å™¨çš„è¿ç®—é€Ÿåº¦æœ‰å‡ ä¸ªæ•°é‡çº§çš„å·®è·</strong> ï¼Œè¿™ç§é€Ÿåº¦ä¸Šçš„çŸ›ç›¾ï¼Œä¼šé™ä½ç¡¬ä»¶çš„å¤„ç†æ•ˆç‡ã€‚æ‰€ä»¥ï¼Œç°ä»£è®¡ç®—æœºéƒ½ä¸å¾—ä¸ <strong>åŠ å…¥é«˜é€Ÿç¼“å­˜ï¼ˆCacheï¼‰ æ¥ä½œä¸ºå†…å­˜å’Œå¤„ç†å™¨ä¹‹é—´çš„ç¼“å†²</strong>ã€‚å°†éœ€è¦ç”¨åˆ°çš„æ•°æ®å¤åˆ¶åˆ°ç¼“å­˜ä¸­ï¼Œè®©è¿ç®—èƒ½å¿«é€Ÿè¿›è¡Œï¼Œå½“è¿ç®—ç»“æŸåå†ä»ç¼“å­˜åŒæ­¥ä¼šå†…å­˜ä¸­ï¼Œè¿™æ ·å¤„ç†å™¨å°±æ— éœ€ç­‰å¾…ç¼“æ…¢çš„å†…å­˜è¯»å†™äº†ã€‚</li>
</ul>
<h3 id="ç¼“å­˜ä¸€è‡´æ€§"><a href="#ç¼“å­˜ä¸€è‡´æ€§" class="headerlink" title="ç¼“å­˜ä¸€è‡´æ€§"></a>ç¼“å­˜ä¸€è‡´æ€§</h3><p>é«˜é€Ÿç¼“å­˜è§£å†³äº† <strong>ç¡¬ä»¶æ•ˆç‡é—®é¢˜</strong>ï¼Œä½†æ˜¯å¼•å…¥äº†ä¸€ä¸ªæ–°çš„é—®é¢˜ï¼š<strong>ç¼“å­˜ä¸€è‡´æ€§ï¼ˆCache Coherenceï¼‰</strong>ã€‚</p>
<p>åœ¨å¤šå¤„ç†å™¨ç³»ç»Ÿä¸­ï¼Œæ¯ä¸ªå¤„ç†å™¨éƒ½æœ‰è‡ªå·±çš„é«˜é€Ÿç¼“å­˜ï¼Œè€Œå®ƒä»¬åˆå…±äº«åŒä¸€ä¸»å†…å­˜ã€‚å½“å¤šä¸ªå¤„ç†å™¨çš„è¿ç®—ä»»åŠ¡éƒ½æ¶‰åŠåŒä¸€å—ä¸»å†…å­˜åŒºåŸŸæ—¶ï¼Œå°†å¯èƒ½å¯¼è‡´å„è‡ªçš„ç¼“å­˜æ•°æ®ä¸ä¸€è‡´ã€‚</p>
<p>ä¸ºäº†è§£å†³ç¼“å­˜ä¸€è‡´æ€§é—®é¢˜ï¼Œ<strong>éœ€è¦å„ä¸ªå¤„ç†å™¨è®¿é—®ç¼“å­˜æ—¶éƒ½éµå¾ªä¸€äº›åè®®ï¼Œåœ¨è¯»å†™æ—¶è¦æ ¹æ®åè®®æ¥è¿›è¡Œæ“ä½œ</strong>ã€‚</p>
<p><img src="https://raw.githubusercontent.com/dunwu/images/dev/snap/20210102230327.png" alt="img"></p>
<h3 id="ä»£ç ä¹±åºæ‰§è¡Œä¼˜åŒ–"><a href="#ä»£ç ä¹±åºæ‰§è¡Œä¼˜åŒ–" class="headerlink" title="ä»£ç ä¹±åºæ‰§è¡Œä¼˜åŒ–"></a>ä»£ç ä¹±åºæ‰§è¡Œä¼˜åŒ–</h3><p><strong>é™¤äº†é«˜é€Ÿç¼“å­˜ä»¥å¤–ï¼Œä¸ºäº†ä½¿å¾—å¤„ç†å™¨å†…éƒ¨çš„è¿ç®—å•å…ƒå°½é‡è¢«å……åˆ†åˆ©ç”¨</strong>ï¼Œå¤„ç†å™¨å¯èƒ½ä¼šå¯¹è¾“å…¥ä»£ç è¿›è¡Œä¹±åºæ‰§è¡Œï¼ˆOut-Of-Order Executionï¼‰ä¼˜åŒ–ã€‚å¤„ç†å™¨ä¼šåœ¨è®¡ç®—ä¹‹åå°†ä¹±åºæ‰§è¡Œçš„ç»“æœé‡ç»„ï¼Œ<strong>ä¿è¯è¯¥ç»“æœä¸é¡ºåºæ‰§è¡Œçš„ç»“æœæ˜¯ä¸€è‡´çš„</strong>ï¼Œä½†ä¸ä¿è¯ç¨‹åºä¸­å„ä¸ªè¯­å¥è®¡ç®—çš„å…ˆåé¡ºåºä¸è¾“å…¥ä»£ç ä¸­çš„é¡ºåºä¸€è‡´ã€‚</p>
<p><img src="https://raw.githubusercontent.com/dunwu/images/dev/snap/20210102223609.png" alt="img"></p>
<p>ä¹±åºæ‰§è¡ŒæŠ€æœ¯æ˜¯å¤„ç†å™¨ä¸ºæé«˜è¿ç®—é€Ÿåº¦è€Œåšå‡ºè¿èƒŒä»£ç åŸæœ‰é¡ºåºçš„ä¼˜åŒ–ã€‚</p>
<ul>
<li><strong>å•æ ¸</strong>ç¯å¢ƒä¸‹ï¼Œå¤„ç†å™¨ä¿è¯åšå‡ºçš„ä¼˜åŒ–ä¸ä¼šå¯¼è‡´æ‰§è¡Œç»“æœè¿œç¦»é¢„æœŸç›®æ ‡ï¼Œä½†åœ¨å¤šæ ¸ç¯å¢ƒä¸‹å´å¹¶éå¦‚æ­¤ã€‚</li>
<li><strong>å¤šæ ¸</strong>ç¯å¢ƒä¸‹ï¼Œ å¦‚æœå­˜åœ¨ä¸€ä¸ªæ ¸çš„è®¡ç®—ä»»åŠ¡ä¾èµ–å¦ä¸€ä¸ªæ ¸çš„è®¡ç®—ä»»åŠ¡çš„ä¸­é—´ç»“æœï¼Œè€Œä¸”å¯¹ç›¸å…³æ•°æ®è¯»å†™æ²¡åšä»»ä½•é˜²æŠ¤æªæ–½ï¼Œé‚£ä¹ˆå…¶é¡ºåºæ€§å¹¶ä¸èƒ½é ä»£ç çš„å…ˆåé¡ºåºæ¥ä¿è¯ã€‚</li>
</ul>
<p><img src="https://raw.githubusercontent.com/dunwu/images/dev/snap/20210102224144.png" alt="img"></p>
<h2 id="Java-å†…å­˜æ¨¡å‹-1"><a href="#Java-å†…å­˜æ¨¡å‹-1" class="headerlink" title="Java å†…å­˜æ¨¡å‹"></a>Java å†…å­˜æ¨¡å‹</h2><p><strong><code>å†…å­˜æ¨¡å‹</code></strong> è¿™ä¸ªæ¦‚å¿µã€‚æˆ‘ä»¬å¯ä»¥ç†è§£ä¸ºï¼š<strong>åœ¨ç‰¹å®šçš„æ“ä½œåè®®ä¸‹ï¼Œå¯¹ç‰¹å®šçš„å†…å­˜æˆ–é«˜é€Ÿç¼“å­˜è¿›è¡Œè¯»å†™è®¿é—®çš„è¿‡ç¨‹æŠ½è±¡</strong>ã€‚ä¸åŒæ¶æ„çš„ç‰©ç†è®¡ç®—æœºå¯ä»¥æœ‰ä¸ä¸€æ ·çš„å†…å­˜æ¨¡å‹ï¼ŒJVM ä¹Ÿæœ‰è‡ªå·±çš„å†…å­˜æ¨¡å‹ã€‚</p>
<p>JVM ä¸­è¯•å›¾å®šä¹‰ä¸€ç§ Java å†…å­˜æ¨¡å‹ï¼ˆJava Memory Model, JMMï¼‰æ¥<strong>å±è”½å„ç§ç¡¬ä»¶å’Œæ“ä½œç³»ç»Ÿçš„å†…å­˜è®¿é—®å·®å¼‚</strong>ï¼Œä»¥å®ç°è®© Java ç¨‹åº <strong>åœ¨å„ç§å¹³å°ä¸‹éƒ½èƒ½è¾¾åˆ°ä¸€è‡´çš„å†…å­˜è®¿é—®æ•ˆæœ</strong>ã€‚</p>
<p>åœ¨ <a target="_blank" rel="noopener" href="https://github.com/dunwu/javacore/blob/master/docs/concurrent/Java%E5%B9%B6%E5%8F%91%E7%AE%80%E4%BB%8B.md">Java å¹¶å‘ç®€ä»‹</a> ä¸­å·²ç»ä»‹ç»äº†ï¼Œå¹¶å‘å®‰å…¨éœ€è¦æ»¡è¶³å¯è§æ€§ã€æœ‰åºæ€§ã€åŸå­æ€§ã€‚å…¶ä¸­ï¼Œå¯¼è‡´å¯è§æ€§çš„åŸå› æ˜¯ç¼“å­˜ï¼Œå¯¼è‡´æœ‰åºæ€§çš„åŸå› æ˜¯ç¼–è¯‘ä¼˜åŒ–ã€‚é‚£è§£å†³å¯è§æ€§ã€æœ‰åºæ€§æœ€ç›´æ¥çš„åŠæ³•å°±æ˜¯<strong>ç¦ç”¨ç¼“å­˜å’Œç¼–è¯‘ä¼˜åŒ–</strong> ã€‚ä½†è¿™ä¹ˆåšï¼Œæ€§èƒ½å°±å ªå¿§äº†ã€‚</p>
<p>åˆç†çš„æ–¹æ¡ˆåº”è¯¥æ˜¯<strong>æŒ‰éœ€ç¦ç”¨ç¼“å­˜ä»¥åŠç¼–è¯‘ä¼˜åŒ–</strong>ã€‚é‚£ä¹ˆï¼Œå¦‚ä½•åšåˆ°å‘¢ï¼Ÿï¼ŒJava å†…å­˜æ¨¡å‹è§„èŒƒäº† JVM å¦‚ä½•æä¾›æŒ‰éœ€ç¦ç”¨ç¼“å­˜å’Œç¼–è¯‘ä¼˜åŒ–çš„æ–¹æ³•ã€‚å…·ä½“æ¥è¯´ï¼Œè¿™äº›æ–¹æ³•åŒ…æ‹¬ <strong>volatile</strong>ã€<strong>synchronized</strong> å’Œ <strong>final</strong> ä¸‰ä¸ªå…³é”®å­—ï¼Œä»¥åŠ <strong>Happens-Before è§„åˆ™</strong>ã€‚</p>
<h3 id="ä¸»å†…å­˜å’Œå·¥ä½œå†…å­˜"><a href="#ä¸»å†…å­˜å’Œå·¥ä½œå†…å­˜" class="headerlink" title="ä¸»å†…å­˜å’Œå·¥ä½œå†…å­˜"></a>ä¸»å†…å­˜å’Œå·¥ä½œå†…å­˜</h3><p>JMM çš„ä¸»è¦ç›®æ ‡æ˜¯ <strong>å®šä¹‰ç¨‹åºä¸­å„ä¸ªå˜é‡çš„è®¿é—®è§„åˆ™ï¼Œå³åœ¨è™šæ‹Ÿæœºä¸­å°†å˜é‡å­˜å‚¨åˆ°å†…å­˜å’Œä»å†…å­˜ä¸­å–å‡ºå˜é‡è¿™æ ·çš„åº•å±‚ç»†èŠ‚</strong>ã€‚æ­¤å¤„çš„å˜é‡ï¼ˆVariablesï¼‰ä¸ Java ç¼–ç¨‹ä¸­æ‰€è¯´çš„å˜é‡æœ‰æ‰€åŒºåˆ«ï¼Œå®ƒåŒ…æ‹¬äº†å®ä¾‹å­—æ®µã€é™æ€å­—æ®µå’Œæ„æˆæ•°å€¼å¯¹è±¡çš„å…ƒç´ ï¼Œä½†ä¸åŒ…æ‹¬å±€éƒ¨å˜é‡ä¸æ–¹æ³•å‚æ•°ï¼Œå› ä¸ºåè€…æ˜¯çº¿ç¨‹ç§æœ‰çš„ï¼Œä¸ä¼šè¢«å…±äº«ï¼Œè‡ªç„¶å°±ä¸ä¼šå­˜åœ¨ç«äº‰é—®é¢˜ã€‚ä¸ºäº†è·å¾—è¾ƒå¥½çš„æ‰§è¡Œæ•ˆèƒ½ï¼ŒJMM å¹¶æ²¡æœ‰é™åˆ¶æ‰§è¡Œå¼•æ“ä½¿ç”¨å¤„ç†å™¨çš„ç‰¹å®šå¯„å­˜å™¨æˆ–ç¼“å­˜æ¥å’Œä¸»å­˜è¿›è¡Œäº¤äº’ï¼Œä¹Ÿæ²¡æœ‰é™åˆ¶å³ä½¿ç¼–è¯‘å™¨è¿›è¡Œè°ƒæ•´ä»£ç æ‰§è¡Œé¡ºåºè¿™ç±»ä¼˜åŒ–æªæ–½ã€‚</p>
<p>JMM è§„å®šäº†<strong>æ‰€æœ‰çš„å˜é‡éƒ½å­˜å‚¨åœ¨ä¸»å†…å­˜ï¼ˆMain Memoryï¼‰ä¸­</strong>ã€‚</p>
<p>æ¯æ¡çº¿ç¨‹è¿˜æœ‰è‡ªå·±çš„å·¥ä½œå†…å­˜ï¼ˆWorking Memoryï¼‰ï¼Œ<strong>å·¥ä½œå†…å­˜ä¸­ä¿ç•™äº†è¯¥çº¿ç¨‹ä½¿ç”¨åˆ°çš„å˜é‡çš„ä¸»å†…å­˜çš„å‰¯æœ¬</strong>ã€‚å·¥ä½œå†…å­˜æ˜¯ JMM çš„ä¸€ä¸ªæŠ½è±¡æ¦‚å¿µï¼Œå¹¶ä¸çœŸå®å­˜åœ¨ï¼Œå®ƒæ¶µç›–äº†ç¼“å­˜ï¼Œå†™ç¼“å†²åŒºï¼Œå¯„å­˜å™¨ä»¥åŠå…¶ä»–çš„ç¡¬ä»¶å’Œç¼–è¯‘å™¨ä¼˜åŒ–ã€‚</p>
<p><img src="https://raw.githubusercontent.com/dunwu/images/dev/snap/20210102225839.png" alt="img"></p>
<p>çº¿ç¨‹å¯¹å˜é‡çš„æ‰€æœ‰æ“ä½œéƒ½å¿…é¡»åœ¨å·¥ä½œå†…å­˜ä¸­è¿›è¡Œï¼Œè€Œä¸èƒ½ç›´æ¥è¯»å†™ä¸»å†…å­˜ä¸­çš„å˜é‡ã€‚ä¸åŒçš„çº¿ç¨‹é—´ä¹Ÿæ— æ³•ç›´æ¥è®¿é—®å¯¹æ–¹å·¥ä½œå†…å­˜ä¸­çš„å˜é‡ï¼Œ<strong>çº¿ç¨‹é—´å˜é‡å€¼çš„ä¼ é€’å‡éœ€è¦é€šè¿‡ä¸»å†…å­˜æ¥å®Œæˆ</strong>ã€‚</p>
<p><img src="https://raw.githubusercontent.com/dunwu/images/dev/snap/20210102225657.png" alt="img"></p>
<blockquote>
<p>è¯´æ˜ï¼š</p>
<p>è¿™é‡Œè¯´çš„ä¸»å†…å­˜ã€å·¥ä½œå†…å­˜ä¸ Java å†…å­˜åŒºåŸŸä¸­çš„å †ã€æ ˆã€æ–¹æ³•åŒºç­‰ä¸æ˜¯åŒä¸€ä¸ªå±‚æ¬¡çš„å†…å­˜åˆ’åˆ†ã€‚</p>
</blockquote>
<h3 id="JMM-å†…å­˜æ“ä½œçš„é—®é¢˜"><a href="#JMM-å†…å­˜æ“ä½œçš„é—®é¢˜" class="headerlink" title="JMM å†…å­˜æ“ä½œçš„é—®é¢˜"></a>JMM å†…å­˜æ“ä½œçš„é—®é¢˜</h3><p>ç±»ä¼¼äºç‰©ç†å†…å­˜æ¨¡å‹é¢ä¸´çš„é—®é¢˜ï¼ŒJMM å­˜åœ¨ä»¥ä¸‹ä¸¤ä¸ªé—®é¢˜ï¼š</p>
<ul>
<li><strong>å·¥ä½œå†…å­˜æ•°æ®ä¸€è‡´æ€§</strong> - å„ä¸ªçº¿ç¨‹æ“ä½œæ•°æ®æ—¶ä¼šä¿å­˜ä½¿ç”¨åˆ°çš„ä¸»å†…å­˜ä¸­çš„å…±äº«å˜é‡å‰¯æœ¬ï¼Œå½“å¤šä¸ªçº¿ç¨‹çš„è¿ç®—ä»»åŠ¡éƒ½æ¶‰åŠåŒä¸€ä¸ªå…±äº«å˜é‡æ—¶ï¼Œå°†å¯¼è‡´å„è‡ªçš„çš„å…±äº«å˜é‡å‰¯æœ¬ä¸ä¸€è‡´ã€‚å¦‚æœçœŸçš„å‘ç”Ÿè¿™ç§æƒ…å†µï¼Œæ•°æ®åŒæ­¥å›ä¸»å†…å­˜ä»¥è°çš„å‰¯æœ¬æ•°æ®ä¸ºå‡†ï¼Ÿ Java å†…å­˜æ¨¡å‹ä¸»è¦é€šè¿‡ä¸€ç³»åˆ—çš„æ•°æ®åŒæ­¥åè®®ã€è§„åˆ™æ¥ä¿è¯æ•°æ®çš„ä¸€è‡´æ€§ã€‚</li>
<li><strong>æŒ‡ä»¤é‡æ’åºä¼˜åŒ–</strong> - Java ä¸­é‡æ’åºé€šå¸¸æ˜¯ç¼–è¯‘å™¨æˆ–è¿è¡Œæ—¶ç¯å¢ƒä¸ºäº†ä¼˜åŒ–ç¨‹åºæ€§èƒ½è€Œé‡‡å–çš„å¯¹æŒ‡ä»¤è¿›è¡Œé‡æ–°æ’åºæ‰§è¡Œçš„ä¸€ç§æ‰‹æ®µã€‚é‡æ’åºåˆ†ä¸ºä¸¤ç±»ï¼š<strong>ç¼–è¯‘æœŸé‡æ’åºå’Œè¿è¡ŒæœŸé‡æ’åº</strong>ï¼Œåˆ†åˆ«å¯¹åº”ç¼–è¯‘æ—¶å’Œè¿è¡Œæ—¶ç¯å¢ƒã€‚ åŒæ ·çš„ï¼ŒæŒ‡ä»¤é‡æ’åºä¸æ˜¯éšæ„é‡æ’åºï¼Œå®ƒéœ€è¦æ»¡è¶³ä»¥ä¸‹ä¸¤ä¸ªæ¡ä»¶ï¼š<ul>
<li>åœ¨å•çº¿ç¨‹ç¯å¢ƒä¸‹ä¸èƒ½æ”¹å˜ç¨‹åºè¿è¡Œçš„ç»“æœã€‚å³æ—¶ç¼–è¯‘å™¨ï¼ˆå’Œå¤„ç†å™¨ï¼‰éœ€è¦ä¿è¯ç¨‹åºèƒ½å¤Ÿéµå®ˆ <code>as-if-serial</code> å±æ€§ã€‚é€šä¿—åœ°è¯´ï¼Œå°±æ˜¯åœ¨å•çº¿ç¨‹æƒ…å†µä¸‹ï¼Œè¦ç»™ç¨‹åºä¸€ä¸ªé¡ºåºæ‰§è¡Œçš„å‡è±¡ã€‚å³ç»è¿‡é‡æ’åºçš„æ‰§è¡Œç»“æœè¦ä¸é¡ºåºæ‰§è¡Œçš„ç»“æœä¿æŒä¸€è‡´ã€‚</li>
<li>å­˜åœ¨æ•°æ®ä¾èµ–å…³ç³»çš„ä¸å…è®¸é‡æ’åºã€‚</li>
<li>å¤šçº¿ç¨‹ç¯å¢ƒä¸‹ï¼Œå¦‚æœçº¿ç¨‹å¤„ç†é€»è¾‘ä¹‹é—´å­˜åœ¨ä¾èµ–å…³ç³»ï¼Œæœ‰å¯èƒ½å› ä¸ºæŒ‡ä»¤é‡æ’åºå¯¼è‡´è¿è¡Œç»“æœä¸é¢„æœŸä¸åŒã€‚</li>
</ul>
</li>
</ul>
<h3 id="å†…å­˜é—´äº¤äº’æ“ä½œ"><a href="#å†…å­˜é—´äº¤äº’æ“ä½œ" class="headerlink" title="å†…å­˜é—´äº¤äº’æ“ä½œ"></a>å†…å­˜é—´äº¤äº’æ“ä½œ</h3><p>JMM å®šä¹‰äº† 8 ä¸ªæ“ä½œæ¥å®Œæˆä¸»å†…å­˜å’Œå·¥ä½œå†…å­˜ä¹‹é—´çš„äº¤äº’æ“ä½œã€‚JVM å®ç°æ—¶å¿…é¡»ä¿è¯ä¸‹é¢ä»‹ç»çš„æ¯ç§æ“ä½œéƒ½æ˜¯ <strong>åŸå­çš„</strong>ï¼ˆå¯¹äº double å’Œ long å‹çš„å˜é‡æ¥è¯´ï¼Œloadã€storeã€readã€å’Œ write æ“ä½œåœ¨æŸäº›å¹³å°ä¸Šå…è®¸æœ‰ä¾‹å¤– ï¼‰ã€‚</p>
<ul>
<li><code>lock</code> (é”å®š) - ä½œç”¨äº<strong>ä¸»å†…å­˜</strong>çš„å˜é‡ï¼Œå®ƒæŠŠä¸€ä¸ªå˜é‡æ ‡è¯†ä¸ºä¸€æ¡çº¿ç¨‹ç‹¬å çš„çŠ¶æ€ã€‚</li>
<li><code>unlock</code> (è§£é”) - ä½œç”¨äº<strong>ä¸»å†…å­˜</strong>çš„å˜é‡ï¼Œå®ƒæŠŠä¸€ä¸ªå¤„äºé”å®šçŠ¶æ€çš„å˜é‡é‡Šæ”¾å‡ºæ¥ï¼Œé‡Šæ”¾åçš„å˜é‡æ‰å¯ä»¥è¢«å…¶ä»–çº¿ç¨‹é”å®šã€‚</li>
<li><code>read</code> (è¯»å–) - ä½œç”¨äº<strong>ä¸»å†…å­˜</strong>çš„å˜é‡ï¼Œå®ƒæŠŠä¸€ä¸ªå˜é‡çš„å€¼ä»ä¸»å†…å­˜<strong>ä¼ è¾“</strong>åˆ°çº¿ç¨‹çš„å·¥ä½œå†…å­˜ä¸­ï¼Œä»¥ä¾¿éšåçš„ <code>load</code> åŠ¨ä½œä½¿ç”¨ã€‚</li>
<li><code>write</code> (å†™å…¥) - ä½œç”¨äº<strong>ä¸»å†…å­˜</strong>çš„å˜é‡ï¼Œå®ƒæŠŠ store æ“ä½œä»å·¥ä½œå†…å­˜ä¸­å¾—åˆ°çš„å˜é‡çš„å€¼æ”¾å…¥ä¸»å†…å­˜çš„å˜é‡ä¸­ã€‚</li>
<li><code>load</code> (è½½å…¥) - ä½œç”¨äº<strong>å·¥ä½œå†…å­˜</strong>çš„å˜é‡ï¼Œå®ƒæŠŠ read æ“ä½œä»ä¸»å†…å­˜ä¸­å¾—åˆ°çš„å˜é‡å€¼æ”¾å…¥å·¥ä½œå†…å­˜çš„å˜é‡å‰¯æœ¬ä¸­ã€‚</li>
<li><code>use</code> (ä½¿ç”¨) - ä½œç”¨äº<strong>å·¥ä½œå†…å­˜</strong>çš„å˜é‡ï¼Œå®ƒæŠŠå·¥ä½œå†…å­˜ä¸­ä¸€ä¸ªå˜é‡çš„å€¼ä¼ é€’ç»™æ‰§è¡Œå¼•æ“ï¼Œæ¯å½“è™šæ‹Ÿæœºé‡åˆ°ä¸€ä¸ªéœ€è¦ä½¿ç”¨åˆ°å˜é‡çš„å€¼å¾—å­—èŠ‚ç æŒ‡ä»¤æ—¶å°±ä¼šæ‰§è¡Œè¿™ä¸ªæ“ä½œã€‚</li>
<li><code>assign</code> (èµ‹å€¼) - ä½œç”¨äº<strong>å·¥ä½œå†…å­˜</strong>çš„å˜é‡ï¼Œå®ƒæŠŠä¸€ä¸ªä»æ‰§è¡Œå¼•æ“æ¥æ”¶åˆ°çš„å€¼èµ‹ç»™å·¥ä½œå†…å­˜çš„å˜é‡ï¼Œæ¯å½“è™šæ‹Ÿæœºé‡åˆ°ä¸€ä¸ªç»™å˜é‡èµ‹å€¼çš„å­—èŠ‚ç æŒ‡ä»¤æ—¶æ‰§è¡Œè¿™ä¸ªæ“ä½œã€‚</li>
<li><code>store</code> (å­˜å‚¨) - ä½œç”¨äº<strong>å·¥ä½œå†…å­˜</strong>çš„å˜é‡ï¼Œå®ƒæŠŠå·¥ä½œå†…å­˜ä¸­ä¸€ä¸ªå˜é‡çš„å€¼ä¼ é€åˆ°ä¸»å†…å­˜ä¸­ï¼Œä»¥ä¾¿éšå <code>write</code> æ“ä½œä½¿ç”¨ã€‚</li>
</ul>
<p>å¦‚æœè¦æŠŠä¸€ä¸ªå˜é‡ä»ä¸»å†…å­˜ä¸­å¤åˆ¶åˆ°å·¥ä½œå†…å­˜ï¼Œå°±<strong>éœ€è¦æŒ‰åºæ‰§è¡Œ <code>read</code> å’Œ <code>load</code> æ“ä½œ</strong>ï¼›å¦‚æœæŠŠå˜é‡ä»å·¥ä½œå†…å­˜ä¸­åŒæ­¥å›ä¸»å†…å­˜ä¸­ï¼Œå°±<strong>éœ€è¦æŒ‰åºæ‰§è¡Œ <code>store</code> å’Œ <code>write</code> æ“ä½œ</strong>ã€‚ä½† Java å†…å­˜æ¨¡å‹åªè¦æ±‚ä¸Šè¿°æ“ä½œå¿…é¡»æŒ‰é¡ºåºæ‰§è¡Œï¼Œè€Œæ²¡æœ‰ä¿è¯å¿…é¡»æ˜¯è¿ç»­æ‰§è¡Œã€‚</p>
<p>JMM è¿˜è§„å®šäº†ä¸Šè¿° 8 ç§åŸºæœ¬æ“ä½œï¼Œéœ€è¦æ»¡è¶³ä»¥ä¸‹è§„åˆ™ï¼š</p>
<ul>
<li><strong>read å’Œ load å¿…é¡»æˆå¯¹å‡ºç°</strong>ï¼›<strong>store å’Œ write å¿…é¡»æˆå¯¹å‡ºç°</strong>ã€‚å³ä¸å…è®¸ä¸€ä¸ªå˜é‡ä»ä¸»å†…å­˜è¯»å–äº†ä½†å·¥ä½œå†…å­˜ä¸æ¥å—ï¼Œæˆ–ä»å·¥ä½œå†…å­˜å‘èµ·å›å†™äº†ä½†ä¸»å†…å­˜ä¸æ¥å—çš„æƒ…å†µå‡ºç°ã€‚</li>
<li><strong>ä¸å…è®¸ä¸€ä¸ªçº¿ç¨‹ä¸¢å¼ƒå®ƒçš„æœ€è¿‘ assign çš„æ“ä½œ</strong>ï¼Œå³å˜é‡åœ¨å·¥ä½œå†…å­˜ä¸­æ”¹å˜äº†ä¹‹åå¿…é¡»æŠŠå˜åŒ–åŒæ­¥åˆ°ä¸»å†…å­˜ä¸­ã€‚</li>
<li><strong>ä¸å…è®¸ä¸€ä¸ªçº¿ç¨‹æ— åŸå› çš„ï¼ˆæ²¡æœ‰å‘ç”Ÿè¿‡ä»»ä½• assign æ“ä½œï¼‰æŠŠæ•°æ®ä»å·¥ä½œå†…å­˜åŒæ­¥å›ä¸»å†…å­˜ä¸­</strong>ã€‚</li>
<li>ä¸€ä¸ªæ–°çš„å˜é‡åªèƒ½åœ¨ä¸»å†…å­˜ä¸­è¯ç”Ÿï¼Œä¸å…è®¸åœ¨å·¥ä½œå†…å­˜ä¸­ç›´æ¥ä½¿ç”¨ä¸€ä¸ªæœªè¢«åˆå§‹åŒ–ï¼ˆload æˆ– assign ï¼‰çš„å˜é‡ã€‚æ¢å¥è¯è¯´ï¼Œå°±æ˜¯å¯¹ä¸€ä¸ªå˜é‡å®æ–½ use å’Œ store æ“ä½œä¹‹å‰ï¼Œå¿…é¡»å…ˆæ‰§è¡Œè¿‡äº† load æˆ– assign æ“ä½œã€‚</li>
<li>ä¸€ä¸ªå˜é‡åœ¨åŒä¸€ä¸ªæ—¶åˆ»åªå…è®¸ä¸€æ¡çº¿ç¨‹å¯¹å…¶è¿›è¡Œ lock æ“ä½œï¼Œä½† lock æ“ä½œå¯ä»¥è¢«åŒä¸€æ¡çº¿ç¨‹é‡å¤æ‰§è¡Œå¤šæ¬¡ï¼Œå¤šæ¬¡æ‰§è¡Œ lock åï¼Œåªæœ‰æ‰§è¡Œç›¸åŒæ¬¡æ•°çš„ unlock æ“ä½œï¼Œå˜é‡æ‰ä¼šè¢«è§£é”ã€‚æ‰€ä»¥ <strong>lock å’Œ unlock å¿…é¡»æˆå¯¹å‡ºç°</strong>ã€‚</li>
<li>å¦‚æœå¯¹ä¸€ä¸ªå˜é‡æ‰§è¡Œ lock æ“ä½œï¼Œå°†ä¼šæ¸…ç©ºå·¥ä½œå†…å­˜ä¸­æ­¤å˜é‡çš„å€¼ï¼Œåœ¨æ‰§è¡Œå¼•æ“ä½¿ç”¨è¿™ä¸ªå˜é‡å‰ï¼Œéœ€è¦é‡æ–°æ‰§è¡Œ load æˆ– assign æ“ä½œåˆå§‹åŒ–å˜é‡çš„å€¼ã€‚</li>
<li>å¦‚æœä¸€ä¸ªå˜é‡äº‹å…ˆæ²¡æœ‰è¢« lock æ“ä½œé”å®šï¼Œåˆ™ä¸å…è®¸å¯¹å®ƒæ‰§è¡Œ unlock æ“ä½œï¼Œä¹Ÿä¸å…è®¸å» unlock ä¸€ä¸ªè¢«å…¶ä»–çº¿ç¨‹é”å®šçš„å˜é‡ã€‚</li>
<li>å¯¹ä¸€ä¸ªå˜é‡æ‰§è¡Œ unlock æ“ä½œä¹‹å‰ï¼Œå¿…é¡»å…ˆæŠŠæ­¤å˜é‡åŒæ­¥åˆ°ä¸»å†…å­˜ä¸­ï¼ˆæ‰§è¡Œ store å’Œ write æ“ä½œï¼‰</li>
</ul>
<p><img src="https://raw.githubusercontent.com/dunwu/images/dev/snap/20210102230708.png" alt="img"></p>
<h3 id="å¹¶å‘å®‰å…¨ç‰¹æ€§"><a href="#å¹¶å‘å®‰å…¨ç‰¹æ€§" class="headerlink" title="å¹¶å‘å®‰å…¨ç‰¹æ€§"></a>å¹¶å‘å®‰å…¨ç‰¹æ€§</h3><p>ä¸Šæ–‡ä»‹ç»äº† Java å†…å­˜äº¤äº’çš„ 8 ç§åŸºæœ¬æ“ä½œï¼Œå®ƒä»¬éµå¾ª Java å†…å­˜ä¸‰å¤§ç‰¹æ€§ï¼šåŸå­æ€§ã€å¯è§æ€§ã€æœ‰åºæ€§ã€‚</p>
<p>è€Œè¿™ä¸‰å¤§ç‰¹æ€§ï¼Œå½’æ ¹ç»“åº•ï¼Œæ˜¯ä¸ºäº†å®ç°å¤šçº¿ç¨‹çš„ <strong>æ•°æ®ä¸€è‡´æ€§</strong>ï¼Œä½¿å¾—ç¨‹åºåœ¨å¤šçº¿ç¨‹å¹¶å‘ï¼ŒæŒ‡ä»¤é‡æ’åºä¼˜åŒ–çš„ç¯å¢ƒä¸­èƒ½å¦‚é¢„æœŸè¿è¡Œã€‚</p>
<h4 id="åŸå­æ€§"><a href="#åŸå­æ€§" class="headerlink" title="åŸå­æ€§"></a>åŸå­æ€§</h4><p><strong>åŸå­æ€§å³ä¸€ä¸ªæ“ä½œæˆ–è€…å¤šä¸ªæ“ä½œï¼Œè¦ä¹ˆå…¨éƒ¨æ‰§è¡Œï¼ˆæ‰§è¡Œçš„è¿‡ç¨‹ä¸ä¼šè¢«ä»»ä½•å› ç´ æ‰“æ–­ï¼‰ï¼Œè¦ä¹ˆå°±éƒ½ä¸æ‰§è¡Œ</strong>ã€‚å³ä½¿åœ¨å¤šä¸ªçº¿ç¨‹ä¸€èµ·æ‰§è¡Œçš„æ—¶å€™ï¼Œä¸€ä¸ªæ“ä½œä¸€æ—¦å¼€å§‹ï¼Œå°±ä¸ä¼šè¢«å…¶ä»–çº¿ç¨‹æ‰€å¹²æ‰°ã€‚</p>
<p>åœ¨ Java ä¸­ï¼Œä¸ºäº†ä¿è¯åŸå­æ€§ï¼Œæä¾›äº†ä¸¤ä¸ªé«˜çº§çš„å­—èŠ‚ç æŒ‡ä»¤ <code>monitorenter</code> å’Œ <code>monitorexit</code>ã€‚è¿™ä¸¤ä¸ªå­—èŠ‚ç ï¼Œåœ¨ Java ä¸­å¯¹åº”çš„å…³é”®å­—å°±æ˜¯ <code>synchronized</code>ã€‚</p>
<p>å› æ­¤ï¼Œåœ¨ Java ä¸­å¯ä»¥ä½¿ç”¨ <code>synchronized</code> æ¥ä¿è¯æ–¹æ³•å’Œä»£ç å—å†…çš„æ“ä½œæ˜¯åŸå­æ€§çš„ã€‚</p>
<h4 id="å¯è§æ€§"><a href="#å¯è§æ€§" class="headerlink" title="å¯è§æ€§"></a>å¯è§æ€§</h4><p><strong>å¯è§æ€§æ˜¯æŒ‡å½“å¤šä¸ªçº¿ç¨‹è®¿é—®åŒä¸€ä¸ªå˜é‡æ—¶ï¼Œä¸€ä¸ªçº¿ç¨‹ä¿®æ”¹äº†è¿™ä¸ªå˜é‡çš„å€¼ï¼Œå…¶ä»–çº¿ç¨‹èƒ½å¤Ÿç«‹å³çœ‹å¾—åˆ°ä¿®æ”¹çš„å€¼</strong>ã€‚</p>
<p>JMM æ˜¯é€šè¿‡ <strong>â€œå˜é‡ä¿®æ”¹åå°†æ–°å€¼åŒæ­¥å›ä¸»å†…å­˜</strong>ï¼Œ <strong>å˜é‡è¯»å–å‰ä»ä¸»å†…å­˜åˆ·æ–°å˜é‡å€¼â€</strong> è¿™ç§ä¾èµ–ä¸»å†…å­˜ä½œä¸ºä¼ é€’åª’ä»‹çš„æ–¹å¼æ¥å®ç°çš„ã€‚</p>
<p>Java å®ç°å¤šçº¿ç¨‹å¯è§æ€§çš„æ–¹å¼æœ‰ï¼š</p>
<ul>
<li><code>volatile</code></li>
<li><code>synchronized</code></li>
<li><code>final</code></li>
</ul>
<h4 id="æœ‰åºæ€§"><a href="#æœ‰åºæ€§" class="headerlink" title="æœ‰åºæ€§"></a>æœ‰åºæ€§</h4><p>æœ‰åºæ€§è§„åˆ™è¡¨ç°åœ¨ä»¥ä¸‹ä¸¤ç§åœºæ™¯: çº¿ç¨‹å†…å’Œçº¿ç¨‹é—´</p>
<ul>
<li>çº¿ç¨‹å†… - ä»æŸä¸ªçº¿ç¨‹çš„è§’åº¦çœ‹æ–¹æ³•çš„æ‰§è¡Œï¼ŒæŒ‡ä»¤ä¼šæŒ‰ç…§ä¸€ç§å«â€œä¸²è¡Œâ€ï¼ˆ<code>as-if-serial</code>ï¼‰çš„æ–¹å¼æ‰§è¡Œï¼Œæ­¤ç§æ–¹å¼å·²ç»åº”ç”¨äºé¡ºåºç¼–ç¨‹è¯­è¨€ã€‚</li>
<li>çº¿ç¨‹é—´ - è¿™ä¸ªçº¿ç¨‹â€œè§‚å¯Ÿâ€åˆ°å…¶ä»–çº¿ç¨‹å¹¶å‘åœ°æ‰§è¡ŒéåŒæ­¥çš„ä»£ç æ—¶ï¼Œç”±äºæŒ‡ä»¤é‡æ’åºä¼˜åŒ–ï¼Œä»»ä½•ä»£ç éƒ½æœ‰å¯èƒ½äº¤å‰æ‰§è¡Œã€‚å”¯ä¸€èµ·ä½œç”¨çš„çº¦æŸæ˜¯ï¼šå¯¹äºåŒæ­¥æ–¹æ³•ï¼ŒåŒæ­¥å—ï¼ˆ<code>synchronized</code> å…³é”®å­—ä¿®é¥°ï¼‰ä»¥åŠ <code>volatile</code> å­—æ®µçš„æ“ä½œä»ç»´æŒç›¸å¯¹æœ‰åºã€‚</li>
</ul>
<p>åœ¨ Java ä¸­ï¼Œå¯ä»¥ä½¿ç”¨ <code>synchronized</code> å’Œ <code>volatile</code> æ¥ä¿è¯å¤šçº¿ç¨‹ä¹‹é—´æ“ä½œçš„æœ‰åºæ€§ã€‚å®ç°æ–¹å¼æœ‰æ‰€åŒºåˆ«ï¼š</p>
<ul>
<li><code>volatile</code> å…³é”®å­—ä¼šç¦æ­¢æŒ‡ä»¤é‡æ’åºã€‚</li>
<li><code>synchronized</code> å…³é”®å­—é€šè¿‡äº’æ–¥ä¿è¯åŒä¸€æ—¶åˆ»åªå…è®¸ä¸€æ¡çº¿ç¨‹æ“ä½œã€‚</li>
</ul>
<h2 id="Happens-Before"><a href="#Happens-Before" class="headerlink" title="Happens-Before"></a>Happens-Before</h2><p>JMM ä¸ºç¨‹åºä¸­æ‰€æœ‰çš„æ“ä½œå®šä¹‰äº†ä¸€ä¸ªååºå…³ç³»ï¼Œç§°ä¹‹ä¸º **<code>å…ˆè¡Œå‘ç”ŸåŸåˆ™ï¼ˆHappens-Beforeï¼‰</code>**ã€‚</p>
<p><strong>Happens-Before</strong> æ˜¯æŒ‡ <strong>å‰é¢ä¸€ä¸ªæ“ä½œçš„ç»“æœå¯¹åç»­æ“ä½œæ˜¯å¯è§çš„</strong>ã€‚</p>
<p><strong>Happens-Before</strong> éå¸¸é‡è¦ï¼Œå®ƒæ˜¯åˆ¤æ–­æ•°æ®æ˜¯å¦å­˜åœ¨ç«äº‰ã€çº¿ç¨‹æ˜¯å¦å®‰å…¨çš„ä¸»è¦ä¾æ®ï¼Œä¾é è¿™ä¸ªåŸåˆ™ï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡å‡ æ¡è§„åˆ™ä¸€æ½å­åœ°è§£å†³å¹¶å‘ç¯å¢ƒä¸‹ä¸¤ä¸ªæ“ä½œé—´æ˜¯å¦å¯èƒ½å­˜åœ¨å†²çªçš„æ‰€æœ‰é—®é¢˜ã€‚</p>
<ul>
<li><strong>ç¨‹åºæ¬¡åºè§„åˆ™</strong> - ä¸€ä¸ªçº¿ç¨‹å†…ï¼ŒæŒ‰ç…§ä»£ç é¡ºåºï¼Œä¹¦å†™åœ¨å‰é¢çš„æ“ä½œå…ˆè¡Œå‘ç”Ÿäºä¹¦å†™åœ¨åé¢çš„æ“ä½œã€‚</li>
<li><strong>é”å®šè§„åˆ™</strong> - ä¸€ä¸ª <code>unLock</code> æ“ä½œå…ˆè¡Œå‘ç”Ÿäºåé¢å¯¹åŒä¸€ä¸ªé”çš„ <code>lock</code> æ“ä½œã€‚</li>
<li><strong>volatile å˜é‡è§„åˆ™</strong> - å¯¹ä¸€ä¸ª <code>volatile</code> å˜é‡çš„å†™æ“ä½œå…ˆè¡Œå‘ç”Ÿäºåé¢å¯¹è¿™ä¸ªå˜é‡çš„è¯»æ“ä½œã€‚</li>
<li><strong>çº¿ç¨‹å¯åŠ¨è§„åˆ™</strong> - <code>Thread</code> å¯¹è±¡çš„ <code>start()</code> æ–¹æ³•å…ˆè¡Œå‘ç”Ÿäºæ­¤çº¿ç¨‹çš„æ¯ä¸ªä¸€ä¸ªåŠ¨ä½œã€‚</li>
<li><strong>çº¿ç¨‹ç»ˆæ­¢è§„åˆ™</strong> - çº¿ç¨‹ä¸­æ‰€æœ‰çš„æ“ä½œéƒ½å…ˆè¡Œå‘ç”Ÿäºçº¿ç¨‹çš„ç»ˆæ­¢æ£€æµ‹ï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡ <code>Thread.join()</code> æ–¹æ³•ç»“æŸã€<code>Thread.isAlive()</code> çš„è¿”å›å€¼æ‰‹æ®µæ£€æµ‹åˆ°çº¿ç¨‹å·²ç»ç»ˆæ­¢æ‰§è¡Œã€‚</li>
<li><strong>çº¿ç¨‹ä¸­æ–­è§„åˆ™</strong> - å¯¹çº¿ç¨‹ <code>interrupt()</code> æ–¹æ³•çš„è°ƒç”¨å…ˆè¡Œå‘ç”Ÿäºè¢«ä¸­æ–­çº¿ç¨‹çš„ä»£ç æ£€æµ‹åˆ°ä¸­æ–­äº‹ä»¶çš„å‘ç”Ÿï¼Œå¯ä»¥é€šè¿‡ <code>Thread.interrupted()</code> æ–¹æ³•æ£€æµ‹åˆ°æ˜¯å¦æœ‰ä¸­æ–­å‘ç”Ÿã€‚</li>
<li><strong>å¯¹è±¡ç»ˆç»“è§„åˆ™</strong> - ä¸€ä¸ªå¯¹è±¡çš„åˆå§‹åŒ–å®Œæˆå…ˆè¡Œå‘ç”Ÿäºå®ƒçš„ <code>finalize()</code> æ–¹æ³•çš„å¼€å§‹ã€‚</li>
<li><strong>ä¼ é€’æ€§</strong> - å¦‚æœæ“ä½œ A å…ˆè¡Œå‘ç”Ÿäº æ“ä½œ Bï¼Œè€Œæ“ä½œ B åˆ å…ˆè¡Œå‘ç”Ÿäº æ“ä½œ Cï¼Œåˆ™å¯ä»¥å¾—å‡ºæ“ä½œ A å…ˆè¡Œå‘ç”Ÿäº æ“ä½œ Cã€‚</li>
</ul>
<h2 id="å†…å­˜å±éšœ"><a href="#å†…å­˜å±éšœ" class="headerlink" title="å†…å­˜å±éšœ"></a>å†…å­˜å±éšœ</h2><p>Java ä¸­å¦‚ä½•ä¿è¯åº•å±‚æ“ä½œçš„æœ‰åºæ€§å’Œå¯è§æ€§ï¼Ÿå¯ä»¥é€šè¿‡å†…å­˜å±éšœï¼ˆmemory barrierï¼‰ã€‚</p>
<p>å†…å­˜å±éšœæ˜¯è¢«æ’å…¥ä¸¤ä¸ª CPU æŒ‡ä»¤ä¹‹é—´çš„ä¸€ç§æŒ‡ä»¤ï¼Œç”¨æ¥ç¦æ­¢å¤„ç†å™¨æŒ‡ä»¤å‘ç”Ÿé‡æ’åºï¼ˆåƒå±éšœä¸€æ ·ï¼‰ï¼Œä»è€Œä¿éšœ<strong>æœ‰åºæ€§</strong>çš„ã€‚å¦å¤–ï¼Œä¸ºäº†è¾¾åˆ°å±éšœçš„æ•ˆæœï¼Œå®ƒä¹Ÿä¼šä½¿å¤„ç†å™¨å†™å…¥ã€è¯»å–å€¼ä¹‹å‰ï¼Œå°†ä¸»å†…å­˜çš„å€¼å†™å…¥é«˜é€Ÿç¼“å­˜ï¼Œæ¸…ç©ºæ— æ•ˆé˜Ÿåˆ—ï¼Œä»è€Œä¿éšœ<strong>å¯è§æ€§</strong>ã€‚</p>
<p>ä¸¾ä¸ªä¾‹å­ï¼š</p>
<figure class="highlight abnf"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">Store1<span class="comment">;</span></span><br><span class="line">Store2<span class="comment">;</span></span><br><span class="line">Load1<span class="comment">;</span></span><br><span class="line">StoreLoad<span class="comment">;  //å†…å­˜å±éšœ</span></span><br><span class="line">Store3<span class="comment">;</span></span><br><span class="line">Load2<span class="comment">;</span></span><br><span class="line">Load3<span class="comment">;</span></span><br><span class="line">å¤åˆ¶ä»£ç </span><br></pre></td></tr></table></figure>

<p>å¯¹äºä¸Šé¢çš„ä¸€ç»„ CPU æŒ‡ä»¤ï¼ˆStore è¡¨ç¤ºå†™å…¥æŒ‡ä»¤ï¼ŒLoad è¡¨ç¤ºè¯»å–æŒ‡ä»¤ï¼‰ï¼ŒStoreLoad å±éšœä¹‹å‰çš„ Store æŒ‡ä»¤æ— æ³•ä¸ StoreLoad å±éšœä¹‹åçš„ Load æŒ‡ä»¤è¿›è¡Œäº¤æ¢ä½ç½®ï¼Œå³<strong>é‡æ’åº</strong>ã€‚ä½†æ˜¯ StoreLoad å±éšœä¹‹å‰å’Œä¹‹åçš„æŒ‡ä»¤æ˜¯å¯ä»¥äº’æ¢ä½ç½®çš„ï¼Œå³ Store1 å¯ä»¥å’Œ Store2 äº’æ¢ï¼ŒLoad2 å¯ä»¥å’Œ Load3 äº’æ¢ã€‚</p>
<p>å¸¸è§æœ‰ 4 ç§å±éšœ</p>
<ul>
<li><code>LoadLoad</code> å±éšœ - å¯¹äºè¿™æ ·çš„è¯­å¥ <code>Load1; LoadLoad; Load2</code>ï¼Œåœ¨ Load2 åŠåç»­è¯»å–æ“ä½œè¦è¯»å–çš„æ•°æ®è¢«è®¿é—®å‰ï¼Œä¿è¯ Load1 è¦è¯»å–çš„æ•°æ®è¢«è¯»å–å®Œæ¯•ã€‚</li>
<li><code>StoreStore</code> å±éšœ - å¯¹äºè¿™æ ·çš„è¯­å¥ <code>Store1; StoreStore; Store2</code>ï¼Œåœ¨ Store2 åŠåç»­å†™å…¥æ“ä½œæ‰§è¡Œå‰ï¼Œä¿è¯ Store1 çš„å†™å…¥æ“ä½œå¯¹å…¶å®ƒå¤„ç†å™¨å¯è§ã€‚</li>
<li><code>LoadStore</code> å±éšœ - å¯¹äºè¿™æ ·çš„è¯­å¥ <code>Load1; LoadStore; Store2</code>ï¼Œåœ¨ Store2 åŠåç»­å†™å…¥æ“ä½œè¢«æ‰§è¡Œå‰ï¼Œä¿è¯ Load1 è¦è¯»å–çš„æ•°æ®è¢«è¯»å–å®Œæ¯•ã€‚</li>
<li><code>StoreLoad</code> å±éšœ - å¯¹äºè¿™æ ·çš„è¯­å¥ <code>Store1; StoreLoad; Load2</code>ï¼Œåœ¨ Load2 åŠåç»­æ‰€æœ‰è¯»å–æ“ä½œæ‰§è¡Œå‰ï¼Œä¿è¯ Store1 çš„å†™å…¥å¯¹æ‰€æœ‰å¤„ç†å™¨å¯è§ã€‚å®ƒçš„å¼€é”€æ˜¯å››ç§å±éšœä¸­æœ€å¤§çš„ï¼ˆå†²åˆ·å†™ç¼“å†²å™¨ï¼Œæ¸…ç©ºæ— æ•ˆåŒ–é˜Ÿåˆ—ï¼‰ã€‚åœ¨å¤§å¤šæ•°å¤„ç†å™¨çš„å®ç°ä¸­ï¼Œè¿™ä¸ªå±éšœæ˜¯ä¸ªä¸‡èƒ½å±éšœï¼Œå…¼å…·å…¶å®ƒä¸‰ç§å†…å­˜å±éšœçš„åŠŸèƒ½ã€‚</li>
</ul>
<p>Java ä¸­å¯¹å†…å­˜å±éšœçš„ä½¿ç”¨åœ¨ä¸€èˆ¬çš„ä»£ç ä¸­ä¸å¤ªå®¹æ˜“è§åˆ°ï¼Œå¸¸è§çš„æœ‰ <code>volatile</code> å’Œ <code>synchronized</code> å…³é”®å­—ä¿®é¥°çš„ä»£ç å—(åé¢å†å±•å¼€ä»‹ç»)ï¼Œè¿˜å¯ä»¥é€šè¿‡ <code>Unsafe</code> è¿™ä¸ªç±»æ¥ä½¿ç”¨å†…å­˜å±éšœã€‚</p>
<h2 id="volatile"><a href="#volatile" class="headerlink" title="volatile"></a>volatile</h2><p><code>volatile</code> æ˜¯ JVM æä¾›çš„ <strong>æœ€è½»é‡çº§çš„åŒæ­¥æœºåˆ¶</strong>ã€‚</p>
<p><code>volatile</code> çš„ä¸­æ–‡æ„æ€æ˜¯ä¸ç¨³å®šçš„ï¼Œæ˜“å˜çš„ï¼Œç”¨ <code>volatile</code> ä¿®é¥°å˜é‡æ˜¯ä¸ºäº†ä¿è¯å˜é‡åœ¨å¤šçº¿ç¨‹ä¸­çš„å¯è§æ€§ã€‚</p>
<h4 id="volatile-å˜é‡çš„ç‰¹æ€§"><a href="#volatile-å˜é‡çš„ç‰¹æ€§" class="headerlink" title="volatile å˜é‡çš„ç‰¹æ€§"></a>volatile å˜é‡çš„ç‰¹æ€§</h4><p><code>volatile</code> å˜é‡å…·æœ‰ä¸¤ç§ç‰¹æ€§ï¼š</p>
<ul>
<li>ä¿è¯å˜é‡å¯¹æ‰€æœ‰çº¿ç¨‹çš„å¯è§æ€§ã€‚</li>
<li>ç¦æ­¢è¿›è¡ŒæŒ‡ä»¤é‡æ’åº</li>
</ul>
<h5 id="ä¿è¯å˜é‡å¯¹æ‰€æœ‰çº¿ç¨‹çš„å¯è§æ€§"><a href="#ä¿è¯å˜é‡å¯¹æ‰€æœ‰çº¿ç¨‹çš„å¯è§æ€§" class="headerlink" title="ä¿è¯å˜é‡å¯¹æ‰€æœ‰çº¿ç¨‹çš„å¯è§æ€§"></a>ä¿è¯å˜é‡å¯¹æ‰€æœ‰çº¿ç¨‹çš„å¯è§æ€§</h5><p>è¿™é‡Œçš„å¯è§æ€§æ˜¯æŒ‡å½“ä¸€æ¡çº¿ç¨‹ä¿®æ”¹äº† volatile å˜é‡çš„å€¼ï¼Œæ–°å€¼å¯¹äºå…¶ä»–çº¿ç¨‹æ¥è¯´æ˜¯å¯ä»¥ç«‹å³å¾—çŸ¥çš„ã€‚è€Œæ™®é€šå˜é‡ä¸èƒ½åšåˆ°è¿™ä¸€ç‚¹ï¼Œæ™®é€šå˜é‡çš„å€¼åœ¨çº¿ç¨‹é—´ä¼ é€’å‡éœ€è¦é€šè¿‡ä¸»å†…å­˜æ¥å®Œæˆã€‚</p>
<p><strong>çº¿ç¨‹å†™ volatile å˜é‡çš„è¿‡ç¨‹ï¼š</strong></p>
<ol>
<li>æ”¹å˜çº¿ç¨‹å·¥ä½œå†…å­˜ä¸­ volatile å˜é‡å‰¯æœ¬çš„å€¼</li>
<li>å°†æ”¹å˜åçš„å‰¯æœ¬çš„å€¼ä»å·¥ä½œå†…å­˜åˆ·æ–°åˆ°ä¸»å†…å­˜</li>
</ol>
<p><strong>çº¿ç¨‹è¯» volatile å˜é‡çš„è¿‡ç¨‹ï¼š</strong></p>
<ol>
<li>ä»ä¸»å†…å­˜ä¸­è¯»å– volatile å˜é‡çš„æœ€æ–°å€¼åˆ°çº¿ç¨‹çš„å·¥ä½œå†…å­˜ä¸­</li>
<li>ä»å·¥ä½œå†…å­˜ä¸­è¯»å– volatile å˜é‡çš„å‰¯æœ¬</li>
</ol>
<blockquote>
<p>æ³¨æ„ï¼š<strong>ä¿è¯å¯è§æ€§ä¸ç­‰åŒäº volatile å˜é‡ä¿è¯å¹¶å‘æ“ä½œçš„å®‰å…¨æ€§</strong></p>
<p>åœ¨ä¸ç¬¦åˆä»¥ä¸‹ä¸¤ç‚¹çš„åœºæ™¯ä¸­ï¼Œä»ç„¶è¦é€šè¿‡æ·é”æ¥ä¿è¯åŸå­æ€§ï¼š</p>
<ul>
<li>è¿ç®—ç»“æœå¹¶ä¸ä¾èµ–å˜é‡çš„å½“å‰å€¼ï¼Œæˆ–è€…èƒ½å¤Ÿç¡®ä¿åªæœ‰å•ä¸€çš„çº¿ç¨‹ä¿®æ”¹å˜é‡çš„å€¼ã€‚</li>
<li>å˜é‡ä¸éœ€è¦ä¸å…¶ä»–çŠ¶æ€å˜é‡å…±åŒå‚ä¸ä¸å˜çº¦æŸã€‚</li>
</ul>
</blockquote>
<p>ä½†æ˜¯å¦‚æœå¤šä¸ªçº¿ç¨‹åŒæ—¶æŠŠæ›´æ–°åçš„å˜é‡å€¼åŒæ—¶åˆ·æ–°å›ä¸»å†…å­˜ï¼Œå¯èƒ½å¯¼è‡´å¾—åˆ°çš„å€¼ä¸æ˜¯é¢„æœŸç»“æœï¼š</p>
<p>ä¸¾ä¸ªä¾‹å­ï¼š å®šä¹‰ <code>volatile int count = 0</code>ï¼Œ2 ä¸ªçº¿ç¨‹åŒæ—¶æ‰§è¡Œ count++ æ“ä½œï¼Œæ¯ä¸ªçº¿ç¨‹éƒ½æ‰§è¡Œ 500 æ¬¡ï¼Œæœ€ç»ˆç»“æœå°äº 1000ï¼ŒåŸå› æ˜¯æ¯ä¸ªçº¿ç¨‹æ‰§è¡Œ count++ éœ€è¦ä»¥ä¸‹ 3 ä¸ªæ­¥éª¤ï¼š</p>
<ol>
<li>çº¿ç¨‹ä»ä¸»å†…å­˜è¯»å–æœ€æ–°çš„ count çš„å€¼</li>
<li>æ‰§è¡Œå¼•æ“æŠŠ count å€¼åŠ  1ï¼Œå¹¶èµ‹å€¼ç»™çº¿ç¨‹å·¥ä½œå†…å­˜</li>
<li>çº¿ç¨‹å·¥ä½œå†…å­˜æŠŠ count å€¼ä¿å­˜åˆ°ä¸»å†…å­˜ æœ‰å¯èƒ½æŸä¸€æ—¶åˆ» 2 ä¸ªçº¿ç¨‹åœ¨æ­¥éª¤ 1 è¯»å–åˆ°çš„å€¼éƒ½æ˜¯ 100ï¼Œæ‰§è¡Œå®Œæ­¥éª¤ 2 å¾—åˆ°çš„å€¼éƒ½æ˜¯ 101ï¼Œæœ€ååˆ·æ–°äº† 2 æ¬¡ 101 ä¿å­˜åˆ°ä¸»å†…å­˜ã€‚</li>
</ol>
<h5 id="è¯­ä¹‰-2-ç¦æ­¢è¿›è¡ŒæŒ‡ä»¤é‡æ’åº"><a href="#è¯­ä¹‰-2-ç¦æ­¢è¿›è¡ŒæŒ‡ä»¤é‡æ’åº" class="headerlink" title="è¯­ä¹‰ 2 ç¦æ­¢è¿›è¡ŒæŒ‡ä»¤é‡æ’åº"></a>è¯­ä¹‰ 2 ç¦æ­¢è¿›è¡ŒæŒ‡ä»¤é‡æ’åº</h5><p>å…·ä½“ä¸€ç‚¹è§£é‡Šï¼Œç¦æ­¢é‡æ’åºçš„è§„åˆ™å¦‚ä¸‹ï¼š</p>
<ul>
<li>å½“ç¨‹åºæ‰§è¡Œåˆ° <code>volatile</code> å˜é‡çš„è¯»æ“ä½œæˆ–è€…å†™æ“ä½œæ—¶ï¼Œåœ¨å…¶å‰é¢çš„æ“ä½œçš„æ›´æ”¹è‚¯å®šå…¨éƒ¨å·²ç»è¿›è¡Œï¼Œä¸”ç»“æœå·²ç»å¯¹åé¢çš„æ“ä½œå¯è§ï¼›åœ¨å…¶åé¢çš„æ“ä½œè‚¯å®šè¿˜æ²¡æœ‰è¿›è¡Œï¼›</li>
<li>åœ¨è¿›è¡ŒæŒ‡ä»¤ä¼˜åŒ–æ—¶ï¼Œä¸èƒ½å°†åœ¨å¯¹ <code>volatile</code> å˜é‡è®¿é—®çš„è¯­å¥æ”¾åœ¨å…¶åé¢æ‰§è¡Œï¼Œä¹Ÿä¸èƒ½æŠŠ <code>volatile</code> å˜é‡åé¢çš„è¯­å¥æ”¾åˆ°å…¶å‰é¢æ‰§è¡Œã€‚</li>
</ul>
<p>æ™®é€šçš„å˜é‡ä»…ä»…ä¼šä¿è¯è¯¥æ–¹æ³•çš„æ‰§è¡Œè¿‡ç¨‹ä¸­æ‰€æœ‰ä¾èµ–èµ‹å€¼ç»“æœçš„åœ°æ–¹éƒ½èƒ½è·å–åˆ°æ­£ç¡®çš„ç»“æœï¼Œè€Œä¸èƒ½ä¿è¯èµ‹å€¼æ“ä½œçš„é¡ºåºä¸ç¨‹åºä»£ç ä¸­çš„æ‰§è¡Œé¡ºåºä¸€è‡´ã€‚</p>
<p>ä¸¾ä¸ªä¾‹å­ï¼š</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">volatile</span> <span class="type">boolean</span> <span class="variable">initialized</span> <span class="operator">=</span> <span class="literal">false</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// ä¸‹é¢ä»£ç çº¿ç¨‹Aä¸­æ‰§è¡Œ</span></span><br><span class="line"><span class="comment">// è¯»å–é…ç½®ä¿¡æ¯ï¼Œå½“è¯»å–å®Œæˆåå°†initializedè®¾ç½®ä¸ºtrueä»¥é€šçŸ¥å…¶ä»–çº¿ç¨‹é…ç½®å¯ç”¨</span></span><br><span class="line">doSomethingReadConfg();</span><br><span class="line">initialized = <span class="literal">true</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// ä¸‹é¢ä»£ç çº¿ç¨‹Bä¸­æ‰§è¡Œ</span></span><br><span class="line"><span class="comment">// ç­‰å¾…initialized ä¸ºtrueï¼Œä»£è¡¨çº¿ç¨‹Aå·²ç»æŠŠé…ç½®ä¿¡æ¯åˆå§‹åŒ–å®Œæˆ</span></span><br><span class="line"><span class="keyword">while</span> (!initialized) &#123;</span><br><span class="line">     sleep();</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// ä½¿ç”¨çº¿ç¨‹Aåˆå§‹åŒ–å¥½çš„é…ç½®ä¿¡æ¯</span></span><br><span class="line">doSomethingWithConfig();</span><br><span class="line">å¤åˆ¶ä»£ç </span><br></pre></td></tr></table></figure>

<p>ä¸Šé¢ä»£ç ä¸­å¦‚æœå®šä¹‰ initialized å˜é‡æ—¶æ²¡æœ‰ä½¿ç”¨ volatile ä¿®é¥°ï¼Œå°±æœ‰å¯èƒ½ä¼šç”±äºæŒ‡ä»¤é‡æ’åºçš„ä¼˜åŒ–ï¼Œå¯¼è‡´çº¿ç¨‹ A ä¸­æœ€åä¸€å¥ä»£ç  â€œinitialized &#x3D; trueâ€ åœ¨ â€œdoSomethingReadConfg()â€ ä¹‹å‰è¢«æ‰§è¡Œï¼Œè¿™æ ·ä¼šå¯¼è‡´çº¿ç¨‹ B ä¸­ä½¿ç”¨é…ç½®ä¿¡æ¯çš„ä»£ç å°±å¯èƒ½å‡ºç°é”™è¯¯ï¼Œè€Œ volatile å…³é”®å­—å°±ç¦æ­¢é‡æ’åºçš„è¯­ä¹‰å¯ä»¥é¿å…æ­¤ç±»æƒ…å†µå‘ç”Ÿã€‚</p>
<h4 id="volatile-çš„åŸç†"><a href="#volatile-çš„åŸç†" class="headerlink" title="volatile çš„åŸç†"></a>volatile çš„åŸç†</h4><p>å…·ä½“å®ç°æ–¹å¼æ˜¯åœ¨ç¼–è¯‘æœŸç”Ÿæˆå­—èŠ‚ç æ—¶ï¼Œä¼šåœ¨æŒ‡ä»¤åºåˆ—ä¸­å¢åŠ å†…å­˜å±éšœæ¥ä¿è¯ï¼Œä¸‹é¢æ˜¯åŸºäºä¿å®ˆç­–ç•¥çš„ JMM å†…å­˜å±éšœæ’å…¥ç­–ç•¥ï¼š</p>
<ul>
<li>åœ¨æ¯ä¸ª volatile å†™æ“ä½œçš„å‰é¢æ’å…¥ä¸€ä¸ª StoreStore å±éšœã€‚ è¯¥å±éšœé™¤äº†ä¿è¯äº†å±éšœä¹‹å‰çš„å†™æ“ä½œå’Œè¯¥å±éšœä¹‹åçš„å†™æ“ä½œä¸èƒ½é‡æ’åºï¼Œè¿˜ä¼šä¿è¯äº† volatile å†™æ“ä½œä¹‹å‰ï¼Œä»»ä½•çš„è¯»å†™æ“ä½œéƒ½ä¼šå…ˆäº volatile è¢«æäº¤ã€‚</li>
<li>åœ¨æ¯ä¸ª volatile å†™æ“ä½œçš„åé¢æ’å…¥ä¸€ä¸ª StoreLoad å±éšœã€‚ è¯¥å±éšœé™¤äº†ä½¿ volatile å†™æ“ä½œä¸ä¼šä¸ä¹‹åçš„è¯»æ“ä½œé‡æ’åºå¤–ï¼Œè¿˜ä¼šåˆ·æ–°å¤„ç†å™¨ç¼“å­˜ï¼Œä½¿ volatile å˜é‡çš„å†™æ›´æ–°å¯¹å…¶ä»–çº¿ç¨‹å¯è§ã€‚</li>
<li>åœ¨æ¯ä¸ª volatile è¯»æ“ä½œçš„åé¢æ’å…¥ä¸€ä¸ª LoadLoad å±éšœã€‚ è¯¥å±éšœé™¤äº†ä½¿ volatile è¯»æ“ä½œä¸ä¼šä¸ä¹‹å‰çš„å†™æ“ä½œå‘ç”Ÿé‡æ’åºå¤–ï¼Œè¿˜ä¼šåˆ·æ–°å¤„ç†å™¨ç¼“å­˜ï¼Œä½¿ volatile å˜é‡è¯»å–çš„ä¸ºæœ€æ–°å€¼ã€‚</li>
<li>åœ¨æ¯ä¸ª volatile è¯»æ“ä½œçš„åé¢æ’å…¥ä¸€ä¸ª LoadStore å±éšœã€‚ è¯¥å±éšœé™¤äº†ç¦æ­¢äº† volatile è¯»æ“ä½œä¸å…¶ä¹‹åçš„ä»»ä½•å†™æ“ä½œè¿›è¡Œé‡æ’åºï¼Œè¿˜ä¼šåˆ·æ–°å¤„ç†å™¨ç¼“å­˜ï¼Œä½¿å…¶ä»–çº¿ç¨‹ volatile å˜é‡çš„å†™æ›´æ–°å¯¹ volatile è¯»æ“ä½œçš„çº¿ç¨‹å¯è§ã€‚</li>
</ul>
<h4 id="volatile-çš„ä½¿ç”¨åœºæ™¯"><a href="#volatile-çš„ä½¿ç”¨åœºæ™¯" class="headerlink" title="volatile çš„ä½¿ç”¨åœºæ™¯"></a>volatile çš„ä½¿ç”¨åœºæ™¯</h4><p>æ€»ç»“èµ·æ¥ï¼Œå°±æ˜¯â€œä¸€æ¬¡å†™å…¥ï¼Œåˆ°å¤„è¯»å–â€ï¼ŒæŸä¸€çº¿ç¨‹è´Ÿè´£æ›´æ–°å˜é‡ï¼Œå…¶ä»–çº¿ç¨‹åªè¯»å–å˜é‡(ä¸æ›´æ–°å˜é‡)ï¼Œå¹¶æ ¹æ®å˜é‡çš„æ–°å€¼æ‰§è¡Œç›¸åº”é€»è¾‘ã€‚ä¾‹å¦‚çŠ¶æ€æ ‡å¿—ä½æ›´æ–°ï¼Œè§‚å¯Ÿè€…æ¨¡å‹å˜é‡å€¼å‘å¸ƒã€‚</p>
<h2 id="synchronized"><a href="#synchronized" class="headerlink" title="synchronized"></a>synchronized</h2><h3 id="long-å’Œ-double-å˜é‡çš„ç‰¹æ®Šè§„åˆ™"><a href="#long-å’Œ-double-å˜é‡çš„ç‰¹æ®Šè§„åˆ™" class="headerlink" title="long å’Œ double å˜é‡çš„ç‰¹æ®Šè§„åˆ™"></a>long å’Œ double å˜é‡çš„ç‰¹æ®Šè§„åˆ™</h3><p>JMM è¦æ±‚ lockã€unlockã€readã€loadã€assignã€useã€storeã€write è¿™ 8 ç§æ“ä½œéƒ½å…·æœ‰åŸå­æ€§ï¼Œä½†æ˜¯å¯¹äº 64 ä½çš„æ•°æ®ç±»å‹ï¼ˆlong å’Œ doubleï¼‰ï¼Œåœ¨æ¨¡å‹ä¸­ç‰¹åˆ«å®šä¹‰ç›¸å¯¹å®½æ¾çš„è§„å®šï¼šå…è®¸è™šæ‹Ÿæœºå°†æ²¡æœ‰è¢« <code>volatile</code> ä¿®é¥°çš„ 64 ä½æ•°æ®çš„è¯»å†™æ“ä½œåˆ†ä¸º 2 æ¬¡ 32 ä½çš„æ“ä½œæ¥è¿›è¡Œï¼Œå³å…è®¸è™šæ‹Ÿæœºå¯é€‰æ‹©ä¸ä¿è¯ 64 ä½æ•°æ®ç±»å‹çš„ loadã€storeã€read å’Œ write è¿™ 4 ä¸ªæ“ä½œçš„åŸå­æ€§ã€‚ç”±äºè¿™ç§éåŸå­æ€§ï¼Œæœ‰å¯èƒ½å¯¼è‡´å…¶ä»–çº¿ç¨‹è¯»åˆ°åŒæ­¥æœªå®Œæˆçš„â€œ32 ä½çš„åŠä¸ªå˜é‡â€çš„å€¼ã€‚</p>
<p>ä¸è¿‡å®é™…å¼€å‘ä¸­ï¼ŒJava å†…å­˜æ¨¡å‹å¼ºçƒˆå»ºè®®è™šæ‹ŸæœºæŠŠ 64 ä½æ•°æ®çš„è¯»å†™å®ç°ä¸ºå…·æœ‰åŸå­æ€§ï¼Œç›®å‰å„ç§å¹³å°ä¸‹çš„å•†ç”¨è™šæ‹Ÿæœºéƒ½é€‰æ‹©æŠŠ 64 ä½æ•°æ®çš„è¯»å†™æ“ä½œä½œä¸ºåŸå­æ“ä½œæ¥å¯¹å¾…ï¼Œå› æ­¤æˆ‘ä»¬åœ¨ç¼–å†™ä»£ç æ—¶ä¸€èˆ¬ä¸éœ€è¦æŠŠç”¨åˆ°çš„ long å’Œ double å˜é‡ä¸“é—¨å£°æ˜ä¸º volatileã€‚</p>
<h3 id="final-å‹é‡çš„ç‰¹æ®Šè§„åˆ™"><a href="#final-å‹é‡çš„ç‰¹æ®Šè§„åˆ™" class="headerlink" title="final å‹é‡çš„ç‰¹æ®Šè§„åˆ™"></a>final å‹é‡çš„ç‰¹æ®Šè§„åˆ™</h3><p>æˆ‘ä»¬çŸ¥é“ï¼Œfinal æˆå‘˜å˜é‡å¿…é¡»åœ¨å£°æ˜çš„æ—¶å€™åˆå§‹åŒ–æˆ–è€…åœ¨æ„é€ å™¨ä¸­åˆå§‹åŒ–ï¼Œå¦åˆ™å°±ä¼šæŠ¥ç¼–è¯‘é”™è¯¯ã€‚ final å…³é”®å­—çš„å¯è§æ€§æ˜¯æŒ‡ï¼šè¢« final ä¿®é¥°çš„å­—æ®µåœ¨å£°æ˜æ—¶æˆ–è€…æ„é€ å™¨ä¸­ï¼Œä¸€æ—¦åˆå§‹åŒ–å®Œæˆï¼Œé‚£ä¹ˆåœ¨å…¶ä»–çº¿ç¨‹æ— é¡»åŒæ­¥å°±èƒ½æ­£ç¡®çœ‹è§ final å­—æ®µçš„å€¼ã€‚è¿™æ˜¯å› ä¸ºä¸€æ—¦åˆå§‹åŒ–å®Œæˆï¼Œfinal å˜é‡çš„å€¼ç«‹åˆ»å›å†™åˆ°ä¸»å†…å­˜ã€‚</p>
<h2 id="å‚è€ƒèµ„æ–™"><a href="#å‚è€ƒèµ„æ–™" class="headerlink" title="å‚è€ƒèµ„æ–™"></a>å‚è€ƒèµ„æ–™</h2><ul>
<li><a target="_blank" rel="noopener" href="https://book.douban.com/subject/10484692/">ã€ŠJava å¹¶å‘ç¼–ç¨‹å®æˆ˜ã€‹</a></li>
<li><a target="_blank" rel="noopener" href="https://book.douban.com/subject/26591326/">ã€ŠJava å¹¶å‘ç¼–ç¨‹çš„è‰ºæœ¯ã€‹</a></li>
<li><a target="_blank" rel="noopener" href="https://book.douban.com/subject/34907497/">ã€Šæ·±å…¥ç†è§£ Java è™šæ‹Ÿæœºã€‹</a></li>
<li><a target="_blank" rel="noopener" href="https://juejin.im/post/5bf2977751882505d840321d">ç†è§£ Java å†…å­˜æ¨¡å‹</a></li>
<li><a target="_blank" rel="noopener" href="https://time.geekbang.org/column/intro/100023901">ã€ŠJava å¹¶å‘ç¼–ç¨‹å®æˆ˜ã€‹</a></li>
</ul>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




  <nav class="pagination">
    <a class="extend prev" rel="prev" href="/blog/page/4/"><i class="fa fa-angle-left" aria-label="ä¸Šä¸€é¡µ"></i></a><a class="page-number" href="/blog/">1</a><span class="space">&hellip;</span><a class="page-number" href="/blog/page/4/">4</a><span class="page-number current">5</span><a class="page-number" href="/blog/page/6/">6</a><span class="space">&hellip;</span><a class="page-number" href="/blog/page/15/">15</a><a class="extend next" rel="next" href="/blog/page/6/"><i class="fa fa-angle-right" aria-label="ä¸‹ä¸€é¡µ"></i></a>
  </nav>

</div>
  </main>

  <footer class="footer">
    <div class="footer-inner">


<div class="copyright">
  &copy; 2015 â€“ 
  <span itemprop="copyrightYear">2022</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">é’æ‚Ÿ â—¾ Dunwu</span>
</div>
<div class="wordcount">
  <span class="post-meta-item">
    <span class="post-meta-item-icon">
      <i class="fa fa-chart-line"></i>
    </span>
      <span>ç«™ç‚¹æ€»å­—æ•°ï¼š</span>
    <span title="ç«™ç‚¹æ€»å­—æ•°">1.5m</span>
  </span>
  <span class="post-meta-item">
    <span class="post-meta-item-icon">
      <i class="fa fa-coffee"></i>
    </span>
      <span>ç«™ç‚¹é˜…è¯»æ—¶é•¿ &asymp;</span>
    <span title="ç«™ç‚¹é˜…è¯»æ—¶é•¿">22:08</span>
  </span>
</div>

    </div>
  </footer>

  
  <script src="https://cdn.jsdelivr.net/npm/animejs@3.2.1/lib/anime.min.js" integrity="sha256-XL2inqUJaslATFnHdJOi9GfQ60on8Wx1C2H8DYiN1xY=" crossorigin="anonymous"></script>
<script src="/blog/js/comments.js"></script><script src="/blog/js/utils.js"></script><script src="/blog/js/motion.js"></script><script src="/blog/js/next-boot.js"></script>

  
<script src="https://cdn.jsdelivr.net/npm/hexo-generator-searchdb@1.4.0/dist/search.js" integrity="sha256-vXZMYLEqsROAXkEw93GGIvaB2ab+QW6w3+1ahD9nXXA=" crossorigin="anonymous"></script>
<script src="/blog/js/third-party/search/local-search.js"></script>




  <script src="/blog/js/third-party/pace.js"></script>

  




<script src="https://unpkg.com/darkmode-js@1.5.7/lib/darkmode-js.min.js"></script>

<script>
var options = {
  bottom: '64px',
  right: 'unset',
  left: '32px',
  time: '0.5s',
  mixColor: 'transparent',
  backgroundColor: 'transparent',
  buttonColorDark: '#100f2c',
  buttonColorLight: '#fff',
  saveInCookies: true,
  label: 'ğŸŒ“',
  autoMatchOsTheme: true
}
const darkmode = new Darkmode(options);
window.darkmode = darkmode;
darkmode.showWidget();
</script>
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/gitalk@1.7.2/dist/gitalk.css" integrity="sha256-AJnUHL7dBv6PGaeyPQJcgQPDjt/Hn/PvYZde1iqfp8U=" crossorigin="anonymous">

<script class="next-config" data-name="gitalk" type="application/json">{"enable":true,"github_id":"dunwu","repo":"blog","client_id":"c45bc13ca1d3d3aa4836","client_secret":"1907a9f0c22087badad3938e1d7dcba9078f88ac","admin_user":"dunwu","distraction_free_mode":true,"proxy":"https://cors-anywhere.azm.workers.dev/https://github.com/login/oauth/access_token","language":"zh-CN","js":{"url":"https://cdn.jsdelivr.net/npm/gitalk@1.7.2/dist/gitalk.min.js","integrity":"sha256-Pmj85ojLaPOWwRtlMJwmezB/Qg8BzvJp5eTzvXaYAfA="},"path_md5":"11d050d74382da19a3385d9f8027eb99"}</script>
<script src="/blog/js/third-party/comments/gitalk.js"></script>

</body>
</html>
